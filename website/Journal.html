<!doctype html PUBLIC "-//W3C//DTD HTML 4.01//EN">

<html>

<head>
<link rel="stylesheet" type="text/css" href="../style.css" />
<link rel="shortcut icon" href="../images/logoicon.gif" type="image/gif" />
<title>Jean's Journal</title>
</head>

<body>

<table width="100%" cellpadding="0" cellspacing="0"><tr>
<td align="left"><h2>Jean's Journal</h2></td>
<td align="right">
<a target="_blank" href="http://www.linkedin.com/in/jeantessier" style="text-decoration:none;">
    <img src="http://www.linkedin.com/img/webpromo/btn_liprofile_blue_80x15.gif" width="80" height="15" border="0" alt="View Jean Tessier's LinkedIn profile">
</a>
</td>
</tr></table>

<dl>
<dt><a name="2010-05-06">May 06, 2010</a></dt>
<dd>
<p>
I got an email today from a user who found a bug in Dependency Finder.  It turns
out that I implemented the null check in <code>Classfile.isInnerClass()</code> in the wrong
direction.  I looked for usages of this method but found none.  Not even a test.
The shame.
</p>

<p>
I also discovered a 2 year old bug report about the access flags for inner
classes.  Given these classes:
</p>

<pre>
    public class Outer {
        private class Inner {}
    }
</pre>

<p>
The bytecode for <code>Outer</code> has an access flag of <code>00000000 00100001</code>: <code>ACC_PUBLIC</code>
and <code>ACC_SUPER</code>.  The bytecode for <code>Inner</code> has an access flag of
<code>00000000 00100000</code>: only <code>ACC_SUPER</code> because it is not a public class.  The
<code>.class</code> file format does not provide for other class-level visibility levels.
The modifiers of the inner class are covered in the <code>InnerClass</code> part of
<code>InnerClasses_attribute</code>.  The bytecode for both <code>Outer</code> and <code>Inner</code> include
identical copies of <code>InnerClass</code> with an access flag of <code>00000000 00000010</code>:
<code>ACC_PRIVATE</code>.
</p>

<p>
The bug report was trying to copy the <code>InnerClass</code> access flag to the
<code>Classfile</code> instance.  This will not work because the meaning of each bit is
different between the two classes.  The interfaces in
<code>com.jeantessier.classreader</code> are meant to provide an accurate representation of
the information in the bytecode.  It is meant for people who think in terms of
the bytecode, not people who think in terms of the Java language.  There is a
subtle difference.  If you're dealing with an inner class, you have to get its
access level from the enclosed <code>InnerClasses</code> attribute.
</p>

<p>
To work on this problem, I fired up a <code>grails shell</code> in a Grails application
where I had copied <code>DependencyFinder.jar</code>.  It was really cool to simply use
scripting to manipulate data.  Java has so much boilerplate code, compared to
Groovy.
</p>
</dd>
<dt><a name="2010-04-28">April 28, 2010</a></dt>
<dd>
<p>
<a target="_blank" href="http://grails.org/">Grails</a> already includes JAR files for
<a target="_blank" href="http://logging.apache.org/log4j/1.2/index.html">Log4J</a> 1.2.15 and
<a target="_blank" href="http://jakarta.apache.org/oro/">Jakarta ORO</a> 2.0.8, the same versions that
Dependency Finder uses.  As an experiment, I created an empty Grails project and
copied only <code>DependencyFinder.jar</code> to its <code>lib/</code> directory.  I then started
<code>grails shell</code> and I was able to run the same operations as
<code>DependencyExtractor</code> by hand.  No big surprise there, but it was cool.
</p>

<p>
I want to redo the webapp as a Grails application.  I'm struggling with file
system issues, though.  Should I create a directory under the current tree where
I would put the new app, next to <code>web/</code> and =webwork/"?  That would be
consistent, but the new app would get a name from that directory, which would
most likely be called <code>grails</code>.  An alternative is to start a brand new tree
somewhere else, completely dissociated from the current Dependency Finder
development tree.  There, the application can be called <code>DependencyFinder</code> or
some such.  But I would have to start a new Git repository for it.  In either
case, I'll have to be creative to manage <code>DependencyFinder.jar</code> as it evolves.
</p>
</dd>
<dt><a name="2010-04-23">April 23, 2010</a></dt>
<dd>
<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>IntelliJ IDEA</td>
        <td>:</td>
        <td>9.0.1 CE</td>
        <td>-></td>
        <td>9.0.2 CE</td>
    </tr>
</table>
</blockquote>
</dd>
<dt><a name="2010-04-17">April 17, 2010</a></dt>
<dd>
<p>
My license for IntelliJ IDEA is about to expire.  I haven't been able to work
on Dependency Finder since I started working at
<a target="_blank" href="http://shopwell.com">ShopWell</a>, so I don't know if they'll consider the
project active enough to deserve a free license still.  But JetBrains has a
<i>community edition</i> that is free and does everything I need, so it is not a
complete loss.  I installed it tonight to try it out.
</p>

<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>IntelliJ IDEA</td>
        <td>:</td>
        <td>9.0</td>
        <td>-></td>
        <td>9.0.1 CE</td>
    </tr>
</table>
</blockquote>
</dd>
<dt><a name="2010-01-26">January 26, 2010</a></dt>
<dd>
<p>
A user was having difficulty accessing the DTDs.  After investigating, I
realized SourceForge disabled automatic directory listings ... in 2008.  They
left instructions on how to re-enable it, so I added <code>.htaccess</code> in the <code>dtd/</code>
folder to take care of it.
</p>
</dd>
<dt><a name="2009-12-17">December 17, 2009</a></dt>
<dd>
<p>
Tried to use Dependency Finder to analyze some Groovy code.  But the way that
Groovy mediates method calls so it can treat getters like properties makes it
difficult (impossible?) for Dependency Finder to see the real dependency.
Instead, it sees dependencies to Groovy's internal method resolution code.
</p>

<p>
I installed the latest version of
<a target="_blank" href="http://www.yworks.com/en/products_yed_about.htm">yEd</a> only to find out
its XML parser cannot read the GraphML files I generate with
<code>DependencyGraphToyEd</code>.  Something to do with forward references.  I guess I'll
have to rewrite it to process write out all nodes before it writes edges.
</p>
</dd>
<dt><a name="2009-11-19">November 19, 2009</a></dt>
<dd>
<p>
I've been setting up another development on a new laptop.  I couldn't find the
version of <a target="_blank" href="http://sourceforge.net/projects/fitlibrary/">FitLibrary</a> that I'm
using with Dependency Finder.  I'm using <code>FitLibraryRunner20060116</code>, but the
oldest version available is <code>FitLibraryRunner20070217</code>.  There were some API
changes, starting with this version, that are incompatible with my code and I
have not found a workaround.  I am going to have to include my copy of the
2006-01-16 version with the source for Dependency Finder if people want to run
the Fit tests.
</p>
</dd>
<dt><a name="2009-11-07">November 07, 2009</a></dt>
<dd>
<p>
I'm thinking of replacing the web app with a <a target="_blank" href="http://grails.org/">Grails</a> app
instead.
</p>
</dd>
<dt><a name="2009-10-09">October 09, 2009</a></dt>
<dd>
<p>
Found some useful instructions on tying Git and SVN at the
<a target="_blank" href="http://kernel.org/pub/software/scm/git/docs/">online documentation for Git</a>
for the
<a target="_blank" href="http://www.kernel.org/pub/software/scm/git/docs/git-svn.html"><code>git-svn</code></a>
command.
</p>
</dd>
<dt><a name="2009-10-08">October 08, 2009</a></dt>
<dd>
<p>
Fixed the WebWork-based web app, somewhat.  It turns out that if I want to use
Spring IoC, I need to add a few JAR files to the application and an empty
Spring config.  But maybe I just don't need Spring IoC.
</p>

<p>
Now, the web app starts, but nothing happens when I try to run <code>extract.action</code>.
I know the right method gets called because <code>start</code> and <code>stop</code> get assigned, but
<code>ExtractAction</code> does not look at the resources listed in <code>source</code>.
</p>

<p>
I tried to update the SVN repo first, in the hopes of copying the change to Git
afterwards.  This is probably a bad idea if I don't have access to the original
Git client where I first fetched the SVN repo.
</p>
</dd>
<dt><a name="2009-10-06">October 06, 2009</a></dt>
<dd>
<p>
Converted the Subversion repository to Git, hosted on SourceForge.  I'll try to
keep them in sync for a while, but I might eventually switch only to Git and
cancel the SVN repo, just like I did for CVS a while back.
</p>
</dd>
<dt><a name="2009-10-01">October 01, 2009</a></dt>
<dd>
<p>
Added sample data files for 1.2.1 beta releases.
</p>

<p>
Added <code>build.cobertura.xml</code> for computing code coverage using
<a target="_blank" href="http://cobertura.sourceforge.net/">Cobertura</a>.
</p>
</dd>
<dt><a name="2009-09-30">September 30, 2009</a></dt>
<dd>
<p>
Worked on backlog of data files from 1.2.1 beta releases.
</p>
</dd>
<dt><a name="2009-09-27">September 27, 2009</a></dt>
<dd>
<p>
Released version 1.2.1 beta3.
</p>

<p>
Updated the release instructions.
</p>
</dd>
<dt><a name="2009-09-23">September 23, 2009</a></dt>
<dd>
<p>
Added missing flag values on <code>Classfile</code> parts when rendered in XML.  I also
added comprehensive tests for all flag values.
</p>

<ul>
    <li><code>Classfile</code></li>
    <ul>
        <li><code>synthetic</code></li>
        <li><code>annotation</code></li>
        <li><code>enum</code></li>
    </ul>
    <li><code>Field</code></li>
    <ul>
        <li><code>enum</code></li>
    </ul>
    <li><code>Method</code></li>
    <ul>
        <li><code>bridge</code></li>
        <li><code>varargs</code></li>
    </ul>
    <li><code>InnerClass</code></li>
    <ul>
        <li><code>annotation</code></li>
        <li><code>enum</code></li>
    </ul>
</ul>

<p>
Updated the DTD too.
</p>
</dd>
<dt><a name="2009-09-21">September 21, 2009</a></dt>
<dd>
<p>
Found a bug with the latest release.  When I added Google Collections, I forgot
to update some of the Unix launch scripts.  I'll probably cut a new release with
the fixed scripts.
</p>
</dd>
<dt><a name="2009-09-17">September 17, 2009</a></dt>
<dd>
<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>HttpUnit</td>
        <td>:</td>
        <td>1.6.2</td>
        <td>-></td>
        <td>1.7</td>
    </tr>
</table>
</blockquote>

<p>
Added the output of <code>JarJarDiff</code> on
<a target="_blank" href="http://httpunit.sourceforge.net/">HttpUnit</a> to the Samples page.
</p>
</dd>
<dt><a name="2009-09-16">September 16, 2009</a></dt>
<dd>
<p>
Going through the <a target="_blank" href="http://groovy.codehaus.org/">Groovy</a> tutorial.  It is a
nice scripting language, a cool extension of Java.  You can name closure
parameters, just like Ruby, but it also has a default <code>it</code> if the closure needs
only one parameter.  I was able to compile to bytecode, using <code>groovyc</code>, and run
Dependency Finder on it.  But the code it generates is very hard to read, so
don't try it.  Generated code is meant to stay hidden.
</p>

<p>
Speaking of generated code, I saw a presentation on
<a target="_blank" href="http://ixedit.com">IxEdit</a>, a tool to generate JavaScript to tie controls on
a page.  While it is very slick for generating interactions, it generates code
that you then cut and paste into the HTML page.  I'm pretty sure this is <b>not</b>
maintainable.  The generated JavaScript is fairly opaque.  The demo didn't cover
how or if you could re-insert the code in the editor to refine interactions.
</p>
</dd>
<dt><a name="2009-09-14">September 14, 2009</a></dt>
<dd>
<p>
A friend mentioned the <a target="_blank" href="http://groovy.codehaus.org/">Groovy</a> language.  It is
a scripting language built on top of Java.  It compiles to bytecode and runs on
the JVM, so I might be able to run Dependency Finder on it and see what comes
out.  :-)
</p>

<p>
Videos on Groovy:
</p>

<ul>
<li><a target="_blank" href="http://www.youtube.com/watch?v=FnIGnMMpn6c">Guillaume Laforge at Google</a></li>
<li><a target="_blank" href="http://www.youtube.com/watch?v=NEnniZTdOYk">Guillaume Laforge on AppEngine</a></li>
</ul>

<p>
The Groovy site mentions <a target="_blank" href="http://cobertura.sourceforge.net/">Cobertura</a> to do
code coverage.  Its sample output looks nicer than what I'm using right now:
<a target="_blank" href="http://www.cenqua.com/clover/">Clover</a> and
<a target="_blank" href="http://emma.sourceforge.net">Emma</a>.  I'll try to run it over Dependency
Finder when I have a moment.
</p>
</dd>
<dt><a name="2009-09-11">September 11, 2009</a></dt>
<dd>
<p>
Released version 1.2.1 beta2.
</p>

<p>
The distribution file management has changed a lot since the last release.  I
need to update the release instructions.  See
<a target="_blank" href="https://sourceforge.net/apps/trac/sourceforge/wiki/Release%20files%20for%20download">release instructions</a>
on SourceForge in the meantime.
</p>
</dd>
<dt><a name="2009-09-09">September 09, 2009</a></dt>
<dd>
<p>
Pushed the logic for separating fully qualified class names into package name
and simple class name to the <code>Class_info</code> class, with tests.  Added tests for
<code>Classfile.locateField()</code> and <code>Classfile.locateMethod()</code>, including proper
handling of inherited package-visible methods.
</p>

<p>
Added <code>LoadAdapter</code>, a no-op implementation of <code>LoadListener</code>, so
implementations don't have to duplicate no-op methods just to fulfill the
interface.
</p>

<p>
Started Google Collections in spite of my reservations regarding JSR 305.  Next,
I want to start using Guice too.
</p>
</dd>
<dt><a name="2009-09-04">September 04, 2009</a></dt>
<dd>
<p>
Added JarJarDiff output for <a target="_blank" href="http://easymock.org/">EasyMock</a> and its class
extension.
</p>
</dd>
<dt><a name="2009-08-31">August 31, 2009</a></dt>
<dd>
<p>
I'm still debating whether interactions between visitors should use double
dispatch or not.  Double dispatch is useful when you don't know the exact type
of the element being visited, so you cannot know which <code>visit()</code> method to use.
But when the decorating visitor is ready to dispatch to the decorated visitor,
it knows the concrete type of the visited element, so there is no need for
double dispatch.  I'm still tempted to keep using double dispatch nonetheless,
since it is the normal mechanism for passing control to a visitor and it makes
the interactions with the decorated visitor seem more natural.
</p>

<p>
I have produced an alternate sequence diagram that shows the flow of control
between three visitors composed visitor to render a dependency graph as text.
</p>

<p>
<a target="_blank" href="../images/DecoratedVisitorsWithoutDoubleDispatch.png"><img border="0" src="../images/s_DecoratedVisitorsWithoutDoubleDispatch.png" /></a><br />
</p>

<p>
I also produced a matching version of the dependency graph for rendering a
dependency closure as a call graph.
</p>

<p>
<a target="_blank" href="../images/CallGraphWithoutDoubleDispatch.png"><img border="0" src="../images/s_CallGraphWithoutDoubleDispatch.png" /></a><br />
</p>

<p>
I really like <a target="_blank" href="http://sdedit.sf.net/">sdedit</a> for creating sequence diagrams.
</p>
</dd>
<dt><a name="2009-08-28">August 28, 2009</a></dt>
<dd>
<p>
Tried to used
<a target="_blank" href="http://code.google.com/p/google-collections/">Google Collections</a> in
<code>Classfile</code>.  I was hoping that <code>Iterables.find()</code> would simplify methods like
<code>getField()</code> and <code>getMethod()</code>, even with the added boilerplate for the
anonymous inner class for the <code>Predicate</code>.  But <code>find()</code> throws an exeception
if it doesn't find a match whereas my code has been returning <code>null</code>.  Once I
throw in the exception handling, the methods is much harder to read than the
simple <code>for()</code> loop I had before.
</p>

<p>
Google Collections uses the <code>@Nullable</code> annotation from
<a target="_blank" href="http://code.google.com/p/jsr-305/">JSR 305</a>.  But the project doesn't have
any binaries, so I had to steal the JAR file from the
<a target="_blank" href="http://code.google.com/p/findbugs/">FindBugs</a> project.  It doesn't feel as
clean as I would want it.  Maybe I need to let Google Collections to bake for a
little while longer.
</p>
</dd>
<dt><a name="2009-08-27">August 27, 2009</a></dt>
<dd>
<p>
Refactored <code>Classfile</code> to rework <code>locateField()</code> and <code>locateMethod()</code>.  I now
have a special constructor to allow testing.  I marked it with a comment while I
decide whether or not I want to pull
<a target="_blank" href="http://code.google.com/p/google-collections/">Google Collections</a> into the
project so I can use its <code>@VisibleForTesting</code> annotation.
</p>
</dd>
<dt><a name="2009-08-22">August 22, 2009</a></dt>
<dd>
<p>
Finished a possible test for <code>Classfile</code>, using a test-only constructor.  I
marked it <code>@Deprecated</code> until I figure out how I want to introduce the Google
Collections API.
</p>

<p>
I should rewrite <code>Classfile.locateField()</code> so it is similar to
<code>Classfile.locateMethod()</code>.  For consistency.
</p>
</dd>
<dt><a name="2009-08-19">August 19, 2009</a></dt>
<dd>
<p>
Looked at how I'm using <code>MaximumCapacityPatternCache</code> and how its <code>capacity()</code>
method returns a hard-coded <i>20</i>.  This capacity serves to seed the expression
cache in ORO's <code>Perl5Util</code>.  I'm thinking that most of the time, 20 is overkill.
And when I need more than 20, I need <i>a lot more</i> than 20.  So it's never quite
the right number, but I cannot refine it without lots of experimentation.  At
least, ORO's <code>GenericCache.DEFAULT_CAPACITY</code> is also <i>20</i>, so somebody thinks
it's a sensible value.  Maybe I should reference it instead of hard-coding a
mysterious <i>20</i>.
</p>
</dd>
<dt><a name="2009-08-18">August 18, 2009</a></dt>
<dd>
<p>
Changed dependencies on <code>java.io.DataInputStream</code> to <code>java.io.DataInput</code>
instead.
</p>

<p>
Looked at <code>Classfile.locateMethod()</code> and I found something that seemd strange at
first glance: it will return a method defined on the class regardless of its
access priviledge, but will only return one that is inherited if it is public or
protected.  This makes sense, since otherwise it would not be inherited.  But it
is missing the case of a package-level method from a superclass or interface in
the same package.  The expected behavior is not documented and there are no
tests to tell me what I had in mind when I first wrote it.  So I tried to write
a test for it, but the constructor for <code>Classfile</code> does <b>way</b> too much work.  It
reads a lot of data from the <code>DataInput</code>, including the constant pool and
interfaces and fields and methods and attributes.  Specifying all of these in a
test is too brittle, I'd much rather supply mocks for all these collaborators.
If I used the
<a target="_blank" href="http://code.google.com/p/google-collections/">Google Collections</a>, I could
have a special constructor and mark it <code>@VisibleForTesting</code>.
</p>
</dd>
<dt><a name="2009-08-17">August 17, 2009</a></dt>
<dd>
<p>
Tweaked tests to use <code>is()</code> matcher with <code>assertThat()</code> consistently.
</p>
</dd>
<dt><a name="2009-08-14">August 14, 2009</a></dt>
<dd>
<p>
Refactored <code>com.jeantessier.metrics.TestMetricsGatherer</code> so it uses mostly the
new <code>assertThat()</code> syntax from JUnit 4.5 intead of the various <code>assertTrue()</code>
and <code>assertEquals()</code> and so forth.  I was able to simplify the tests drastically
with judicious uses of helper methods and Hamcrest's <code>hasItems()</code> matcher.
</p>

<p>
It is still more an integration test than a pure unit test.  It is somewhat
brittle since it depends on an actual compiled class and lots of internal
details of <code>com.jeantessier.metrics</code>, but there is only so much I can do in one
pass.  At least, it is very readalble now that I have removed all the
duplication.
</p>
</dd>
<dt><a name="2009-08-13">August 13, 2009</a></dt>
<dd>
<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>JUnit</td>
        <td>:</td>
        <td>4.6</td>
        <td>-></td>
        <td>4.7</td>
    </tr>
</table>
</blockquote>

<p>
The new <a target="_blank" href="http://junit.org/">JUnit</a> introduces a new concept called
<a target="_blank" href="http://github.com/KentBeck/junit/raw/23ffc6baf5768057e366e183e53f4dfa86fbb005/doc/ReleaseNotes4.7.txt"><i>rules</i></a>.
They are essentially interceptors for tests and a new extension mechanism for
JUnit, now that tests don't have to derive from <code>TestCase</code> anymore.  This looks
promising.  They re-implemented expected exceptions and you can now supply
matchers for more precise matching of exceptions thrown by the test methods.
Rules appear much more flexible, but they are still poorly documented.  It is
unfortunate that the javadocs bundled with JUnit 4.7 do not include the
documentation of already provided rules.
</p>

<p>
Extracted styles from the Resources page.
</p>
</dd>
<dt><a name="2009-08-07">August 07, 2009</a></dt>
<dd>
<p>
Another example sequence diagram for the call flow across composed visitors to,
this time to render a dependency closure as a call graph in text.  Click the
image for a better view.  See also the <a target="_blank" href="../images/CallGraph.sd">source file</a>.
</p>

<p>
<a target="_blank" href="../images/CallGraph.png"><img border="0" src="../images/s_CallGraph.png" /></a><br />
</p>

<p>
I wanted to completely separate the textual rendering from the traversal of the
graph, but I may not be able to do that.  The current <code>TextPrinter</code> makes
assumptions on the nature of the graph so it can remove "empty nodes".  I am not
sure in this logic belongs in the rendering or the traversal or somewhere else
altogether.  If it belongs somewhere else, this complicates the setup to do a
simple printout to text.
</p>
</dd>
<dt><a name="2009-08-05">August 05, 2009</a></dt>
<dd>
<p>
Found <a target="_blank" href="http://sdedit.sf.net/">sdedit</a> for creating sequence diagrams.  Here is
an example for the call flow across composed visitors to render a dependency
graph as text.  Click the image for a better view.  See also the
<a target="_blank" href="../images/DecoratedVisitors.sd">source file</a>.
</p>

<p>
<a target="_blank" href="../images/DecoratedVisitors.png"><img border="0" src="../images/s_DecoratedVisitors.png" /></a><br />
</p>

<p>
Adjusted the yEd transformation so it renders unconfirmed nodes a different
color from the confirmed nodes.
</p>
</dd>
<dt><a name="2009-08-03">August 03, 2009</a></dt>
<dd>
<p>
Found some references to <code>StackMap</code> in the release notes for JDK 1.6.  They
point to <a target="_blank" href="http://jcp.org/en/jsr/detail?id=202">JSR 202</a>, which itself points
to JSR 030 and <a target="_blank" href="http://jcp.org/en/jsr/detail?id=139">JSR 139</a>.  It appears
<code>StackMap</code> is used to simplify class verification by splitting the process
between the compiler and the runtime.  JSR 139 has an early specification where
the attribute is named "StackMap" instead of "StackMap<i>Table</i>".  JSR 202 has the
full specification, so I will be able to use it to parse "StackMapTable"
attributes fully in <code>com.jeantessier.classreader</code>.
</p>
</dd>
<dt><a name="2009-07-30">July 30, 2009</a></dt>
<dd>
<p>
Had a discussion with Russ Rufer, Tracy Bialik, and Gene Volovich on my recent
experiment combining decorator and visitor patterns.  Russ recommended that I
look at the code for <a target="_blank" href="http://asm.objectweb.org/">ASM</a> where he saw a way to
combine visitors and graph traversal that he liked.  This might be inspirational
when I try to apply the same model to <code>com.jeantessier.classreader.Visitor</code>.
</p>

<p>
They also suggested that I could migrate Dependency Finder to ASM.  This way, I
wouldn't have to keep up with language developments.  I vaguely remember taking
a glance at ASM some time ago and finding it rather ugly.  Maybe it's worth
another look, if only to properly document why I don't like it.  :-)
</p>

<p>
Found
<a target="_blank" href="http://javaexpert.wordpress.com/2009/07/29/mac-os-x-java-6visualvm-and-setting-currentjdk-for-tomcat-and-other-app-servers/">instructions</a>
for switching my MacBook Pro to JDK 1.6.
</p>

<p>
I was looking at <code>CodeDependencyCollector</code> and I noticed that some of the
<code>visit...()</code> methods were not calling their superclass counterparts like the
others.  They were:
</p>

<ul>
<li><code>visitClass_info()</code></li>
<li><code>visitFieldRef_info()</code></li>
<li><code>visitMethodRef_info()</code></li>
<li><code>visitInterfaceMethodRef_info()</code></li>
<li><code>visitExceptionHandler()</code></li>
</ul>

<p>
I couldn't think of a reason they should not call to <code>super</code>, so I fixed them.
They all end up calling to <code>VisitorBase</code> which has all no-ops anyway.  Strange,
nonetheless.  This brings me back to a paper I wrote years ago for my M.Sc. on
what I called
<a target="_blank" href="http://www.iro.umontreal.ca/~keller/Layla/inherited.pdf">Inherited Behavior</a>
at the time.
</p>

<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>JUnit</td>
        <td>:</td>
        <td>4.5</td>
        <td>-></td>
        <td>4.6</td>
    </tr>
</table>
</blockquote>

<p>
I also noticed that the new SourceForge layout has a large download button on
the project's home page and that it points to version <b>1.1.0-beta2</b>, which is
about 5 years old.  It took a while to track down how to change it to the latest
version, 1.2.1-beta1, and I don't know how long it will take for the change to
propagate all the way to the project's home page.  I don't know how long it's
been this way.  The download statistics at SourceForge show nothing for the last
week.  I hope it's just that their stats are down and not that nobody is
downloading Dependency Finder!
</p>
</dd>
<dt><a name="2009-07-29">July 29, 2009</a></dt>
<dd>
<p>
Refactored <code>SelectiveTraversalStrategy</code> to create an actual
<code>ComprehensiveTraversalStrategy</code> to use in defaults instead of an unconfigured
<code>SelectiveTraversalStrategy</code>.  I figure the indent is more explicit this way.
</p>

<p>
Changed <code>SelectiveVisitor</code> to reuse the superclass implementations when it is
appropriate.  This meant changing the tests because the superclass was using
double dispatch to pass control to the delegate visitor and the original
implementation of <code>SelectiveVisitor</code> was calling the delegate directly.
</p>
</dd>
<dt><a name="2009-07-28">July 28, 2009</a></dt>
<dd>
<p>
I don't know what I was thinking when I first wrote <code>VisitorDecorator</code>.  It was
calling the counterpart method on the delegate directly instead of using double
dispatch like I originally wanted to.  I fixed the tests, mocking more things
along the way, and then fixed the code.
</p>

<p>
Cleaning up the interface, I added <code>traverseInbound()</code> and <code>traverseOutbound()</code>
to the <code>Visitor</code> interface.  Almost all implementations already had them already
and the others ended up being no-ops.
</p>

<p>
I wrote a <code>BasicTraversal</code> visitor that uses a <code>TraversalStrategy</code> to do some
filtering, but I was not happy with it.  It was not clear where scope versus
filter selections should happen.  I felt like I needed a separate class to do
the scoping and the filtering, but the composition of decorators would become
non-trivial.  Finally, I found a way to make it work and I got <code>BasicTraversal</code>
and <code>SelectiveVisitor</code> to be just the way I wanted.
</p>

<p>
I changed my IntelliJ IDEA configuration to use JDK 1.6 on my MacBook Pro.  My
shell is still stuck on JDK 1.5.  I wonder how they will interact, when I happen
to compile in IDEA and try to run some tool from the command line.
</p>
</dd>
<dt><a name="2009-07-27">July 27, 2009</a></dt>
<dd>
<p>
Started down the path of composite visitors.  Wrote
<code>com.jeantessier.dependency.VisitorDecorator</code> to start composing visitors for
dependency graphs.
</p>
</dd>
<dt><a name="2009-07-24">July 24, 2009</a></dt>
<dd>
<p>
Fixed some tests.  Some of the Fit tests needed better explanations.  There was
one broken test in <code>com.jeantessier.classreader.TestXMLPrinter</code>.  This last one
was checked in broken, after I made a last minute change to the XML format.  I
need to be better disciplined at running all the tests before I check in code.
</p>
</dd>
<dt><a name="2009-07-23">July 23, 2009</a></dt>
<dd>
<p>
Fixed a typo in the web app's <code>style.css</code>.
</p>

<p>
Finished adding the label to the web app pages, complete with HttpUnit tests.
</p>
</dd>
<dt><a name="2009-07-22">July 22, 2009</a></dt>
<dd>
<p>
Adding a secondary title to the web app pages, called "label", and which can be
set from <code>load.jsp</code> or <code>extract.jsp</code>.  The goal is to let automated graph
updates tack a label to the current data set, such as a revision number or a
timestamp.  This lets users know which data their queries are running against.
</p>
</dd>
<dt><a name="2009-07-21">July 21, 2009</a></dt>
<dd>
<p>
Fixed <code>CodeDependencyCollector</code> to correctly track dependencies on classes and
enum values referenced in annotation values.
</p>

<p>
Found a bug: when <code>CodeDependencyCollector</code> visits the attributes of a class, it
attaches dependencies to the last method it visited instead of to the class
itself.  Luckily, there is a handy hook called
<code>VisitorBase.visitClassAnnotations()</code> that lets me intercept control and restore
the current node right after visiting fields and methods and before visiting the
annotations.
</p>
</dd>
<dt><a name="2009-07-15">July 15, 2009</a></dt>
<dd>
<p>
Spiked on printing the call graph for closures as a chain of calls instead of
a flat dependency graph.
</p>

<p>
Back on <a href="#2008-11-05">2008-11-05</a>, I troyed with the idea of using composition to deal with
sharing behavior in the <code>com.jeantessier.classreader.Visitor</code> hierarchy.  At the
time, I was thinking of wrapping a <code>TextPrinter</code> inside a <code>TraversalVisitor</code>,
where the outer visitor would be responsible for traversing the structure and
would call on the inner visitor for specific processing at each node.  This
created problems for <code>XMLPrinter</code> which needs to do both pre- and
post-processing on each node.
</p>

<p>
But what if the <code>Printer</code> was the outer visitor and the traversal was done by
the inner one?  Then, the printer would have free reign in doing all the
"around" work it wants.  It would call in to the inner visitor when it is ready
to traverse a nodes subsequent structure.  The inner visitor would still have to
call out to the outer one whenever it moves to a new node, though.  Reminds me
of cross recursion, somehow.
</p>

<p>
<img src="../images/Visitor_Cross_Composition.png" /><br />
</p>

<p>
The code for <code>visitMethod_info()</code> would look something like:
</p>

<pre>
    public abstract class <b>VisitorDecorator</b> implements Visitor {
        private Visitor delegate;
</pre>

<pre>
        public Visitor getDelegate() {
            return delegate;
        }
</pre>

<pre>
        public void setDelegate(Visitor delegate) {
            this.delegate = delegate;
        }
    }
</pre>

<pre>
    public class <b>TraversalVisitor</b> extends VisitorDecorator {
        public void <b>visitMethod_info</b>(Method_info method) {
            for(Attribute_info attribute : method.getAttributes()) {
                attribute.accept(<b>getDelegate()</b>);
            }
        }
    }
</pre>

<pre>
    public abstract class Printer extends <b>VisitorDecorator</b> {
        ...
    }
</pre>

<pre>
    public class <b>TextPrinter</b> extends Printer {
        public void <b>visitMethod_info</b>(Method_info method) {
            append("    ").append(method.getDeclaration()).append(";").eol();
            method.accept(<b>getDelegate()</b>);
        }
    }
</pre>

<pre>
    public class <b>XMLPrinter</b> extends Printer {
        public void <b>visitMethod_info</b>(Method_info method) {
            indent().append("&lt;method&gt;").eol();
            raiseIndent();
</pre>

<pre>
            indent().append("&lt;declaration&gt;").append(method.getDeclaration()).append("&lt;/declaration&gt;").eol();
</pre>

<pre>
            method.accept(<b>getDelegate()</b>);
</pre>

<pre>
            lowerIndent();
            indent().append("&lt;/method&gt;").eol();
        }
    }
</pre>

<p>
Notice how the printers call <code>method.accept(getDelegate())</code> to get further
processing of the current node.  The <code>TraversalVisitor</code> instead calls
<code>attribute.accept(getDelegate())</code>, moving the processing further along the
structure.
</p>

<p>
The flow of control would constantly pass back and forth between the two
visitors.  It all pretty much depends on which one starts the ball rolling.
</p>

<p>
The reason I'm revisiting this issue is because I find myself in need of a
<code>com.jeantessier.dependency.Visitor</code> that would traverse the graph depth-first
along <i>inbound</i> and <i>outbound</i> dimensions, instead of a the current shallow
traversal.
</p>

<p>
The code to use this would look like:
</p>

<pre>
    Printer printer = new TextPrinter(...);
    Visitor traversal = new TraversalVisitor(...);
</pre>

<pre>
    printer.setDelegate(traversal);
    traversal.setDelegate(printer);
</pre>

<pre>
    printer.traverseNodes(factory.getPackages().values());
</pre>

<p>
And I could use it to print transitive closures, based on the <i>start</i> criteria.
</p>
</dd>
<dt><a name="2009-07-14">July 14, 2009</a></dt>
<dd>
<p>
I have been running an experiment to launch Dependency Finder as an instance of
Jetty with the web app UI.  But Jetty seems flaky.  It runs fine at first, but
after a while, it starts throwing messages that can cannot find classes that
are obviously in the JAR.  I don't get it.  I've reverted to using Tomcat for
now.  I removed all the applications in its <code>webapps</code> folder and deployed
Dependency Finder as <code>ROOT</code> so I don't need a path element to access it.
</p>
</dd>
<dt><a name="2009-07-09">July 09, 2009</a></dt>
<dd>
<p>
Found another example of an annotation that takes array and class values even
closer to home in <code>org.junit.Test</code> and <code>org.junit.runners.Suite.SuiteClasses</code>.
And even better, <code>TestAll</code> has both of these, so all I need to do to find an
example is analyze <code>TestAll</code>.
</p>

<p>
I did a quick spike to try to track annotations as part of
<code>com.jeantessier.classreader.MetricsGatherer</code>.  Early results are promissing,
but this was just a spike so I will have to trown away that code and redo it
properly, test-first.
</p>
</dd>
<dt><a name="2009-07-08">July 08, 2009</a></dt>
<dd>
<p>
Found a nice example of an annotation that takes array and class values in
<code>org.testng.annotations.Test</code>.  Though, looking closer to home,
<code>java.lang.annotations.Retention</code> takes an <code>enum</code> value and
<code>java.lang.annotations.Target</code> takes an array of <code>enum</code> values.  I can play with
these manually to validate the XML format for annotation information.
</p>

<p>
Fixed XML rendering of <code>AnnotationDefault_attribute</code> to remove the extraneous
<code>&lt;element-value&gt;</code> node around the actual element value.
</p>
</dd>
<dt><a name="2009-07-07">July 07, 2009</a></dt>
<dd>
<p>
Played with filtering out files directly from <code>DependencyExtractor</code>.  I had
forgotten about <code>FileFilteringLoadListener</code> and
<code>ClassfileFilteringLoadListener</code>.  At first, I thought of using
<code>FileFilteringLoadListener</code> to short-circuit even the parsing of unwanted
<code>.class</code> files, but that didn't work.  It only filters the <code>beginFile()</code> and
<code>endFile()</code> events.  It does not remove any of the logic that happens between
them, nor any <code>beginClassfile()</code> and <code>endClassfile()</code> event.
</p>

<p>
At the very least, I need to augment the tests for <code>GroupFilteringLoadListener</code>
and <code>FileFilteringLoadListener</code> so they at least suppress all events with
matching group or file names respectively.  Not just their own <code>begin ... end</code>
events, but also those that happen in between.  After that, maybe I'll consider
turning the <code>begin</code> event into something closer to a <code>VetoableChangeListener</code>,
where I can suppress processing between match <code>begin</code> and <code>end</code> events based on
the handling of the <code>begin</code> event.
</p>

<p>
The javadocs for <code>LoadListener</code> and <code>LoadEvent</code> are dreadfully out of date.
</p>
</dd>
<dt><a name="2009-07-02">July 02, 2009</a></dt>
<dd>
<p>
Fixed <code>CodeDependencyCollector</code> to correctly track dependencies on annotations.
For now, it only captures dependencies on the annotation itself, not on any
element values that it might contain.  This will come next.
</p>

<p>
I implemented support for rendering elements of runtime annotations in
<code>XMLPrinter</code>.
</p>

<p>
I also modified <code>EnumElementValue.getTypeName()</code> and
<code>ClassElementValue.getClassInfo()</code> so they convert class names in path
notation to a proper class name.  Internally, these class names are stored as
UTF-8 strings, not <code>ClassInfo_attribute</code> structures, so these classes have to
take care of converting strings containing encoded class names such as
<code>"Lfoo/Bar;"</code> to proper class names such as <code>"foo.Bar"</code>.
</p>

<p>
<a target="_blank" href="http://docs.google.com/View?docid=dgzzp6gn_116ff9f3dcn">Jens Dietrich</a> uses
Dependency Finder in his <a target="_blank" href="http://code.google.com/p/gql4jung/">gpl4jung</a>
project.
</p>

<p>
Removed dependencies on <code>toString()</code> when getting the names of elements of
<code>Classfile</code>.  It is much better to be explicit about which piece of data is
needed rather than rely on what an object's string represenation is.  Also, it
is impossible to mock <code>toString()</code> using jMock.
</p>
</dd>
<dt><a name="2009-07-01">July 01, 2009</a></dt>
<dd>
<p>
Happy Canada Day!
</p>

<p>
Someone asked why Dependency Finder was not picking up dependencies on runtime
annotations.  The answer is simple: I haven't implemented that part of Java 1.5
support yet.  The code is there to read in annotations from the <code>.class</code> file
and include them in the <code>Classfile</code> structure, but I don't do anything with it
just yet.
</p>

<p>
I implemented support for rendering runtime annotations in <code>XMLPrinter</code>.  It's
a start.  I didn't get around to handling all the different types of element
values, though.
</p>
</dd>
<dt><a name="2009-06-29">June 29, 2009</a></dt>
<dd>
<p>
Tweaked the CSS used when converting dependency graphs to HTML (with XSLT).
</p>
</dd>
<dt><a name="2009-06-25">June 25, 2009</a></dt>
<dd>
<p>
Verified site ownership with
<a target="_blank" href="http://google.com/webmasters/">Google Webmaster Tools</a> by adding a meta tag
on the site's home page.
</p>
</dd>
<dt><a name="2009-06-23">June 23, 2009</a></dt>
<dd>
<p>
Found out about the
<a target="_blank" href="http://code.google.com/apis/visualization/">Google Visualization API</a>.
</p>
</dd>
<dt><a name="2009-06-15">June 15, 2009</a></dt>
<dd>
<p>
Changed <code>Classfile</code> to track methods with a simple <code>Collection</code> instead of a
<code>Map</code>.  This way, bridge methods don't trample each other.  But I use a
<code>LinkedList</code> internally, so methods are no longer sorted by signature.  All the
tests are passing for now, but suspect it will impact the logic in <code>OOMetrics</code>
and/or <code>JarJarDiff</code>.
</p>

<p>
I also tried to resurrect the WebWork web app, with limited success.  I want to
move it squarely into Struts2 instead of clinging to WebWork 2.2.6.
</p>
</dd>
<dt><a name="2009-06-11">June 11, 2009</a></dt>
<dd>
<p>
One user asked:
</p>

<pre>
    i have a project P that contains in some package Z a class C.
    I want to know all of C's dependencies....
</pre>

<p>
If all you want is C's direct dependencies, you can get them from analyzing the
compiled code in <code>C.class</code>.  If you want the transitive closure, you sill need
to analyze all the classes along the way too.  You can point Dependency Finder
to a folder and it will scan it and all its subfolders for possible Java code,
be it in JAR files, zip files, or loose <code>.class</code> files.
</p>

<p>
Here is how you would do it using the CLI.  Start by extracting all dependencies
for project P and saving them in <code>df.xml</code>.  You can add third party JARs to the
command if you want to drill into their dependencies too.
</p>

<pre>
    % cd [to P's output directory]
    % DependencyExtractor -xml -out df.xml . [add third party JARs too]
</pre>

<p>
Then, reduce all the dependencies in <code>df.xml</code> to class-to-class dependencies and
save them to <code>c2c.df.xml</code>.
</p>

<pre>
    % c2c -xml -out c2c.df.xml df.xml
</pre>

<p>
Now, use <code>DependencyClosure</code> to list the first and second degree dependencies
from <code>Z.C</code> in the graph in <code>c2c.df.xml</code>.  "Inbounds" are classes that depend on
<code>Z.C</code> whereas "outbounds" are classes that <code>Z.C</code> depends upon.
</p>

<pre>
    % DependencyClosure c2c.df.xml -class-start-includes /Z.C/ -maximum-inbound-depth 0 -maximum-outbound-depth 1
    % DependencyClosure c2c.df.xml -class-start-includes /Z.C/ -maximum-inbound-depth 0 -maximum-outbound-depth 2
</pre>

<p>
If you want to use the GUI instead, use the "Closure" tab and the
<code>File&nbsp;&gt;&gt;&nbsp;Closure</code> menu command.  First, use
<code>File&nbsp;&gt;&gt;&nbsp;Extract</code> to extract dependencies for project P.  Then
select the "Closure" tab.  In the "Select programming elements" group of
controls, check "classes" and put <code>/Z.C/</code> in the "including" box.  In the "Show
dependencies (stop for closure), select "classes" but leave the textboxes empty.
Set "Follow inbounds" to 0 and set "Follow outbounds" to 1 to first degree or 2
for second degree dependencies.  Click <code>File&nbsp;&gt;&gt;&nbsp;Closure</code> and
see the results in the large results area.
</p>
</dd>
<dt><a name="2009-06-05">June 05, 2009</a></dt>
<dd>
<p>
Looking at <a target="_blank" href="https://javacc.dev.java.net/">JavaCC</a> as a potential help in
parsing <code>Signature_attribute</code> values.  While looking for possible books on
JavaCC, I stumbled upon
<a target="_blank" href="http://www.amazon.com/Decompiling-Java-Godfrey-Nolan/dp/1590592654/ref<code>sr<i>1</i>7?ie</code>UTF8&s<code>books&qid</code>1244247160&sr=8-7">Decompiling Java</a>
quite by accident.  It came out in 2008, so it might even be up-to-date, but the
reviews give me pause.
</p>
</dd>
<dt><a name="2009-06-04">June 04, 2009</a></dt>
<dd>
<p>
Reading up on <a target="_blank" href="http://code.google.com/p/google-guice/">Guice 2.0</a>.
</p>

<p>
Wrapping my head around signatures.  I based <code>SignatureHelper</code> on
<code>DescriptorHelper</code>, but that may not be enough.  The strucure of signagtures is
much more complex and has a recursive nature.  I may need a number of classes to
handle all the production rules in the JVM specification section 4.4.4.
</p>
</dd>
<dt><a name="2009-06-03">June 03, 2009</a></dt>
<dd>
<p>
A colleague pointed me to <a target="_blank" href="http://code.google.com/p/google-depan/">DepAn</a>,
another dependency analysis tool for Java.  It seems to be built on the Eclipse
platform and uses ASM for decompiling Java bytecode.  It is distributed as a
binary for the Linux platform.  It won't work on my Mac and I couldn't get it
to start on my Linux box either.
</p>

<p>
Looking into running DependencyFinder on
<a target="_blank" href="http://code.google.com/appengine/">Google App Engine</a> or
<a target="_blank" href="http://amazon.com/ec2">Amazon EC2</a>.  Users would have to upload their JAR
files to the server, though.
</p>
</dd>
<dt><a name="2009-05-27">May 27, 2009</a></dt>
<dd>
<p>
Found a misnamed method.  <code>VisitorBase.visitClassfile<i>Annotations</i>()</code> should
have been called <code>VisitorBase.visitClassfile<i>Attributes</i>()</code>.
</p>

<p>
Worked on <code>Method_info.getSignature()</code> to use the generic signature of a
<code>Signature_attribute</code> when it is available.  In the process, I realized that I
never finished <code>SignatureHelper</code>.
</p>
</dd>
<dt><a name="2009-05-26">May 26, 2009</a></dt>
<dd>
<p>
Found out about <a target="_blank" href="http://crap4j.org">Crap4J</a>, but I'm having a hard time fine
tuning the sample <code>build.xml</code> file so I can run it on Dependency Finder.  I
should add it to the Resources page.
</p>

<p>
I want to redo <code>ClassList</code> to simply use a <code>LoadListener</code> to collect class names
as they are being read in.  Coupled with a lightweight <code>Classfile</code>, it would
reduce its memory footprint.  Right now, it uses an <code>AggregatingClassfileLoader</code>
and parses an entire JAR completely before simply writing out class names.  This
is a waste of time and memory and it hurts when dealing with really large JAR
files.
</p>
</dd>
<dt><a name="2009-05-18">May 18, 2009</a></dt>
<dd>
<p>
Someone found a typo in the documentation: <code>-csv</code> was written <code>-c<i>vs</i></code>.  It's
all fixed, now.
</p>

<p>
I fixed <code>com.jeantessier.metrics.MetricsGatherer</code> to use
<code>Classfile.isSynthetic()</code> to determine if a class is synthetic or not.  It used
to look onl for the presence of a <code>Synthetic_attribute</code>, but in Java 1.5 the
synthetic property can be set in the <code>ACCESS_LEVEL</code> field of the <code>.class</code> file.
I will need to fix it for methods and fields too.
</p>

<p>
The deprecation level is computed the same way, by looking for the
<code>Deprecated_attribute</code>.  But in Java 1.5, it can also be set via an annotation.
This will require more work.
</p>
</dd>
<dt><a name="2009-05-13">May 13, 2009</a></dt>
<dd>
<p>
Refactored <code>CodeDependencyCollector.visitClassfile()</code> so it calls
<code>super.visitClassfile(classfile)</code> to traverse the parts of the <code>Classfile</code>
instead of doing it explicitly.  This means that it will now visit the
attributes of the <code>Classfile</code> in addition to its fields and methods.  For now,
<code>CodeDependencyFinder</code> ignores the attributes that can be attached to a file,
but I'm tempted to collect dependencies from attributes such as:
</p>

<ul>
<li><code>EnclosingMethod_attribute</code></li>
<li><code>InnerClasses_attribute</code></li>
<li><code>Signature_attribute</code></li>
</ul>

<p>
<code>EnclosingMethod_attribute</code> is particularily interesting because it would be
the first time we have an explicit dependency going from a class to a feature.
</p>

<p>
I also noticed that <code>com.jeantessier.metrics.MetricsGatherer</code> only looks for a
class' <code>Synthetic_attribute</code> and does not look at the class' <code>ACCESS_FLAG</code>.  I
need to fix this so it calls <code>Classfile.isSynthetic()</code> instead.  The same
probably goes for other visitors and for other properties of things with
attributes.
</p>

<p>
I have been doing a lot of thinking about large projects that run out of memory
to hold the dependency graph.  In one case, I have a very large JAR file with
all the project classes in it and even if I give <code>DependencyExtractor</code> over
1.5GB of memory, it still runs out.  I could add scoping to the extractor, but
this feels like piling too many responsabilities on one tool, espcially when it
is already the purview of <code>DependencyReporter</code>.  I could partition the graph
across many machines.  I can already merge graphs, so the client could ask all
partitions (in parallel) and merge the results together.  But now I'm facing
the problem of how to partition the graph and how to prevent parsing the
<code>.class</code> files multiple times.  I am exploring the possibility of having
lightweight implementations of <code>Classfile</code> and its constituents to help with
deciding how to partition the graph, and how this plays with the notions of
<i>group</i> and <i>file</i> in a loading session.
</p>
</dd>
<dt><a name="2009-05-11">May 11, 2009</a></dt>
<dd>
<p>
I've been thinking about how to deal with very large projects that Dependency
Finder cannot fit into memory.  I could partition the dependency graph between
multiple servers, query them in parallel, and merge the results together.  I
already have the merge logic.  Next, I need a way to partition the graph
efficiently.
</p>

<p>
I could do preprocessing of the codebase to determine the partitions
automatically.  I could use a variation on LCOM4 for this.  Well, not really
LCOM4, but more of a general graph partitioning algorithm.  I could generate a
directed package-to-package graph with a weight on each edge that tells how many
classes are involved in that edge.  Then, I do a normal graph partitioning but I
only consider edges with weight greater than <i>N</i>.  By varying <i>N</i>, I can find
the optimal partitions, including which packages are in each one.
</p>

<p>
To do the preprocessing, I could simply have a <code>DependencyListener</code> listen in
and tally the dependencies.  But <code>CodeDependencyCollector</code>, which triggers the
listeners, is way too tightly coupled to <code>NodeFactory</code>.  I would like to run
<code>CodeDependencyCollector</code> without a <code>NodeFactory</code> so it would only generate
<code>DependencyEvent</code> messages, and those would have enough information to
distinguish between different kinds of dependencies.  I could use some kind of
non-caching <code>NodeFactory</code>, or rather have some other class create the
dependencies so I can have a very lightweight graph in the factory while I just
tally information about the dependencies but not the dependencies themselves for
this specific analysis.
</p>

<p>
See also
<a target="_blank" href="http://www.cs.sunysb.edu/~algorith/files/graph-partition.shtml">graph partition algorithms</a>
at <a target="_blank" href="http://www.cs.sunysb.edu/~algorith/">The Stony Brook Algoritm Repository</a>.
</p>
</dd>
<dt><a name="2009-05-05">May 05, 2009</a></dt>
<dd>
<p>
Fixed <code>com.jeantessier.classreader.TextPrinter</code> so it does not put a ";" after
a class' static initialization block.
</p>
</dd>
<dt><a name="2009-05-04">May 04, 2009</a></dt>
<dd>
<p>
Fixed
<a target="_blank" href="https://sourceforge.net/tracker2/index.php?func=detail&aid=2663753&group_id=43305&atid=435884">bug 2663753</a>
which deals with the signature for a class' static initializer.
</p>

<p>
I wrote a test (using JUnit 4) which exposed that <code>Feature_info.getName()</code> and
<code>Feature_info.getSignature()</code> were calling <code>UTF8_info.toString()</code> instead of
<code>UTF8_info.getValue()</code>, which tripped the mocks created by jMock.  It also
forced me to change the signature of the <code>Feature_info</code> constructor to depend
on <code>DataInput</code>, an interface, instead of <code>DataInputStream</code>, a concrete class.
</p>

<p>
Because the new test is a JUnit 4 test, I switched all <code>TestAll</code> suites to use
the JUnit 4 mechanism for constructing suites.  It lets me compose suites from
JUnit 3 and JUnit 4 suites and test, all mixed and matched.  I was bring back
<code>com.jeantessier.metrics.TestMetricsGatherer</code> into a single test target for all
tests.  The Fit tests are still in JUnit 3 suites.  I will need to take a good
look at them to upgrade them too, but I am too tired for this right now.
</p>
</dd>
<dt><a name="2009-04-17">April 17, 2009</a></dt>
<dd>
<p>
Finally got around to fixing
<a target="_blank" href="https://sourceforge.net/tracker2/index.php?func=detail&aid=2663688&group_id=43305&atid=435884">bug 2663688</a>
where <code>com.jeantessier.classreader.TextPrinter</code> might encounter a null
<code>Code_attribute</code> on abstract or native methods.
</p>
</dd>
<dt><a name="2009-03-31">March 31, 2009</a></dt>
<dd>
<p>
Tried to get a simple example of
<a target="_blank" href="http://code.google.com/p/google-guice/">Guice</a> working with
<a target="_blank" href="http://struts.apache.org/2.x/">Struts2</a> in Tomcat, but no matter what I
tried, I couldn't get it to work. It's like it cannot find my bindings, for
some reason.  I would really love to use Guice and WebWork (now Struts2) in the
webapp.
</p>
</dd>
<dt><a name="2009-03-19">March 19, 2009</a></dt>
<dd>
<p>
Got a presentation on <a target="_blank" href="http://findbugs.sourceforge.net/">FindBugs</a> by
<a target="_blank" href="http://www.cs.umd.edu/~pugh/">Bill Pugh</a>, the author himself.  It is a
really cool tool that uses bytecode analysis, just like Dependency Finder, but
in a much more targeted way to find patterns in the code that are likely to be
bugs.
</p>
</dd>
<dt><a name="2009-03-11">March 11, 2009</a></dt>
<dd>
<p>
Refactored the way <code>APIDifferenceStrategy</code> collects field names and method
signatures.  I extracted a method that takes a function object, a poor cousin
to blocks in Ruby.  At first, I used an inner interface inside
<code>APIDifferenceStrategy</code> and anonymous inner classes at the call sites.  But
then I thought I might reuse it elsewhere, so I pulled everything out as
stand-alone classes in <code>com.jeantessier.classreader</code>: interface <code>FeatureMapper</code>
and implementations <code>NameMapper</code> and <code>SignatureMapper</code>.  Don't confuse them
with <code>PackageMapper</code> which is completely different.
</p>
</dd>
<dt><a name="2009-03-10">March 10, 2009</a></dt>
<dd>
<p>
Considering moving the behavior from <code>CodeDifferenceStrategy.isCodeDifferent()</code>
to <code>Code_attribute.equals()</code> instead.  This way, if I introduce a Null Object
pattern for <code>Code_attribute</code>, I can make sure that nothing equals the null
object.  And the code in <code>CodeDifferenceStrategy</code> would become a simple:
</p>

<pre>
    public boolean isCodeDifferent(Code_attribute oldCode, Code_attribute newCode) {
        return oldCode.equals(newCode);
    }
</pre>

<p>
This code assumes that <code>oldCode</code> is not null, or you'd get a
<code>NullPointerException</code>.  I checked all the call sites for <code>isCodeDifferent()</code>
and they all verify that neither <code>oldCode</code> nor <code>newCode</code> is null, so this new
version should be perfectly safe.
</p>
</dd>
<dt><a name="2009-03-09">March 09, 2009</a></dt>
<dd>
<p>
Tried to replace <code>MockDifferenceStrategy</code> with jMock, but some of the tests are
too involved with real <code>Classfile</code> instances to make it practical.  I will need
to rewrite those tests to use mock <code>Classfile</code> and associated structures
instead, which will take some time.
</p>
</dd>
<dt><a name="2009-03-06">March 06, 2009</a></dt>
<dd>
<p>
Minor changes to phrasing in the Tools page.
</p>

<p>
Added a link to Pivotal Tracker for Dependency Finder as one of the menu items
on the site's left-hand panel.  I also tried to make the "Download" like more
proeminent by using a &lt;strong&gt; tag (I wanted to use &lt;b&gt; but IntelliJ
IDEA complained that it was deprecated and suggested &lt;strong&gt; instead),
but the effect may be too light still.
</p>
</dd>
<dt><a name="2009-03-04">March 04, 2009</a></dt>
<dd>
<p>
I made the <a target="_blank" href="http://www.pivotaltracker.com/projects/9399">Pivotal Tracker</a>
project public so everyone can see how it's doing.
</p>

<p>
Also, today, I found a
<a target="_blank" href="https://sourceforge.net/tracker2/index.php?func=detail&aid=2663688&group_id=43305&atid=435884">bug</a>
in <code>ClassReader</code>.  In text mode, when it encounters an abstract method, it
would throw a <code>NullPointerException</code>.  The code in =TextPrinter] blindly calls
<code>entry.getCode().accept(this)</code> without checking that <code>getCode()</code> returned
something.  I could use the Null Object pattern, but I'll have to check
everywhere I call <code>getCode()</code> first.
</p>
</dd>
<dt><a name="2009-03-02">March 02, 2009</a></dt>
<dd>
<p>
Playing with <a target="_blank" href="http://jetty.mortbay.org/jetty/">Jetty</a>, I managed to make it
serve a complete web app straight from the WAR file.  This simple program takes
a port number as the first parameter and a WAR file as the second.
</p>

<pre>
    public static void main(String[] args) throws Exception {
        Server server = new Server(Integer.getValue(args[0]));
</pre>

<pre>
        WebAppContext webapp = new WebAppContext();
        webapp.setContextPath("/");
        webapp.setWar(args[1]);
</pre>

<pre>
        server.setHandler(webapp);
</pre>

<pre>
        server.start();
        server.join();
    }
</pre>

<p>
For now, the web app takes its configuration from the <code>web.xml</code> file that is
burried in the WAR file.  I'll have to figure out a way to pass in the values
for the <code>source</code> and <code>file</code> context parameters.
</p>
</dd>
<dt><a name="2009-02-24">February 24, 2009</a></dt>
<dd>
<p>
Created a project on <a target="_blank" href="http://www.pivotaltracker.com/">Pivotal Tracker</a> to try
and manage my effort on Dependency Finder.  I know a few people at
<a target="_blank" href="http://pivotallabs.com/">Pivotal Labs</a> and they introduced me to Tracker a
few years ago.  It's a pretty cool tool, but I'm not sure how useful it will be
on a single-person project with a very irregular schedule.
</p>
</dd>
<dt><a name="2009-02-19">February 19, 2009</a></dt>
<dd>
<p>
I am toying with the idea of using <a target="_blank" href="http://jetty.mortbay.org/jetty/">Jetty</a>.
With it, I could embed a webserver in the application instead of using Swing.
This way, I can provide the user experience entirely from the web application
instead of maintaining a separate Swing version.
</p>

<p>
Documentation on configuring Jetty with an existing web application is sketchy
at best.  I was hoping for a simple, fool-proof recipe, but it looks like I
might have to do actual work to get this to work.
</p>

<p>
Reading a little more about this, it looks like Jetty already ships as part of
<a target="_blank" href="http://www.opensymphony.com/webwork/">WebWork</a>.  WebWork's
<a target="_blank" href="http://www.opensymphony.com/webwork/wikidocs/QuickStart.html">QuickStart</a>
uses Jetty to provide a quick starting point for development.  This QuickStart
may not be the best approach for deploying an application, though.
</p>
</dd>
<dt><a name="2009-02-13">February 13, 2009</a></dt>
<dd>
<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>IntelliJ IDEA</td>
        <td>:</td>
        <td>8.0.1</td>
        <td>-></td>
        <td>8.1</td>
    </tr>
</table>
</blockquote>
</dd>
<dt><a name="2009-01-26">January 26, 2009</a></dt>
<dd>
<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>JUnit</td>
        <td>:</td>
        <td>4.4</td>
        <td>-></td>
        <td>4.5</td>
    </tr>
</table>
</blockquote>

<p>
I still haven't started converting all the test cases to JUnit 4.
</p>
 </dd>
<dt><a name="2009-01-23">January 23, 2009</a></dt>
<dd>
<p>
Fixed targets in <code>build.tomcat.xml</code> that were not getting the right paths
because they were not depending on the <code>init</code> target.
</p>
</dd>
<dt><a name="2009-01-14">January 14, 2009</a></dt>
<dd>
<p>
Found a minor bug with <code>ClassReader</code> where it does not reset the internal
counter it uses to print a constant pool in text mode.  If I ask it to print
two classes, the indices of the second class pick up where the first one left
off.
</p>

<p>
I tried to write an integration test first, but there is so much indirection
involved between <code>TextVisitor</code> and <code>Classfile</code> that it would have required quite
a bit of setup and would have ended up fairy brittle.  So I settled for a small
unit test of <code>VisitorBase.visitConstantPool()</code> instead.
</p>

<p>
Fixed a constant duplication in <code>data2atom.cgi</code> where it was referencing
<code>Journal.cgi</code> directly instead of the more generic <code>$DOCUMENT.cgi</code>.
</p>
</dd>
<dt><a name="2009-01-08">January 08, 2009</a></dt>
<dd>
<p>
Updated the copyright notice to 2009.
</p>
</dd>
<dt><a name="2008-12-02">December 02, 2008</a></dt>
<dd>
<p>
Better escaping of &amp; in Atom feed.  Fixed some broken entity references in
the Journal.
</p>
</dd>
<dt><a name="2008-12-01">December 01, 2008</a></dt>
<dd>
<p>
Looked at generating an Atom feed based on the Journal.  In the process of
turning <code>data2html.cgi</code> into an Atom generator, I found a bug in <code>data2html.cgi</code>
when generating links to dated entries.
</p>
</dd>
<dt><a name="2008-11-27">November 27, 2008</a></dt>
<dd>
<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>IntelliJ IDEA</td>
        <td>:</td>
        <td>8.0</td>
        <td>-></td>
        <td>8.0.1</td>
    </tr>
</table>
</blockquote>

<p>
Added <code>CodeFinder</code> to replace the explicit iteration in <code>Method_info.getCode()</code>.
</p>
</dd>
<dt><a name="2008-11-26">November 26, 2008</a></dt>
<dd>
<p>
Cleaned up how <code>XMPrinter</code> deals with instructions that have a value embedded in
them, such as <code>bipush</code> and <code>iconst_1</code>.  Also made it show the destination
address of <code>goto</code> and jump instructions.
</p>

<p>
Augmented <code>TextPrinter</code> so it also shows the bytecode, similar to what
<code>javap -c</code> does, including the exception handling.
</p>

<p>
As I was looking at coverage reports to make sure I covered all the cases in
printing instructions, I was reminded that some <code>ExceptionHandler</code> structures do
not have a catch type, meaning they trap everything and apparently that is the
bytecode presentation of <code>finally</code> blocks.
</p>

<p>
I also realized that I was reading offset values for <code>goto</code> and branch
instructions as unsigned values, when they are actually signed.  The same goes
for embedded values in <code>bipush</code> and <code>sipush</code> instructions.
</p>
</dd>
<dt><a name="2008-11-25">November 25, 2008</a></dt>
<dd>
<p>
Fixed the use of <code>id</code> attributes in <code>classfile.dtd</code> to use <code>index</code> instead.  The
attribute <code>id</code> has special meaning in XML.
</p>

<p>
I realized that local variables can be active for only a portion of a method's
execution and that the VM can reuse positions in the local variable table for
different variables whose scope does not overlap.  That significantly
complicated <code>LocalVariableFinder</code>.  It had to take into account the position of
the instructions trying to locate a local variable and what local variables are
active at that position in the code.  To complicate matters further,
instructions that set local variables, such as <code>istore</code>, are such that the
variable does not really exist at that instruction position but starts
immediately after.  Couple that with the <code>wide</code> instruction and things get
pretty nasty pretty quickly.
</p>

<p>
Minor refactoring.
</p>
</dd>
<dt><a name="2008-11-24">November 24, 2008</a></dt>
<dd>
<p>
Added <code>Instruction.getIndexedLocalVariable()</code>, <code>Instruction.getOffset()</code>, and
<code>Instruction.getValue()</code> to help with text rendering of instructions.  Used them
to make traces in <code>Code_attribute</code> and instruction data from <code>XMLPrinter</code> more
useful.
</p>

<p>
Simplified <code>Instruction</code> tests by using jMock and putting many of the tests
methods in one test class.
</p>

<p>
Bad news for Dependency Finder: I just got Tomb Raider: Underworld!  >:-)
</p>
</dd>
<dt><a name="2008-11-20">November 20, 2008</a></dt>
<dd>
<p>
Wrote <code>LocalVariableFinder</code> to help find the <code>LocalVariable</code> of a
<code>Code_attribute</code> from its index in an <code>Instruction</code>.
</p>

<p>
Removed <code>getCode()</code> from the <code>Instruction</code> interface.  The implementation can
still hold on to the <code>Code_attribute</code>, but that's an implementation detail, and
does not need to be part of the exposed interface.
</p>
</dd>
<dt><a name="2008-11-19">November 19, 2008</a></dt>
<dd>
<p>
Modified journal entries to turn dates into hyperlinks.
</p>

<p>
Extracted the implicit index from instructions <code><i>x</i>load_<i>&lt;i&gt;</i></code> and
<code><i>x</i>store_<i>&lt;i&gt;</i></code> to be the value of <code><i>&lt;i&gt;</i></code>.  Those values point
to entries in the local variable array of the current frame.  I could use them
to provide better text rendering of instructions by naming the variable (when
there is a <code>LocalVariableTable</code> present in the <code>Code_attribute</code>).
</p>
</dd>
<dt><a name="2008-11-18">November 18, 2008</a></dt>
<dd>
<p>
Modified <code>data2html.cgi</code> to render dates as URLs to the corresponding journal
entry.
</p>
</dd>
<dt><a name="2008-11-14">November 14, 2008</a></dt>
<dd>
<p>
Simplified <code>build.test.xml</code> by grouping all JUnit tests under one target.  With
<code>junit-4.4.jar</code> in <code>$HOME/.ant/lib</code>, it can run JUnit 4 tests too.
<code>com.jeantessier.metrics.TestMetricsGatherer</code> is a JUnit 4 test and it cannot
run as part of a JUnit 3 test suite.
</p>
</dd>
<dt><a name="2008-11-13">November 13, 2008</a></dt>
<dd>
<p>
Back on <a href="#2008-11-03">2008-11-03</a>, I simplified some constructors at the cost of less
useful debug traces.  I was looking at traces from <code>ClassMetrics</code> to see how
Dependency Finder was dealing with annotations in the wild and I realized that
echoing only constant pool indices is not very helpful.  I really need to
look up those values in the constant pool and include them in the trace
message.
</p>

<p>
Found a bug!  It turns out that the constructor for <code>AnnotationElementValue</code>
was not passing the <code>ConstantPool</code> to its <code>Annotation</code>.  Now that the
constructor for <code>Annotation</code> calls <code>getType()</code> for its debug trace, it forces
a constant pool look up, which exposed the problem.  Hurray for tests!
</p>

<p>
Since Java 1.2, you can deprecate a programming element with the javadoc tag
<code>@deprecated</code>.  It adds a <code>Deprecated</code> attribute to the programming element.
Since Java 1.5, you can deprecate a programming element with the runtime
annotation <code>@Deprecated</code>.  I wrote a special <code>Visitor</code>, named
<code>DeprecationDetector</code>, that traverses the <code>Classfile</code> structure looking for
either one.  I will use it to rewrite <code>Deprecatable.isDeprecated()</code> in
<code>Classfile</code> and <code>Feature_info</code>.  This is part of a larger effort to reduce
dependencies by parts of the <code>Classfile</code> structure upon their containing
structures.
</p>

<p>
As I was working on <code>DeprecationDetector</code>, I realized that <code>Annotation</code> did not
expose its <code>type</code> property through its interface.  It is odd that I did not
notice it earlier.  And, I must admit, a bit scary.  What else might I have
missed?
</p>

<p>
As I was trying <code>ClassReader -xml</code>, I realized that the elements of the constant
pool have an attribute <code>id</code> that gives their position in the pool.  This is
unfortunate since <code>id</code> has a very specific meaning in XML.  I should definitely
think of changing it to something more like <code>index</code>.
</p>
</dd>
<dt><a name="2008-11-11">November 11, 2008</a></dt>
<dd>
<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>IntelliJ IDEA</td>
        <td>:</td>
        <td>8.0 Milestone 1</td>
        <td>-></td>
        <td>8.0</td>
    </tr>
</table>
</blockquote>
</dd>
<dt><a name="2008-11-05">November 05, 2008</a></dt>
<dd>
<p>
Added visitor hooks for the substructures in <code>*Annotations_attribute</code>.
</p>

<p>
I've been thinking to move the <code>com.jeantessier.classreader.Visitor</code> hierarchy
to use more composition.  I could have one class handle traversal of the
<code>Classfile</code> structure and delegate processing to another class that would just
focus on what needs to be done.
</p>

<p>
<img src="../images/Visitor_Composition.gif" /><br />
</p>

<p>
For instance, the <code>visitMethod_info()</code> methods would look like:
</p>

<pre>
    public class <b>VisitorDecorator</b> implements Visitor {
        public void <b>visitMethod_info</b>(Method_info method) {
            delegate.visitMethod_info(method);
        }
    }
</pre>

<pre>
    public class <b>TraversalVisitor</b> extends VisitorDecorator {
        public void <b>visitMethod_info</b>(Method_info method) {
            super.visitMethod_info(method);
            for(Attribute_info attribute : method.getAttributes()) {
                attribute.accept(this);
            }
        }
    }
</pre>

<pre>
    public class <b>TextPrinter</b> extends Printer {
        public void <b>visitMethod_info</b>(Method_info method) {
            append("    ").append(method.getDeclaration()).append(";").eol();
        }
    }
</pre>

<p>
But it does not work for <code>XmlPrinter</code>, which must generate output both before
and after processing the method's attributes.
</p>

<pre>
    public class <b>XmlPrinter</b> extends Printer {
        public void <b>visitMethod_info</b>(Method_info method) {
            append("    &lt;method&gt;").eol();
            append("        &lt;declaration&gt;").append(method.getDeclaration()).append("&lt;/declaration&gt;").eol();
            // Attributes go here, somehow
            append("    &lt;/method&gt;").eol();
        }
    }
</pre>

<p>
I could have hooks for pre- and post-traversal, but that's what led to all the
complexity in <code>com.jeantessier.dependency.VisitorBase</code>.  So, I'm going to stick
with the inheritance-based design:
</p>

<p>
<img src="../images/Visitor_Inheritance.gif" /><br />
</p>

<p>
Now, the code looks like this:
</p>

<pre>
    public class <b>VisitorBase</b> implements Visitor {
        public void <b>visitMethod_info</b>(Method_info method) {
            for(Attribute_info attribute : method.getAttributes()) {
                attribute.accept(this);
            }
        }
    }
</pre>

<pre>
    public class <b>TextPrinter</b> extends Printer {
        public void <b>visitMethod_info</b>(Method_info method) {
            append("    ").append(method.getDeclaration()).append(";").eol();
            super.visitMethod_info(method);
        }
    }
</pre>

<p>
and for <code>XmlPrinter</code>:
</p>

<pre>
    public class <b>XmlPrinter</b> extends Printer {
        public void <b>visitMethod_info</b>(Method_info method) {
            append("    &lt;method&gt;").eol();
            append("        &lt;declaration&gt;").append(method.getDeclaration()).append("&lt;/declaration&gt;").eol();
            super.visitMethod_info(method);
            append("    &lt;/method&gt;").eol();
        }
    }
</pre>

<p>
Maybe I should revisit <code>com.jeantessier.dependency.VisitorBase</code>, now.
</p>
</dd>
<dt><a name="2008-11-04">November 04, 2008</a></dt>
<dd>
<p>
Fixed a problem with <a target="_blank" href="http://www.jetbrains.com/idea/">IntelliJ IDEA</a>.  I am
using version 8.0M1 on a MacBook Pro.  My laptop wouldn't wake up after going
to sleep yesterday, so I had to do a hard reboot.  After that, IntelliJ
wouldn't recompile my classes.  It kept clearing the <code>classes</code> directory and
then couldn't find classes to run the tests.  I completely erased
<code>~/Library/Caches/IntelliJIDEA80</code> and restarted IntelliJ and that seemed to do
the trick.
</p>

<p>
Added tests for <code>Custom_attribute</code>.
</p>

<p>
Added visitor hooks for <code>*Annotations_attribute</code> and
<code>AnnotationDefault_attribute</code>, but I did not get to their substructures, yet.
</p>
</dd>
<dt><a name="2008-11-03">November 03, 2008</a></dt>
<dd>
<p>
Removed <code>ConstantPool</code> from the public interface of <code>*Annotations_attribute</code>
components.  The fact that some of them hold on to the constant pool and do
lookup at runtime is an implementation detail.
</p>

<p>
Fixed <code>Parameter</code> so it actually reads its annotations from the byte stream.  I
also simplified its interface to remove the back reference to
<code>RuntimeParameterAnnotations_attribute</code>.
</p>

<p>
Added <code>getAttributeName()</code> to all attributes.  I had to simplify some of the
constructors that were echoing the data as they read it in order to keep the
tests simple.
</p>

<ul>
<li><code>ConstantValue_attribute</code></li>
<li><code>EnclosingMethod_attribute</code></li>
<li><code>Signature_attribute</code></li>
<li><code>SourceFile_attribute</code></li>
</ul>

<p>
But after trying it out on some sample code, I realized that it
hampers usability, so I will have to put them back in.  I also removed
dependence on the behavior of <code>toString()</code> in a few places.
</p>

<p>
Addded <code>AnnotationDefault_attribute</code>.
</p>
</dd>
<dt><a name="2008-11-02">November 02, 2008</a></dt>
<dd>
<p>
Exclude abstract base classes for test classes from Ant target to run all
tests.
</p>
</dd>
<dt><a name="2008-10-31">October 31, 2008</a></dt>
<dd>
<p>
More support for annotations.
</p>

<p>
Removed the back-reference from <code>Annotation</code> back to its containing
<code>RuntimeAnnotations_attribute</code> because it did not make sense in the case of an
annotation as an element value.
</p>

<p>
Rigged <code>ElementValueFactory</code> the same way I did for <code>AttributeFactory</code>.
</p>

<p>
I realized that most attributes hold on to a reference to the <code>Classfile</code> only
so that they can get the <code>ConstantPool</code> from it.  So I changed the code to
inject the <code>ConstantPool</code> directly instead of the <code>Classfile</code>.  This
refactoring touched 84 files.
</p>
</dd>
<dt><a name="2008-10-30">October 30, 2008</a></dt>
<dd>
<p>
More support for annotations.
</p>

<p>
I've built support for some of the annotation attributes and pretty much all
types of element value.  Now, I need to figure out how to instantiate element
values based on the tag in the byte stream.  Once I have that, I will be able
to finish <code>ArrayElementValue</code> and write <code>ElementValuePair</code> so I can then
finish <code>Annotation</code>.  Then, I will have to rig it all up into
<code>com.jeantessier.classreader.Visitor</code>.
</p>

<p>
Added some tests for some structures that were not covered before:
</p>

<ul>
<li><code>InterfaceMethodRef_info</code></li>
<li><code>Deprecated_attribute</code></li>
<li><code>Synthetic_attribute</code></li>
<li><code>SourceDebugExtenstion_attribute</code></li>
</ul>

<p>
<a target="_blank" href="http://jmock.org/">jMock</a> is really helping create a stage where I can
exercise the classes very easily.
</p>
</dd>
<dt><a name="2008-10-29">October 29, 2008</a></dt>
<dd>
<p>
More support for annotations.  The way the class hierarchy in
<code>com.jeantessier.classreader.impl</code> shadows the interface hierarchy in
<code>com.jeantessier.classreader</code> is very tricky.
</p>
</dd>
<dt><a name="2008-10-28">October 28, 2008</a></dt>
<dd>
<p>
Started writing support for annotations, TDD-style.  I found a cool way to use
jMock to mock the input stream from which data structures are read.  This way,
I don't have to create an arbitrary bytestream, all I have to do is mock the
calls to <code>readInt()</code> and so forth on the data stream.
</p>

<p>
While I was trying to mock a <code>DataInputStream</code>, in which all methods are
<code>final</code>, I found out about the <code>DataInput</code> interface, which is much better
(and I can mock it, no problems).
</p>
</dd>
<dt><a name="2008-10-24">October 24, 2008</a></dt>
<dd>
<p>
Paired with Nicolas Wettstein to add filtering capability for <code>LoadEvent</code>
listeners.  It was nice to pair program with someone on Dependency Finder for a
change.
</p>

<p>
The hierarchy looks like this:
</p>

<p>
<img src="../images/FilteringLoadListenerHierarchy.gif" /><br />
</p>

<p>
This will help with filtering certain classes based on regular expressions.
The filters extend the decorator so they can be composed with other
<code>LoadListener</code> implementations, such as <code>LoadListenerVisitorAdaptor</code>, for
example.
</p>
</dd>
<dt><a name="2008-10-23">October 23, 2008</a></dt>
<dd>
<p>
Removed redundant field <code>com.jeantessier.metrics.MetricsGatherer.projectName</code>
and associated getter and constructor parameter.  The <code>MetricsFactory</code> inside
<code>MetricsGatherer</code> already has the project name.  Nobody was using this field on
<code>MetricsGatherer</code>.
</p>
</dd>
<dt><a name="2008-10-18">October 18, 2008</a></dt>
<dd>
<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>Testability-Explorer</td>
        <td>:</td>
        <td>1.10RC1-r34</td>
        <td>-></td>
        <td>1.2.0-r85</td>
    </tr>
</table>
</blockquote>

<p>
I have to rewrite the <code>&lt;testability&gt;</code> tasks in
<code>build.testability-explorer.xml</code> to bring it in line with their latest Ant
task.
</p>
</dd>
<dt><a name="2008-10-10">October 10, 2008</a></dt>
<dd>
<p>
Worked on logging from the webapp.  I instrumented <code>extract.jsp</code> and <code>load.jsp</code>
to log progress both to Log4J and to the servlet container logs.  But maybe
this logs too much data, so I will not submit this change just yet.
</p>
</dd>
<dt><a name="2008-10-08">October 08, 2008</a></dt>
<dd>
<p>
Cleaned up the command-line validation in Fit tests.
</p>

<p>
I was hesitating between <code>check</code> and <code>reject</code> and <code>ensure</code> rows, but I came up
with a system.  I use <code>ensure</code> rows to show good, valid command-lines and
<code>reject</code> to show broken command-lines.  I ended up using <code>check</code> for switches
<code>-echo</code>, <code>-help</code>, and <code>-version</code> because while they are allowed command-lines,
they do not lead to running the application but short-circuit it instead.
</p>

<p>
I've been having trouble with <code>OOMetrics</code> lately.  When I use the <code>-csv</code> switch
and save the output with the <code>-out</code> switch, the value of the <code>-out</code> switch is
taken as the prefix for the multiple output files, one for each of project,
group, class, and method metrics.  Since the output stream is opened by the
<code>Command</code> superclass, it doesn't know that it has a special meaning in
<code>OOMetrics</code> and creates a file named after the prefix during application
startup.  But that file is never used and ends up being empty.
</p>

<p>
I encapsulated <code>Command.out</code> behind a getter and a setter so I can do lazy
initialization on it.  This way, since <code>OOMetrics</code> never calls
<code>Command.getOut()</code>, the empty file is never created.
</p>

<p>
Amended the tech docs to add Google Docs to the list of possible consumers for
CSV files.
</p>
</dd>
<dt><a name="2008-10-03">October 03, 2008</a></dt>
<dd>
<p>
Found a way to update the project website on SourceForge.  I cannot SSH into
SourceForge anymore, but I could upload files with SFTP.  This is annoying.  I
was used to updating the project webpage direcly from Subversion.  I remember a
long time ago when I had it as a cron job that ran automatically at 3am.  Now,
I need to maintain a client and then upload files to the site.  Some of the
documentation on SourceForge about the new tools for administrators hint at a
new cron-like service, so maybe there is still hope.
</p>
</dd>
<dt><a name="2008-09-18">September 18, 2008</a></dt>
<dd>
<p>
Added JarJarDiff report for jMock to the Samples area of the website.
</p>
</dd>
<dt><a name="2008-09-17">September 17, 2008</a></dt>
<dd>
<p>
Released version 1.2.1-beta1.  It's been long overdue and I had to update the
instructions on making a release.
</p>
</dd>
<dt><a name="2008-09-15">September 15, 2008</a></dt>
<dd>
<p>
A user contacted me asking how to collect the transitive closure of classes
from some starting point so they could build a single JAR file with only what's
needed.  Here's my recipe.
</p>

<p>
Suppose you want to package the tools for the CLI together with all the classes
they require, but no other.  First, get the total dependency graph for all the
JAR files in <code>lib/</code> and save the graph somewhere convinient:
</p>

<pre>
    <code>DependencyExtractor -xml -out dependencies.xml <b>lib</b></code>
</pre>

<p>
Next, compute the outbound transitive closure from the
<code>com.jeantessier.dependencyfinder.cli</code> package:
</p>

<pre>
    <code>DependencyClosure -xml -out closure.xml -start-includes <b>/cli/</b> dependencies.xml</code>
</pre>

<p>
Next, reduce the closure to classes only, eliminating <code>java.*</code> and
pseudo-classes like array types.  This step also removes the dependencies,
since we don't really need them anymore.
</p>

<pre>
    <code>c2c -scope-excludes /^java/ -scope-excludes /\\[\\]/ -filter-excludes // closure.xml -xml -out closure.c2c.xml</code>
</pre>

<p>
Finally, extract the class names from the output from the previous command.
</p>

<pre>
    <code>DependencyGraphToFullyQualifiedNames -in closure.c2c.xml -out <b>classes.txt</b></code>
</pre>

<p>
Replace <code>lib</code> with your own JARs, and <code>/cli/</code> with your own starting point, and
you should be well on your way.
</p>

<p>
Bear in mind the
<a target="_blank" href="http://depfind.sourceforge.net/Manual.html#TrickyBehavior">tricky behavior</a>
around computing closures.  So you might want to reduce the dependency graph to
class-to-class dependencies before you compute the closure.
</p>
</dd>
<dt><a name="2008-09-10">September 10, 2008</a></dt>
<dd>
<p>
Used the new <a target="_blank" href="http://www.jmock.org/scripting.html">jMock scripting feature</a>
for custom actions in <code>TestCodeDependencyCollectorUsingMocks</code>.
</p>

<p>
Added named anchors to the entries in the Journal so I can create hyperlinks to
specific entries.
</p>
</dd>
<dt><a name="2008-09-09">September 09, 2008</a></dt>
<dd>
<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>jMock</td>
        <td>:</td>
        <td>2.4.0</td>
        <td>-></td>
        <td>2.5.1</td>
    </tr>
</table>
</blockquote>

<p>
jMock's <code>a()</code> matcher is now deprecated, so I used <code>any()</code> instead.
</p>
</dd>
<dt><a name="2008-09-02">September 02, 2008</a></dt>
<dd>
<p>
Spiked to try out SLOC2, based on the minimum and maximum line numbers in a
method and in a class.  Runnning it on Dependency Finder, it yields extimates
that are about 60% higher than SLOC.  This is due in part to blank lines and
comments, which it counts.  Interestingly, it finds nothing for interfaces and
abstract methods.
</p>

<p>
In the process, I got the idea to split the different concerns in
<code>StatisticalMeasurement</code>: collecting a bunch of values and running statistical
analysis on those values.  To compute SLOC2, I needed a collection measurement
where I could collect the different line numbers and get the minimum and
maximum values.  I used a <code>SumMeasurement</code> to compute <i>max - min + 1</i>.  With
separate measurements for collecting values and doing statistics, it would make
the metrics config even more complex, so it may not be a win for the user.
</p>
</dd>
<dt><a name="2008-08-27">August 27, 2008</a></dt>
<dd>
<p>
I was using <code>ListDiff</code> and <code>ListDiffToHTML</code> for diff'ing lists of symbols when
I noticed <code>ListDiffToHTML.xsl</code> and <code>ListDiffToText.xsl</code> have template text made
explicitly for diff'ing published documentation lists.  I will have to move
that text to another name and make these templates more generic.
</p>

<p>
I also have problems, under Linux, passing multi-word project names into
<code>ListDiff</code>.  Somewhere between all the shell script invocations, I lose the
fact that more than one word makes a switch value and the tool ends up only
using the first word in the name.  I have the same problem with the other tools
that take an arbitrary project name, such as <code>OOMetrics</code>.
</p>
</dd>
<dt><a name="2008-08-26">August 26, 2008</a></dt>
<dd>
<p>
Fixed tech docs for <code>OOMetrics</code>.
</p>
</dd>
<dt><a name="2008-08-22">August 22, 2008</a></dt>
<dd>
<p>
Looked into the possibility of estimating SLOC by looking at the minimum and
maximum values in <code>LineNumberTable_attribute</code> instances in a given class.  One
problem I have, and this is true for the current SLOC calculation too, is that
fields that are initialized in initialization blocks (including constructors)
are counted twice.  Also, looking at overall mininum line number versus maximum
line number takes into account vertical space as well and comments.
</p>
</dd>
<dt><a name="2008-08-17">August 17, 2008</a></dt>
<dd>
<p>
Spiked to adjust <code>CodeDependencyCollector</code> to filter parents in the dependency
graph too.  If a parent does not match the filter criteria, it is not included
in the graph.  I'm not sure this is the right thing to do.  What triggered the
spike is that the tests around the filtering in <code>CodeDependencyCollector</code> were
broken when I started extracting inheritance information.  The dependency on
the parent gets filtered correctly, but there is still an empty node for the
parent.  I could leave it there to preserve the parent-child relationships or I
could leave it out because the filter expresses an intent to ignore it.
</p>
</dd>
<dt><a name="2008-08-15">August 15, 2008</a></dt>
<dd>
<p>
Fixed <code>ListDiff</code> so the <code>-old-label</code> switch defaults to the value of the <code>-old</code>
switch, the way it does for <code>JarJarDiff</code>.  And the same for <code>-new-label</code> and
<code>-new</code>.  Added tests for the Ant task versions of <code>ListDiff</code> and <code>JarJarDiff</code>
</p>

<p>
Refactored the changes to the CLI version of <code>JarJarDiff</code> by pulling them up to
the base class <code>DiffCommand</code> so they can be shared with <code>ClassClassDiff</code>.
</p>

<p>
Fixed tech docs accordingly.
</p>
</dd>
<dt><a name="2008-08-13">August 13, 2008</a></dt>
<dd>
<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>IntelliJ IDEA</td>
        <td>:</td>
        <td>7.0.3</td>
        <td>-></td>
        <td>8.0 Milestone 1</td>
    </tr>
</table>
</blockquote>

<p>
Added tests to <code>CodeDependencyCollector</code> to capture that exception handling
generates a feature-to-class dependency.
</p>

<p>
For a moment, I had the crazy idea that I could use raw class-to-class
dependencies instead of storing inheritance information seperately in the
dependency graph.  By <i>inheritance</i>, I mean both generalization (<code>extends</code>) and
realization (<code>implements</code>).  But that is not going to work because there could
be other reasons besides inheritance to have class-to-class dependencies, such
as collapsing the graph with <code>DependencyReporter -c2c</code>.
</p>
</dd>
<dt><a name="2008-08-12">August 12, 2008</a></dt>
<dd>
<p>
Changed <code>FeatureResolver</code> so it is no longer limited to unconfirmed features
but handles all overwritten features.
</p>
</dd>
<dt><a name="2008-08-11">August 11, 2008</a></dt>
<dd>
<p>
First pass at <code>FeatureResolver</code>.  Added functionality to <code>ClassNode</code> and
<code>FeatureNode</code> to navigate the inheritance hierarchy to resolve feature names.
</p>

<p>
Fixed a typo in the Fit tests for <code>LinkMaximizer</code> and <code>LinkMinimizer</code>, but
checked them in the same commit as the <code>FeatureResolver</code> work by accident.  Oh!
and I had the wrong commit message for that, to make matters worse.
</p>
</dd>
<dt><a name="2008-08-10">August 10, 2008</a></dt>
<dd>
<p>
Added Fit tests for <code>LinkMaximizer</code> and <code>LinkMinimizer</code>.  This is in
preparation to writing a <code>Visitor</code> that attempts to resolve <i>unconfirmed</i> nodes
in the dependency graph by walking the inheritance hierarchy.
</p>
</dd>
<dt><a name="2008-08-08">August 08, 2008</a></dt>
<dd>
<p>
Store class hierarchy information in the dependency graph as part of
<code>CodeDependencyCollector</code>.
</p>
</dd>
<dt><a name="2008-08-07">August 07, 2008</a></dt>
<dd>
<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>Log4J</td>
        <td>:</td>
        <td>1.2.14</td>
        <td>-></td>
        <td>1.2.15</td>
    </tr>
</table>
</blockquote>
</dd>
<dt><a name="2008-08-06">August 06, 2008</a></dt>
<dd>
<p>
Extracted the regular expression parsing logic out of
<code>RegularExpressionSelectionCriteria</code> and put it in its own class,
<code>RegularExpresisonParser</code>, so I can reuse it the Ant version of <code>ListSymbols</code>.
</p>

<p>
Added <code>FilteringSymbolGatheringStrategy</code> to the Ant task version of
<code>ListSymbols</code>.
</p>
</dd>
<dt><a name="2008-08-05">August 05, 2008</a></dt>
<dd>
<p>
More clamping down on non-private fields, this time in <code>MetricsReport</code>.
</p>

<p>
Fixed some broken URLs for images in the Journal.
</p>

<p>
Still can't update the website because SourceForge's Shell service still cannot
talk to the Subversion service.  Grrr!
</p>
</dd>
<dt><a name="2008-08-04">August 04, 2008</a></dt>
<dd>
<p>
Fixed <code>TestSymbolGathererStrategyDecorator</code> so it tests the right class, and
not one of its descendants.
</p>

<p>
The fields of <code>MaximumCapacityPatternCache</code> were package-level instead of being
private for some reason.  I suspect that a manual refactoring was the cause.  I
made them private and neither the compiler nor the tests complained about it.
</p>

<p>
Finished <code>FilteringSymbolGathererStrategy</code>, including tests, and used it in the
CLI version of <code>ListSymbols</code>.
</p>

<p>
Normalized the names of tests for <code>SymbolGathererStrategy</code> implementations.
</p>

<p>
Clamped down on non-private fields, mostly in test classes.  I used the new
functionality in <code>ListSymbols</code>.
</p>

<pre>
    $ ant -f build.test.xml compile
    ...
    $ bin/ListSymbols -non-private-field-names classes
    ...
</pre>

<p>
There were a few in test code, mostly oversights from promoting local variables
to fields manually.  There are still a few public fields in the code to support
Fit test.
</p>
</dd>
<dt><a name="2008-08-01">August 01, 2008</a></dt>
<dd>
<p>
Updated documentation for the <code>ListSymbols</code> Ant task.
</p>

<p>
Added <code>FilteringSymbolgathererStrategy</code> to support inclusion and exclusion
regular expressions to <code>ListSymbols</code>.
</p>
</dd>
<dt><a name="2008-07-31">July 31, 2008</a></dt>
<dd>
<p>
Documented the new switches to <code>ListSymbols</code> on the the Tools page.
</p>

<p>
Fixed tests broken by new switches to <code>ListSymbols</code>.
</p>

<p>
Streamlined the building of <code>CLASSPATH</code> in <code>junit</code> and <code>textjunit</code> launcher
scripts under Unix.
</p>

<p>
Switched <code>textjunit</code> to use the normal JUnit 4.4 test runner instead of the old
<code>junit.textui.TestRunner</code>.
</p>

<p>
I noticed that the graphical UI launched by <code>junit</code> is now broken.  It has most
likely been broken since I switched to the JUnit 4.4 binaries back on
<a href="#2008-06-09">2008-06-09</a> but I had not noticed.  I might get rid of the graphical
launcher altogether if I cannot find a suitable replacement to
<code>junit.swingui.TestRunner</code>.
</p>

<p>
Brought the <code>ListSymbols</code> Ant task to feature parity with its CLI version.
</p>

<p>
Started to create tests for the Ant version of <code>ListSymbols</code>, but the Ant code
is not very testable.  The Ant tasks have many trivial accessors that I do not
want to waste time testing.  The interesting business logic is embeded in the
<code>execute()</code> method and I have to pull it out before I can write tests against
it.
</p>

<p>
The project's website is in SourceForge's Subversion repository and I update it
from SourceForge's Shell service.  I noticed today that the Shell service
couldn't talk to the Subversion service for some reason.  Someone else is
having the same problem, so at least it's not just me.  Apparently, SourceForge
is in the process of moving its infrastructure, so maybe it's related somehow.
</p>
</dd>
<dt><a name="2008-07-28">July 28, 2008</a></dt>
<dd>
<p>
Worked with the CLI <code>ListSymbols</code> to list final methods and classes.  I use
this to locate areas in the code that need special attention.  I spent some
time around <code>InnerClass</code> to categorize types of inner classes: member classes,
anonymous inner classes, local classes.  I still have to update the Ant task
and update the documentation.
</p>

<p>
Found interesting desriptions of the various
<a target="_blank" href="http://www.developer.com/java/other/article.php/3085271">types of inner classes</a>
on Gamelan.
</p>
</dd>
<dt><a name="2008-07-23">July 23, 2008</a></dt>
<dd>
<p>
Back from a lengthy vacation break.
</p>

<p>
Found and fixed a bug in <code>load.jsp</code> where it was setting the load timestamp and
duration in the application context using one name and reading it back using
another name.  A reminder of the dangers of using explicit strings to save and
lookup values.
</p>
</dd>
<dt><a name="2008-07-02">July 02, 2008</a></dt>
<dd>
<p>
Fixed a bunch of URLs in the Journal.
</p>
</dd>
<dt><a name="2008-07-01">July 01, 2008</a></dt>
<dd>
<p>
Cleaned up straggling <code>-all</code> switches in sample code in the documentation.
</p>

<p>
Fixed some of the tools so they can read from standard input:
</p>

<ul>
<li><code>c2c</code></li>
<li><code>c2p</code></li>
<li><code>ClassCohesion</code></li>
<li><code>DependencyClosure</code></li>
<li><code>DependencyCycles</code></li>
<li><code>DependencyMetrics</code></li>
<li><code>DependencyReporter</code></li>
<li><code>f2f</code></li>
<li><code>p2p</code></li>
</ul>

<p>
This way, I can chain them on a command-line so the output of one becomes the
input of the next one, just like typical Unix tools.
</p>

<p>
Found a bug with <code>com.jeantessier.metrics.MetricsGatherer</code> where it is not
accounting for final classes correctly.  Filed it as
<a target="_blank" href="http://sourceforge.net/tracker/index.php?func=detail&aid=2008537&group_id=43305&atid=435884">bug 2008537</a>
Fixed it and added more tests.
</p>

<p>
While I was testing <code>MetricsGatherer</code>, I noticed some measurements are being
gathered both at the project and at the group level separately.  I wanted to
remove the duplication because I could compute the one at the project level
from submetrics at the group level.  This would work as long as groups matched
packages exactly.  But it would breakdown if someone used group specifications
to add groups besides packages.  This is why there is this duplication.
</p>
</dd>
<dt><a name="2008-06-30">June 30, 2008</a></dt>
<dd>
<p>
Added a CLI tool for computing class cohesion as per the LCOM4 metric.  The
current output is still a work in progress.  It will need to ignore unconfirmed
classes and possibly sort the output by LCOM4 value, both ascending and
descending.
</p>
</dd>
<dt><a name="2008-06-27">June 27, 2008</a></dt>
<dd>
<p>
Fixed <code>LCOM4Gatherer</code> so it ignores constructors, as per LCOM4.  I used
<code>Perl5Util</code> to match the feature name to a pattern, but I'm debating using
<code>java.util.regex</code> instead.
</p>

<p>
Code with <code>Perl5Util</code>:
</p>

<pre>
    private static final Perl5Util perl = new Perl5Util();
    &nbsp;
    private boolean isConstructor(FeatureNode node) {
        return perl.match("/(\\w+)\\.\\1\\(/", node.getName());
    }
</pre>

<p>
Code with <code>java.util.regex</code>:
</p>

<pre>
    private static final Pattern CONSTRUCTOR_PATTERN = Pattern.compile("(\\w+)\\.\\1\\(");
    &nbsp;
    private boolean isConstructor(FeatureNode node) {
        return CONSTRUCTOR_PATTERN.matcher(node.getName()).find();
    }
</pre>

<p>
For this check, I find the <code>Perl5Util</code> code easier to work with, and I already
use <code>Perl5Util</code> everywhere.  But I feel <code>java.util.regex</code> might actually be
more efficient by using a native implementation in the JVM itself.
</p>

<p>
Maybe this logic belongs in <code>FeatureNode</code> instead of being replicated in a lot
of places.  I guess I answered my own question.
</p>

<p>
Changed the signature of <code>TraversalStrategy.order()</code> so it returns the exact
same type that was passed in, using generics.
</p>
</dd>
<dt><a name="2008-06-26">June 26, 2008</a></dt>
<dd>
<p>
Found a better way to test for components from <code>LCOM4Gatherer</code> that is not
order-sensitive.  Right now, the components are stored in a <code>HashSet</code>, so the
iteration order during tests would change depending on the implementation of
<code>HashSet</code>.  The previous checks in the tests were assuming a specific order, so
the tests were brittle.
</p>
</dd>
<dt><a name="2008-06-25">June 25, 2008</a></dt>
<dd>
<p>
First attempt at computing LCOM4 from the dependency graph.  Right now, the
data structure to store components of a class is simply
<code>Collection&lt;Collection&lt;FeatureNode&gt;&gt;</code> as I don't really have any
metadata that is not represented just as well by <code>Collection</code>.
</p>
</dd>
<dt><a name="2008-06-20">June 20, 2008</a></dt>
<dd>
<p>
Added support for inheritance data in the dependency graph.  <code>ClassNode</code> will
point to its parents (classes and interfaces) and children.  Other tools will
be able to use this information to navigate the inheritance tree when trying
to resolve dependencies.
</p>
</dd>
<dt><a name="2008-06-19">June 19, 2008</a></dt>
<dd>
<p>
Looked at capturing class hierarchy information in the dependency graph as part
of <code>CodeDependencyCollector</code>.  It needs to keep track of the superclass as well
as interfaces the class implements, but maybe it does not need to distinguish
between the two.
</p>
</dd>
<dt><a name="2008-06-18">June 18, 2008</a></dt>
<dd>
<p>
Found a problem with my list of non-final fields and the methods that depend on
them.  A field may be protected and used by a subclass, but Dependency Finder
will not flag it.
</p>

<p>
For example:
</p>

<pre>
    public class Superclass {
        protected int count;
    }
</pre>

<pre>
    public class Derived extends Superclass {
        public void increment() {
            count++;
        }
    }
</pre>

<p>
yields this dependency graph:
</p>

<pre>
    &nbsp;
        Derived
            --&gt; Superclass
            Derived()
                --&gt; Superclass.Superclass()
            count *
                &lt;-- Derived.increment()
            increment()
                --&gt; Derived.count *
        Superclass
            &lt;-- Derived
            --&gt; java.lang.Object *
            Superclass()
                &lt;-- Derived.Derived()
                --&gt; java.lang.Object.Object() *
            count
</pre>

<p>
Here, <code>Superclass.count</code> is clearly a non-private field.  But
<code>Derived.increment()</code> depends on <code>Derived.count</code>, not <code>Superclass.count</code>.  The
dependency graph does not contain information about the class hierarchy, so
there is no way to discover that <code>Derived.count</code> is really <code>Superclass.count</code>.
</p>
</dd>
<dt><a name="2008-06-16">June 16, 2008</a></dt>
<dd>
<p>
Refactored <code>SymbolGatherer</code> to use a Strategy pattern when deciding which
symbols to gather or not.  I want to write a custom strategy for collecting
non-private fields, which I couldn't do with the code before I extracted the
decision-making process into another object.  I'm debating if <code>SymbolGatherer</code>
shouldn't use a collection of strategies instead, collecting symbols that
match at least one strategy.
</p>

<p>
Created a custom <code>SymbolGathererStrategy</code> for detecting non-private,
non-static, non-synthetic fields.
</p>

<p>
Added <code>&lt;synthetic&gt;</code> tags to fields, methods, and inner classes in the XML
representation of <code>Classfile</code>.
</p>

<p>
Refactored <code>com.jeantessier.commandline.TestAliasSwitch</code> and
<code>com.jeantessier.classreader.TestVisitorBase</code> to use jMock instead of custom
mocks.  I was able to get 100% code coverage for
<code>com.jeantessier.classreader.VisitorBase</code>.  I was also able to get rid
of <code>com.jeantessier.commandline.MockVisitor</code>.
</p>

<p>
With this in place, I was able to used Dependency Finder on another project to
find dependencies on non-private fields.
</p>

<pre>
    $ DependencyExtractor -xml -out df.xml [JARs ...]
    $ ListSymbols -non-private-field-names -out names.txt [JARs ...]
    $ DependencyReporter -scope-includes-list names.txt -class-filter -show-inbounds -show-empty-nodes df.xml
</pre>

<p>
I could then use these results to track where one class acceses the fields of
another class and replace them with accessors.
</p>
 </dd>
<dt><a name="2008-06-12">June 12, 2008</a></dt>
<dd>
<p>
Wrote an Ant build file for running
<a target="_blank" href="http://testabilityexplorer.org/">Testability Explorer</a> against Dependency
Finder.  I know the guys who work on it and it has some interesting ideas
about testability behind it.  I might start publishing its report along-side
the coverage reports with the next release of Dependency Finder.
</p>
</dd>
<dt><a name="2008-06-09">June 09, 2008</a></dt>
<dd>
<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>JUnit</td>
        <td>:</td>
        <td>3.8.2</td>
        <td>-></td>
        <td>4.4</td>
    </tr>
</table>
</blockquote>

<p>
I haven't changed any of the test classes yet.  I just ugrapded the JAR file
that I use in compilation.  Everything should still work with older versions of
JUnit, except <code>junit.bat</code> and <code>textjunit.bat</code> which refer to the JAR file by
name explicitly.
</p>
</dd>
<dt><a name="2008-06-06">June 06, 2008</a></dt>
<dd>
<p>
Found a way to run my tests with JUnit 4.4 from the command-line.  I found
[[http://www.devx.com/Java/Article/31983/0/page/3][this article on JUnit4] on
the web and modified <code>textjunit</code> accordingly, and it worked just fine.
Essentially, it is this command-line:
</p>

<pre>
    java org.junit.runner.JUnitCore $*
</pre>

<p>
With a <code>CLASSPATH</code> that has all the right JARs on it.
</p>
</dd>
<dt><a name="2008-06-04">June 04, 2008</a></dt>
<dd>
<p>
Tried to compile and run the tests with JDK 1.6.  Some of the tests fail
because of the new attribute <code>StackMapTable</code>, but other tests in
<code>com.jeantessier.diff</code> were also failing.  It turns out that
<code>APIDifferenceStrategy</code> uses <code>HashMap</code> internally to accumulate symbols when
looking for differences.  The iteration order is different between JDK 1.5 and
JDK 1.6, which results in the strategy using different code paths to decide
that two classes are different.  This throws off <code>MockDifferenceStrategy</code> and
therefore breaks the test.  <code>APIDifferenceStrategy</code> could use a <code>TreeMap</code>
instead, which would guarantee the iteration order.  While I'm at it, I should
probably re-write those tests to use jMock instead of a hand-rolled mock and
data read from disk.
</p>
</dd>
<dt><a name="2008-05-30">May 30, 2008</a></dt>
<dd>
<p>
Replaced the explicit name of CLI commands, set in the constructor, with a call
to <code>Class.getSimpleName()</code>.  This allowed me to get rid of all constructors
across the entire <code>Command</code> hierarchy.  For some obscure reason,
<code>Commnad.Command(name)</code> declared throwing a <code>CommandLineException</code>, but none of
the constructors did anything other than set the command's name.  It must have
been some leftover from ancient times.  I removed cruft, yeah!
</p>
</dd>
<dt><a name="2008-05-28">May 28, 2008</a></dt>
<dd>
<p>
Extracted the default indent text of "&nbsp;&nbsp;&nbsp;&nbsp;" (four spaces)
to constants on the various <code>Printer</code> classes.  I can now use these constants
to set the default value for all the <code>-indent-text</code> switches.
</p>
</dd>
<dt><a name="2008-05-02">May 02, 2008</a></dt>
<dd>
<p>
Wrote a better attempt at distinguishing inner classes of the current class
from mere references to inner classes of other classes.  Wrote more tests for
inner classes.
</p>
</dd>
<dt><a name="2008-04-29">April 29, 2008</a></dt>
<dd>
<p>
In an effort to better understand the <code>InnerClass</code> structure in <code>.class</code> files,
I wrote a quick XSL transform that extract just their content from the XML
output of <code>ClassReader</code>.  It's still a mess, though.
</p>
</dd>
<dt><a name="2008-04-28">April 28, 2008</a></dt>
<dd>
<p>
More test for <code>MetricsGatherer</code> using jMock in
<code>TestMetricsGathererAccumulators</code>, trying to cover <code>InnerClass</code>.  But the logic
surrounding <code>InnerClasses</code> attributes and their <code>InnerClass</code> structure is
pretty convoluted.  Each inner class has seems to have an <code>InnerClass</code>
structure referencing itself.  In <code>enum</code> members, they also seem to reference
the first value in the <code>enum</code>.  Then, the enclosing class has an <code>InnerClass</code>
structure for each inner class in contains.  It is proving difficult to
understand what I am looking at when processing an arbitrary <code>InnerClass</code>
structure.
</p>
</dd>
<dt><a name="2008-04-27">April 27, 2008</a></dt>
<dd>
<p>
More test for <code>MetricsGatherer</code> using jMock in
<code>TestMetricsGathererAccumulators</code>, covering <code>Synthetic_attribute</code> on classes
and <code>Deprecated_attribute</code> on classes, fields, and methods.
</p>
</dd>
<dt><a name="2008-04-26">April 26, 2008</a></dt>
<dd>
<p>
Started rewriting <code>TestMetricsGathererAccumulators</code> using jMock.  I got through
dealing with fields and most aspects of methods, so far.
</p>
</dd>
<dt><a name="2008-04-25">April 25, 2008</a></dt>
<dd>
<p>
Started modifying <code>MetricsGatherer</code> in a test-driven way.  I will need to use
jMock if I want to get through this one.  I started with some precompiled
classes, but there is just too much noise.  Plus, the ones I have so far don't
exercise some of the corner cases that interest me.
</p>
</dd>
<dt><a name="2008-04-24">April 24, 2008</a></dt>
<dd>
<p>
Looked at a subset of metrics to compare how many <code>final</code> elements are in a
given codebase.  I will need to list elements (fields, methods, etc.) in order
to make sense of it all.  Right now, <code>MetricsGatherer</code> simply keeps counters
for all of these measurements and simply increments them by 1 as it traverses
the code.  I will need to change <code>MetricsGatherer</code> to send the name along to
the measurements so I can start using <code>NameListMeasurement</code> to get a list of
element names.
</p>
</dd>
<dt><a name="2008-04-18">April 18, 2008</a></dt>
<dd>
<p>
I had to change my SourceForge password because I had forgotten it.  A little
while ago, my password expired on SourceForge and I had to pick a new one.  Now,
it's been a few weeks since I last used it and I couldn't recall what it was.
So I changed it again to something new.  Hopefully, I will remember it this
time.
</p>
</dd>
<dt><a name="2008-04-17">April 17, 2008</a></dt>
<dd>
<p>
Figured out how to log from JSPs with Log4J while limiting the log contents to
only the JSP code, not all of Dependency Finder.  My conversion patterns in
<code>log4j.properties</code> have "%c{2}", limiting class names to their last two
components.  This was keeping me from seeing the fully qualified class names for
the generated JSP classes, and therefore I couldn't define loggers with the
right filtering level.  I took out the "{2}" momentarily, long enough to see
the full package name (<code>org.apache.jsp</code>), and put it back along with a new
logger definition.
</p>
</dd>
<dt><a name="2008-04-16">April 16, 2008</a></dt>
<dd>
<p>
Played with better logging in the webapp.  Right now, the application does not
log anything.  I cannot get any usage statistics from Tomcat's logs, since they
are essentially empty.  In a JSP, I can use <code>applicationContext.log()</code>, but it
writes no information about the context of the call.  Each page would have to
identify itself in the message it's trying to log.  I tried to use Log4J
instead, but I'm struggling with how to specify a package that only gets the
JSPs and not all of Dependency Finder.
</p>
</dd>
<dt><a name="2008-04-10">April 10, 2008</a></dt>
<dd>
<p>
Updated documentation for <code>OOMetricsGUI</code> to account for new
<code>-enable-cross-class-measurements</code> switch.
</p>
</dd>
<dt><a name="2008-04-08">April 08, 2008</a></dt>
<dd>
<p>
Modified <code>OOMetricsGUI</code> so it can use a <code>TransientClassfileLoader</code> to process
large code bases that don't all fit in memory.  This is to bring it to feature
parity with the CLI equivalent.
</p>
</dd>
<dt><a name="2008-04-04">April 04, 2008</a></dt>
<dd>
<p>
Modified the Ant task for <code>OOMetrics</code> so it can use a <code>TransientClassfileLoader</code>
to process large code bases that don't all fit in memory.  This is to bring it
to feature parity with the CLI equivalent.
</p>
</dd>
<dt><a name="2008-04-03">April 03, 2008</a></dt>
<dd>
<p>
Modified the CLI <code>OOMetrics</code> so it can use a <code>TransientClassfileLoader</code> to
process large code bases that don't all fit in memory.
</p>
</dd>
<dt><a name="2008-03-26">March 26, 2008</a></dt>
<dd>
<p>
Fixed the Fit test for <code>ClassFinder</code>.  A colleague suggested that rather than
getting Fit to parse four spaces as four spaces for the expected value, I try
rewriting the actual value in the fixture instead.  Now it works fine, even if
it is kind of an ugly hack.  At first, I tried to have the replacement text as
"<code>&lt;em&gt;four spaces&lt;/em&gt;</code>" so that it would render in the Fit HTML
page as "<code><i>four spaces</i></code>".  But that didn't work on MacOS for some reason.  So
I switched to the less pretty but also less controversial
"<code>****four spaces****</code>" instead.
</p>
</dd>
<dt><a name="2008-03-24">March 24, 2008</a></dt>
<dd>
<p>
Fixed some Fit tests that were missing the <code>fit.Summary</code> at the end.
</p>

<p>
Looked further into why Fit ignores a cell with only spaces in it.  This is
causing the Fit tests for <code>ClassFinder</code> to fail because the <code>-indent-text</code>
switch has <code>"    "</code> (four spaces) as its default value and Fit keeps thinking
the expected cell value is the empty string.  It turns out that somewhere deep
inside Fit, it decides to use a <code>ResultValueAdapterByStringCompare</code> for this
column (<code>getDefaultValue()</code> returns <code>Object</code>), and it uses <code>fit.Parse.text()</code>
to parse the table cell, and <code>text()</code> calls <code>String.trim()</code> before returning
its value.  Darn it!  Now, I'll have to find a way to supply a custom
<code>ValueAdapter</code> instead that knows how to keep a cell value as explicit spaces.
</p>

<p>
Simplified <code>CommandFixture.switches()</code>.  It does not need to wrap its return
value in an <code>ArrayFixture</code>, FitLibrary will take care of it for you.
</p>
</dd>
<dt><a name="2008-03-20">March 20, 2008</a></dt>
<dd>
<p>
Added <code>-compact</code> and <code>-indent-text</code> switches to <code>ClassFinder</code>.  <code>-indent-text</code>
has four spaces as its default value, and it's throwing off the Fit test.
</p>

<p>
Changed <code>ClassMatcher</code> so that it uses the group information from the
<code>endClassfile</code> event instead of relying on the group stack maintained by
<code>LoadListenerBase</code>.
</p>

<p>
Back on <a href="#2006-03-13">2006-03-13</a>, I had put up "Related links" banners powered by Google
to some of the pages.  They stopped working a while back and they were only
showing an empty box.  But today, I noticed that they started saying "Error".
So I took them down.
</p>
</dd>
<dt><a name="2008-03-12">March 12, 2008</a></dt>
<dd>
<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>IntelliJ IDEA</td>
        <td>:</td>
        <td>7.0.2</td>
        <td>-></td>
        <td>7.0.3</td>
    </tr>
</table>
</blockquote>
</dd>
<dt><a name="2008-03-05">March 05, 2008</a></dt>
<dd>
<p>
There are only a few dependencies from <code>com.jeantessier.classreader</code> to
<code>com.jeantessier.classreader.impl</code>:
</p>

<pre>
    com.jeantessier.classreader
        AggregatingClassfileLoader
            AggregatingClassfileLoader()
                --> com.jeantessier.classreader.impl.DefaultClassfileFactory.DefaultClassfileFactory()
            AggregatingClassfileLoader(com.jeantessier.classreader.ClassfileLoaderDispatcher)
                --> com.jeantessier.classreader.impl.DefaultClassfileFactory.DefaultClassfileFactory()
        TransientClassfileLoader
            TransientClassfileLoader()
                --> com.jeantessier.classreader.impl.DefaultClassfileFactory.DefaultClassfileFactory()
            TransientClassfileLoader(com.jeantessier.classreader.ClassfileLoaderDispatcher)
                --> com.jeantessier.classreader.impl.DefaultClassfileFactory.DefaultClassfileFactory()
</pre>

<p>
These constructors use concrete classes for the default value of parameters.
They should let the caller decide what to inject.  Then, the caller is free to
hardwire specific values or use a dependency injection framework to supply them
to the loader.
</p>

<p>
Looking at production code, I see the following instantiators of these loaders:
</p>

<pre>
    com.jeantessier.classreader
        AggregatingClassfileLoader
            AggregatingClassfileLoader()
                <-- com.jeantessier.dependencyfinder.ant
                <-- com.jeantessier.dependencyfinder.cli
                <-- com.jeantessier.dependencyfinder.gui
            AggregatingClassfileLoader(com.jeantessier.classreader.ClassfileFactory)
            AggregatingClassfileLoader(com.jeantessier.classreader.ClassfileFactory, com.jeantessier.classreader.ClassfileLoaderDispatcher)
            AggregatingClassfileLoader(com.jeantessier.classreader.ClassfileLoaderDispatcher)
        TransientClassfileLoader
            TransientClassfileLoader()
                <-- com.jeantessier.dependencyfinder.ant
                <-- com.jeantessier.dependencyfinder.cli
            TransientClassfileLoader(com.jeantessier.classreader.ClassfileFactory)
            TransientClassfileLoader(com.jeantessier.classreader.ClassfileFactory, com.jeantessier.classreader.ClassfileLoaderDispatcher)
            TransientClassfileLoader(com.jeantessier.classreader.ClassfileLoaderDispatcher)
                <-- com.jeantessier.dependencyfinder.gui
                <-- com.jeantessier.dependencyfinder.webwork
</pre>

<p>
But a lot of the tests call them too.  This is not going to be trivial.
</p>
</dd>
<dt><a name="2008-03-03">March 03, 2008</a></dt>
<dd>
<p>
Tried to generate GraphML where class-in-package and feature-in-class
relationships were modeled using subgraphs instead of simple edges, but the
resulting graph didn't look too good in
<a target="_blank" href="http://www.yworks.com/en/products_yed_about.htm">yEd</a>.
</p>

<p>
For example, take this simple dependency graph:
</p>

<pre>
    p1
        C1
            f1
                --> p2.C2.f2
    p2
        C2
            f2
                <-- p1.C1.f1
</pre>


<p>
Using edges to represent containement, I get this picture:
</p>

<p>
<img src="../images/p1.C1.f1_p2.C2.f2_edges.jpg" /><br />
</p>

<p>
Whereas using subgraphs, I get this picture:
</p>

<p>
<img src="../images/p1.C1.f1_p2.C2.f2_subgraphs.jpg" /><br />
</p>

<p>
Clearly, this second form will not scale to classes with many features, or to
packages with many classes.
</p>

<p>
A co-worker asked for means to determine what JARs are needed by a given JAR.
While Dependency Finder does not store the source of a class, such as its JAR
file, there are ways to get close to the answer.  You can get the dependency
graph for a JAR with <code>DependencyExtractor</code>, roll it up to package-level
dependencies with <code>p2p</code>, and then list the unconfirmed packages from <code>p2p</code>'s
output.  Dependency Finder doesn't have a tool for this last step, but I was
able to put together an XSL stylesheet to do just that.
</p>

<p>
I also realized I did not document <code>DependencyGraphToGraphML</code> nor
<code>DependencyGraphToyEd</code> on the Tools page.  So I took care of it at the same time
as I documented the new stylesheet for unconfirmed symbols:
<code>DepedencyGraphToUnconfirmedFullyQualifiedNames</code>.
</p>
</dd>
<dt><a name="2008-03-02">March 02, 2008</a></dt>
<dd>
<p>
Added edges for class-in-package and feature-in-class relationships to the
stylesheet for <a target="_blank" href="http://www.yworks.com/en/products_yed_about.htm">yEd</a>.  I want
to experiment with subgraphs too and see which will autolayout best.
</p>
</dd>
<dt><a name="2008-02-29">February 29, 2008</a></dt>
<dd>
<p>
Added a variation on <code>DependencyGraphToGraphML.xsl</code> for
<a target="_blank" href="http://www.yworks.com/en/products_yed_about.htm">yEd</a>:
<code>DependencyGraphToyEd.xsl</code>.  It can put labels on the nodes and uses dashed
arrows for dependencies using yWorks-specific extensions to GraphML.
</p>
</dd>
<dt><a name="2008-02-28">February 28, 2008</a></dt>
<dd>
<p>
Added a very early version of <code>DependencyGraphToGraphML.xsl</code>.  It turns out
producing XML from XSLT is a non-issue (as you'd expect).  Just use
<code>&lt;xsl:output method="xml"/&gt;</code>, which is kinda the default if the top
result node is not some variation of <code>&lt;html&gt;</code>, according to the
<a target="_blank" href="http://www.w3.org/TR/xslt">XSLT spec</a>.
</p>

<p>
I cleaned up the XSL templates.  I removed explicit
<code>&lt;xsl:output method="html"/&gt;</code> tags because these templates make it
obvious that they produce HTML.  I wanted to remove <code>&lt;xsl:strip-space&gt;</code>
too, but that caused memory problems for large documents, so I kept them in.  I
inlined unnecessary <code>&lt;xsl:variable&gt;</code> tags all over the place.
</p>

<p>
One issue I have with all of this is that I don't have any kind of automated
tests for these XSL templates.  I could run a transformation and use XPath to
verify its output, but that would be tedious and brittle and hard to maintain.
I could record <i>golden</i> outputs and compare the output of transformations to
them, but that would also be brittle.  This latter solution would nearly be the
only way to test XSL transforms that produce text.
</p>
</dd>
<dt><a name="2008-02-24">February 24, 2008</a></dt>
<dd>
<p>
Tried to write an XSL transformation to convert a dependency graph from the XML
format of Dependency Finder to GraphML.  So far, XSLT doesn't like for me to
define another <code>&lt;?xml?&gt;</code> tag inside the XSL template.  So unless I can
find a way to circumvent this, I will have to create a full-blown <code>Printer</code>
instead.
</p>
</dd>
<dt><a name="2008-02-22">February 22, 2008</a></dt>
<dd>
<p>
Someone pointed me to
<a target="_blank" href="http://code.google.com/p/google-singleton-detector/">Google Singleton Detector</a>,
a static analyzer that looks for singleton and produces nice graph output.  They
use <a target="_blank" href="http://graphml.graphdrawing.org/">GraphML</a> to render the graphs and
<a target="_blank" href="http://www.yworks.com/en/products_yed_about.htm">yEd</a> to view them.
</p>

<p>
The same people that offer yEd also have a UML tool called
<a target="_blank" href="http://www.yworks.com/en/products_ydoc.htm">yDoc</a>, but you have to
pay for that one.
</p>
</dd>
<dt><a name="2008-02-21">February 21, 2008</a></dt>
<dd>
<p>
Fixed <code>MartinConfig.xml</code> to remove extraneous value selectors.  Both <code>Ca</code> and
<code>CaComp</code> aggregated class names from <code>IEPM</code> with these regular expressions:
</p>

<pre>
    IEPM /^(.*)\.[^\.]*\(.*\)$/
    IEPM /^(.*)\.[\^.]*$/
</pre>

<p>
The first one matches the class name portion of method names thanks to the
parentheses at the end.  The second regular expression (forget the typo for a
moment) does not include the parenthesized argument type list, so it can only
match field names.  But <code>IEPM</code> can only contain method names, never field names,
so this second regular expression is totally superfluous.  So I removed it.
</p>

<p>
With just the first regular expression, <code>Ca</code> and <code>CaComp</code> end up collapsing
<code>IEPM</code> to a list of distinct class names, which is what they need.
</p>
</dd>
<dt><a name="2008-02-20">February 20, 2008</a></dt>
<dd>
<p>
Ran <a target="_blank" href="http://code.google.com/p/testability-metrics/">testability-metrics</a>
against Dependency Finder for fun.  With no surprise, the biggest cyclomatic
complexity culprits were <code>com.jeantessier.dependencyfinder.gui.DependencyFinder</code>
and <code>com.jeantessier.dependencyfinder.gui.OOMetrics</code> because of Swing.  The
class with the biggest global state cost was <code>Instruction</code> because it stores so
much data in the static context.
</p>
</dd>
<dt><a name="2008-02-16">February 16, 2008</a></dt>
<dd>
<p>
Adjusted vocabulary in Fit tests to reflect Four-Phase Test pattern from the
book <i>xUnit Test Patterns</i>.
</p>
</dd>
<dt><a name="2008-02-15">February 15, 2008</a></dt>
<dd>
<p>
Someone referred me to a Danny Diggs, from UIUC, who has a tool to detect
refactorings that are done to a library and can then replay them on client code
when new version of the library gets released.  This goes one step further than
<code>JarJarDiff</code> who can tell you if the API you relied on got changed; it can
actually modify your code to bring it in line with the new version of the
library.  A quick Google search didn't find any obvious matches for this tool,
though.
</p>

<p>
Someone pointed me to
<a target="_blank" href="http://code.google.com/p/testability-metrics/">testability-metrics</a>, a tool
that looks at cyclomatic complexity as a way to estimate the cost of testing
any given method.  It works off of compiled bytecode, just like Dependency
Finder, but uses <a target="_blank" href="http://asm.objectweb.org/">ASM</a> for decompiling bytecode.
</p>
</dd>
<dt><a name="2008-02-14">February 14, 2008</a></dt>
<dd>
<p>
Added a Fit test for <code>MartinConfig.xml</code>.
</p>

<p>
Replaced the names of basic measurements in <code>Metrics</code> with an <code>enum</code> called
<code>BasicMeasurements</code>.
</p>

<p>
Simplified the <code>Measurement</code> interface by using autoboxing for numerical values
instead of explicit <code>add(*)</code>
and <code>*Value()</code> methods.
</p>

<p>
Replaced dependencies on <code>Collections.EMPTY_*</code> to their corresponding
<code>Collections.empty*()</code> instead for stronger type checking.
</p>
</dd>
<dt><a name="2008-02-13">February 13, 2008</a></dt>
<dd>
<p>
Found a possible bug with <code>MartinConfig.xml</code> that was the result of a typo in a
regular expression.  Where it says <code>[\^.]</code> (a caret or anything), it should have
said <code>[^\.]</code> (anything but a dot) instead.  I will have to write some conclusive
tests to verify the behavior of this config before I can go ahead and fix it.
</p>
</dd>
<dt><a name="2008-02-04">February 04, 2008</a></dt>
<dd>
<p>
Worked on getting access to <code>Signature_attribute</code> information in relevant
programming elements (<code>Classfile</code>, <code>Method_info</code>, and <code>Field_info</code>, forgot
about possible <code>InnerClass</code>).
</p>

<p>
Added tests for <i>index</i> attribute of <code>LocalVariable</code> and <code>LocalVariableType</code>
and to make sure <code>XMLPrinter</code> renders it, using jMock.
</p>

<p>
Added information (and tests) about <i>varargs</i> methods.
</p>
</dd>
<dt><a name="2008-01-29">January 29, 2008</a></dt>
<dd>
<p>
Dependency Finder is now seven years old.
</p>

<p>
Adjusted the copyright notice for 2008.  I found a few files whose copyright
notice still said 2004!
</p>
</dd>
<dt><a name="2008-01-28">January 28, 2008</a></dt>
<dd>
<p>
Minor clean up: removing trailing spaces.
</p>

<p>
There was a feature added to <code>JProgressBar</code> in JDK 1.4 where you could put it in
an <i>indeterminate</i> state when you didn't know how long a task would be.  Back in
January 2003, I commented out the calls to <code>JProgressBar.setIndeterminate()</code> in
<code>OpenFileAction</code> and <code>MetricsExtractAction</code>.  I think it is safe to uncomment
them now.
</p>
</dd>
<dt><a name="2008-01-27">January 27, 2008</a></dt>
<dd>
<p>
Played a little bit with JUnit 4.4.  It is perfectly backwards compatible, so
I could just upgrade to it and keep on writing tests like with the 3.8.2
version.  The are moving to a new syntax that uses
<a target="_blank" href="http://code.google.com/p/hamcrest/">Hamcrest</a> <code>Matcher</code> classes, like jMock
so you can write assertions like <code>assertThat(actualValue, is(expectedValue))</code>.
While it makes the code closer to English, it also makes it farther from Java.
I'm not totally convinced this is a good thing.  It is more expresive, that's
for sure.  What I would really like to see is an automated way to build test
suites, without me having to hard-code which tests are in a given suite.  I
haven't found the mechanism to do this in JUnit 4.
</p>
</dd>
<dt><a name="2008-01-24">January 24, 2008</a></dt>
<dd>
<p>
Looking for a specification of the <code>StackMapTable</code> attribute.
</p>

<p>
Found some interesting parallels to <code>com.jeantessier.classreader</code> in
<a target="_blank" href="http://www.csg.is.titech.ac.jp/~chiba/javassist/">Javassist</a>.  There might
inspiration on how to deal with annotation-related structures.  See their
documentation for
<a target="_blank" href="http://www.csg.is.titech.ac.jp/~chiba/javassist/html/javassist/bytecode/AttributeInfo.html">AttributeInfo</a>.
</p>
</dd>
<dt><a name="2008-01-23">January 23, 2008</a></dt>
<dd>
<p>
Add jMock libraries to <code>CLASSPATH</code> for JUnit launch scrits (<code>junit</code> and
<code>textjunit</code>, both on Windows and Unix).
</p>
</dd>
<dt><a name="2008-01-19">January 19, 2008</a></dt>
<dd>
<p>
Used <a target="_blank" href="http://jmock.org/">jMock</a> to rewrite <code>TestLoadListenerVisitorAdapter</code>.
</p>
</dd>
<dt><a name="2008-01-18">January 18, 2008</a></dt>
<dd>
<p>
Finished separating the classes that make up <code>Classfile</code> into interfaces and
a implementation classes in a sub-package.
</p>

<p>
Next, I want to break the visitor hierarchy in <code>com.jeantessier.dependency</code> to
use compisition instead of inheritance for separating graph traversal from the
specific functions.  A wrapper will take care of traversal and delegate to
another visitor for the work to do.  This way, I will be able to test traversal
logic with jMock instead of relying on a subclass.
</p>
</dd>
<dt><a name="2008-01-17">January 17, 2008</a></dt>
<dd>
<p>
Started separating the classes that make up <code>Classfile</code> into interfaces and
a implementation classes in a sub-package.
</p>
</dd>
<dt><a name="2008-01-16">January 16, 2008</a></dt>
<dd>
<p>
Clamped down on public constants for access modes in <code>.class</code> files structures.
</p>

<p>
I am very tempted to extract interfaces from all the classes that make up the
<code>Classfile</code> structure and put their implementation into a separate package.  I
could possibly rewrite part of the tests with <a target="_blank" href="http://jmock.org/">jMock</a> and
have more control on what gets tested without having to jump through hoops to
create test classes that expose specific behavior.
</p>
</dd>
<dt><a name="2008-01-15">January 15, 2008</a></dt>
<dd>
<p>
Played with <a target="_blank" href="http://docs.codehaus.org/display/ASH/Home">Ashcroft</a> to see how
well-behaved my unit tests really were.  Out of 1403 unit tests, 1224 did <b>not</b>
pass the test.  This is not totally surprising since most tests get their data
from reading <code>.class</code> files.  Also, I couldn't run the tests with Ant because
Ant tries to write test reports to files and Ashcroft won't let it open the
output file.
</p>
</dd>
<dt><a name="2008-01-14">January 14, 2008</a></dt>
<dd>
<p>
Ran Dependency Finder through <a target="_blank" href="http://findbugs.sf.net">FindBugs</a> and found a
few quick fixes, including one clear bug in
<code>com.jeantessier.dependencyfinder.cli.ListDiff</code> where I was not closing a stream
when reading in a file.  Twice.  And two constants in <code>TransitiveClosure</code> that
were not marked <code>final</code>.  But there were quite a few false positives too.
</p>
</dd>
<dt><a name="2008-01-07">January 07, 2008</a></dt>
<dd>
<p>
Finally got back to working on <code>SignatureHelper</code> to process the signature of
generics.  For starters, I simply copied the code from <code>DescriptorHelper</code> and
modified it slightly.  I will need to figure out how to extract common code
to a shared superclass.  I also added Fit tests for <code>DescriptorHelper</code> and
<code>SignatureHelper</code>, to eventually replace the JUnit tests.  It is easier to
test multiple operations on a given string using Fit tests than with JUnit,
which would require a certain amount of code duplication.
</p>
</dd>
<dt><a name="2008-01-03">January 03, 2008</a></dt>
<dd>
<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>WebWork</td>
        <td>:</td>
        <td>2.2.4</td>
        <td>-></td>
        <td>2.2.6</td>
    </tr>
</table>
</blockquote>

<p>
I also changed <code>web.xml</code> for both webapps to use JSP 2.1 with EL support.  Not
that I'm using any of it yet, but just keeping up-to-date.
</p>
</dd>
<dt><a name="2007-12-28">December 28, 2007</a></dt>
<dd>
<p>
Played with <a target="_blank" href="http://java.sun.com/products/jsp/jstl/">JSTL</a> to see if some of
the tags in there could help with i18n for the webapp.
</p>
</dd>
<dt><a name="2007-12-27">December 27, 2007</a></dt>
<dd>
<p>
IntelliJ has really awesome support for making internationalized resource
bundles.  Makes me want to build one for the webapp so I can i18n it.
</p>
</dd>
<dt><a name="2007-12-13">December 13, 2007</a></dt>
<dd>
<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>IntelliJ IDEA</td>
        <td>:</td>
        <td>7.0.1</td>
        <td>-></td>
        <td>7.0.2</td>
    </tr>
</table>
</blockquote>

<p>
I looked into <a target="_blank" href="http://www.opensymphony.com/webwork/">WebWork</a>'s OGNL stack and
expression language.  I cleaned some of the WebWork webapp files.
</p>
</dd>
<dt><a name="2007-12-12">December 12, 2007</a></dt>
<dd>
<p>
Upgraded my development machine to MacOS X 10.5 "Leopard".
</p>
</dd>
<dt><a name="2007-11-28">November 28, 2007</a></dt>
<dd>
<p>
Took a quick look at <a target="_blank" href="http://xradar.sourceforge.net">XRadar</a> and how it uses
Dependency Finder.  Interestingly, XRadar is implemented as a series of Ant
tasks and XSL stylesheets.  One of the Ant tasks uses <code>DependencyExtractor</code>
and its output is processed by a specific XSL stylesheet.  They are well
insulated from any API changes on my part.
</p>
</dd>
<dt><a name="2007-11-26">November 26, 2007</a></dt>
<dd>
<p>
Found out Dependency Finder is shipped as part of
<a target="_blank" href="http://xradar.sourceforge.net">XRadar</a>.  Cool!  I should check which part of
the API they are calling.  They are shipping a pretty old version: 1.1.0 dated
December 2004.
</p>

<p>
A user contacted me because they are using Dependency Finder from behind a
firewall and the doctype of generated XML documents points to a <code>SYSTEM</code> DTD
that they cannot reach.  They suggest using a <code>PUBLIC</code> DTD instead.  I will
have to look into how that works and what the implications would be.
</p>
</dd>
<dt><a name="2007-11-19">November 19, 2007</a></dt>
<dd>
<p>
Added version information for <a target="_blank" href="http://www.cenqua.com/clover/">Clover</a>.
</p>
</dd>
<dt><a name="2007-10-30">October 30, 2007</a></dt>
<dd>
<p>
Fixed
<a target="_blank" href="http://sourceforge.net/tracker/index.php?func=detail&aid=1822770&group_id=43305&atid=435884">bug 1822770</a>
where a missing switch value on the command-line was throwing
<code>CommandLine.parse()</code> into an infinite loop.  Thanks to
<a target="_blank" href="http://sourceforge.net/users/monperrm/">monperm</a> for reporting the issue.
</p>
</dd>
<dt><a name="2007-10-25">October 25, 2007</a></dt>
<dd>
<p>
Finished tests in <code>TestClassReport</code> for non-ASCII characters.
</p>
</dd>
<dt><a name="2007-10-24">October 24, 2007</a></dt>
<dd>
<p>
Unit tests for excaping <code>[</code> and <code>]</code> in <code>HTMLPrinter</code>.
</p>
</dd>
<dt><a name="2007-10-23">October 23, 2007</a></dt>
<dd>
<p>
Unit tests for excaping <code>[</code> and <code>]</code> in <code>HTMLPrinter</code>.
</p>
</dd>
<dt><a name="2007-10-22">October 22, 2007</a></dt>
<dd>
<p>
Unit tests for excaping <code>[</code> and <code>]</code> in <code>HTMLPrinter</code>.
</p>
</dd>
<dt><a name="2007-10-18">October 18, 2007</a></dt>
<dd>
<p>
More work on
<a target="_blank" href="http://sourceforge.net/tracker/index.php?func=detail&aid=1800017&group_id=43305&atid=435884">bug 1800017</a>.
</p>

<p>
In the process, I made the error reporting for bad regular expressions a little
more user-friendly.  I tried using a checked exception at first, but the change
quickly spread everywhere.  The exception class was in
<code>com.jeantessier.dependency</code> and as a result, every package suddenly depended
on it, including <code>com.jeantessier.classreader</code>, creating a circular dependency.
So I went back to an unchecked exception for the time being.
</p>
</dd>
<dt><a name="2007-10-09">October 09, 2007</a></dt>
<dd>
<p>
Added a test to <code>TestQueryBase</code> to check for properly escaped <code>[</code> and <code>]</code> in
order to fix
<a target="_blank" href="http://sourceforge.net/tracker/index.php?func=detail&aid=1800017&group_id=43305&atid=435884">bug 1800017</a>.
</p>
</dd>
<dt><a name="2007-09-24">September 24, 2007</a></dt>
<dd>
<p>
Code cleanup.
</p>
</dd>
<dt><a name="2007-09-21">September 21, 2007</a></dt>
<dd>
<p>
Found a bug in the web app where elements with <code>[</code> or <code>]</code> in them, like
<code>main(String[])</code> for example, are not escaped correctly when creating likes to
them to refine queries and generate exceptions.
</p>
</dd>
<dt><a name="2007-09-19">September 19, 2007</a></dt>
<dd>
<p>
Moved the
<a target="_blank" href="http://docs.google.com/TeamPresent?fs=true&docid=dd268fqt_253hjsxw&skipauth=true">Tutorial</a>
from MS PowerPoint-generated HTML to the new
<a target="_blank" href="http://docs.google.com/">Google Docs</a> presentation.
</p>
</dd>
<dt><a name="2007-08-30">August 30, 2007</a></dt>
<dd>
<p>
Fixed the documentation for <code>OOMetrics</code> to remove references to the old <code>-all</code>
switch in the CLI.
</p>

<p>
Changed the path in the distribution archives so Dependency Finder extracts to
a folder that include the release label in its name.  Distributions used to all
extract themselves to <code>DependencyFinder</code> and would overwrite each other.  Now,
they extract to <code>DependencyFinder-<i>&lt;version&gt;</i></code> instead, like
<code>DependencyFinder-1.2.1</code> for instance.  The previous naming scheme worked well
when I was developing on a Windows platform and changing the <code>PATH</code> was
tedious.  But now that I work mostly on Mac and Unix, I can use a simple
symbolic link.
</p>

<p>
I also modified the installation instructions to include the current version
number directly in the text.  I was already injecting it to label the
instructions at the top of the document.  It was easy enough to replace the
reference throughout the document.
</p>
</dd>
<dt><a name="2007-08-29">August 29, 2007</a></dt>
<dd>
<p>
Created some test data and a FIT test for tracking extra-package dependencies
using OOMetrics.  Right now, it can control access to methods, including
constructors, but it does not handle fields.  That would require a bigger
change in <code>OOMetrics</code>.
</p>

<p>
I'm also considering adding a filtering function similar to the one in
<code>OOMetricsGUI</code>.  If I can find a way to extract symbols at a given access
level, I could then use them to filter the metrics report.
</p>
</dd>
<dt><a name="2007-08-28">August 28, 2007</a></dt>
<dd>
<p>
Someone was asking for a tool to track public methods that are not used outside
their package.  They could use such a tool to narrow down the exposed interface
of a library.  I started thinking how I could do this using Dependency Finder.
One problem is that most tools don't record the access level of programming
elements.  <code>JarJarDiff</code> does it, but it doesn't know about dependencies.
<code>OOMetrics</code> keeps a count by access level, but does not keep track of the acces
level of individual methods.  One possibility would be to get a list of public
and protected methods, maybe with <code>ListSymbols</code>, and pass them to <code>OOMetrics</code>
somehow.  The <code>-scope-includes-list</code> switch to <code>OOMetrics</code> controls which
dependencies it tracks, not which metrics are reported.  With the
<code>-show-empty-metrics</code> switch and a
<code>&lt;lower-threshold&gt;1&lt;/lower-threshold&gt;</code> in the
configuration for the <code>IEPM</code> measurement, any method without any extra-package
dependency would stand out, but right now that includes private and package
methods.
</p>
</dd>
<dt><a name="2007-08-27">August 27, 2007</a></dt>
<dd>
<p>
Played with DOM and JAXP to try and figure out how non-ASCII characters get
encoded by the platform.  So far, they don't.  I can generate an XML document
using DOM that cannot be parsed back in.
</p>
</dd>
<dt><a name="2007-08-24">August 24, 2007</a></dt>
<dd>
<p>
I've started by renaming <code>Report.toString()</code> to <code>Report.render()</code>, just like I
did for <code>ClassReport</code>.  Again, I am still not completely satisfied with it, but
it will do as a stop-gap measure.
</p>

<p>
I also took care of escaping special characters in <code>&lt;modified-fields&gt;</code>
tags.  This introduced an interesting twitst.  When the value is changed,
<code>ClassReport</code> includes it in the content of the tag where it may need to be
escaped too.  But in tag content, I don't need to escape '"' or '''.  In fact,
the content is more human-readable if I don't.  So I split
<code>ClassReport.escapeXMLCharacters()</code> into
<code>ClassReport.escapeXMLCharactersInTagContent()</code> for tag content and
<code>ClassReport.escapeXMLCharactersInAttributeValue()</code>, a more thorough version
for attribute values.
</p>

<p>
Replaced of dependency on <code>com.sun.org.apache.xpath.internal.XPathAPI</code>, which
is internal and was giving me compiler warnings, with <code>javax.xml.xpath</code>.  The
code is just as clear and this time uses supported interfaces.
</p>
</dd>
<dt><a name="2007-08-23">August 23, 2007</a></dt>
<dd>
<p>
Redesigning the <code>Classfile</code> hierarchy is proving more complex than I even
thought.  For now, the easiest thing to do is for me to just add constants with
values that need escaping in <code>ModifiedPackage.ModifiedClass</code> in the
<code>JarJarDiff</code> test data folder and write tests that read <code>.class</code> files from the
filesystem.  I'll revisit jMock or EasyMock for something else at some other
time.
</p>

<p>
I modified <code>ClassReport</code> to be a <code>com.jeantessier.classreader.Visitor</code> so I can
use double dispatch to escape string values but not numeric values.  It makes
more sense to have a specific visitor choose the proper rendering based on the
output format than to blindly assume one.  Still, <code>Report</code> and <code>ClassReport</code>
both join two responsibilities: organizing differences and rendering them in
XML.  These should be split into separate classes, which would open the door to
rendering the reports in something other than XML without the need for XSLT.
</p>

<p>
Refactored the <code>RemovableDifferences</code> hierarchy.  The concrete classes used
protected setters to save values in the state of the superclass.  Instead, I
made the getters abstract so each subclass can implement it based on its own
state instead of polluting the state of the superclass.  This way, I could get
rid of the setters altogether.  Some of these getters, such as
<code>ClassDifferences.get(Old|New)Declaration()</code> and
<code>FeatureDifferences.get(Old|New)Declaration()</code>, are now slightly less efficient
but I hope it won't impact overall performance too much.
</p>

<p>
Refactored <code>com.jeantessier.classreader.TestXMLPrinter</code> to use XPath
expressions to test the contents of the generated XML.  Since it already loaded
and processed the test data folder for <code>JarJarDiff</code>, it indirectly tests the
proper escaping of special characters.  I find that I don't need to encode '"'
or ''' since all string values are in the body of tags and never in attributes.
The only exception is the name of custom attributes and I doubt these will use
quotes or apostrophes.
</p>
</dd>
<dt><a name="2007-08-22">August 22, 2007</a></dt>
<dd>
<p>
Tried to use <a target="_blank" href="http://easymock.org/">EasyMock</a> instead of
<a target="_blank" href="http://jmock.org/">jMock</a>.  Whereas jMock can infer decent default return
values for methods, such as <code>false</code> for a boolean or <code>""</code> for a string, I have
to specify everything explicitly with EasyMock.  And it seems to have issues
with <code>toString()</code> too.  I might as well stick with jMock for now.
</p>

<p>
Lessons learned:
</p>

<p>
Lesson 1: don't put overly complex logic in <code>toString()</code>.  Tools like debuggers
rely on it to display feedback, so if there is a bug in <code>toString()</code>, it will
cripple your debugger.  <code>ClassReport.toString()</code> does <b>all</b> the XML formatting,
and that is a bad thing.
</p>

<p>
Lesson 2: mock object frameworks like jMock and EasyMock are of no help when
the path you are mocking uses double dispatch in the middle of it.  I haven't
found a way to tell the mock to call some other method when it receives a given
call.  In my case, I am testing part of a Visitor where the graph it is
visiting has mocks in it.  When the visitor calls <code>accept()</code> on a mock, that
mock should call <code>visitX()</code> back on the visitor.  There seems to be no trivial
way to specify this on the mocks.
</p>

<p>
Lesson 3: I built the classes in <code>com.jeantessier.classreader</code> with the
assumption that they would read well formed <code>.class</code> files.  This makes it hard
to test small portions of the structure in isolation.  All the constructors
take a <code>DataInputStream</code> and expect valid bytes on the stream.  Setting up unit
tests is extremely hard.  I cannot create a custom mock by subclassing.  There
are no interfaces for me to implement.  The structure is too complex for jMock
or EasyMock.  I'm stuck.
</p>

<p>
Action items:
</p>

<ul>
<li>Move rendering logic out of <code>ClassReport.toString()</code> and <code>Report.toString()</code>.</li>
<li>Create constructors for <code>Classfile</code> and its dependants.</li>
<li>Don't rely on <code>toString()</code> for rendering logic.</li>
</ul>

<p>
That should make things easier to work with and speed up some of the tests.  I
would be able to build a graph of model objects for the tests instead of
reading dummy <code>.class</code> files from disk.
</p>

<p>
I've started by renaming <code>ClassReport.toString()</code> to <code>ClassReport.render()</code>.  I
still not completely satisfied with it, but it will do as a stop-gap measure
for now.
</p>
</dd>
<dt><a name="2007-08-21">August 21, 2007</a></dt>
<dd>
<p>
Tried to use <a target="_blank" href="http://jmock.org/">jMock</a> to mock parts of an API difference
structure so I can test that <code>ClassReport.breakdownDeclaration(Field_info)</code>
does the proper encoding of XML characters in values of string constants.  I am
struggling quite a bit.  The method I want to test is private, so I have to go
through a path inside <code>ClassReport</code> that calls it, and that path makes quite a
few calls on other structures around the <code>Field_info</code>.  Setting up the mocks is
a little ugly and takes over 75% of the test method.  Plus, it looks like jMock
never mocks calls to <code>toString()</code>.  Maybe there is something that I don't quite
get.
</p>
</dd>
<dt><a name="2007-08-16">August 16, 2007</a></dt>
<dd>
<p>
A short while ago, someone filed a bug against <code>JarJarDiff</code> because it doesn't
encode special characters in its XML output, like '&lt;' embeded in string values.
I got a case of that today as I was comparing two versions of a library and one
of the strings contained a non-ASCII character that was not getting escaped.
</p>

<p>
I started by writing a test against <code>com.jeantessier.classreader.XMLPrinter</code>
and the '&gt;' character, only to find out that this one XML generator actually
escape certain characters already.  But it's the only one to do so and it only
handles '&lt;', '&gt;', and '&amp;'.
</p>

<p>
The person who filed the bug proposed using an <code>XMLUtil</code> class copied from some
other open source software.  I'm not a big fan of utility classes so we'll see
how it all turns out.  Because of the way the printer hierarchy is organized,
I might have to duplicate the escaping code between them if I don't want to use
a utility class.
</p>
</dd>
<dt><a name="2007-08-08">August 08, 2007</a></dt>
<dd>
<p>
Played with <a target="_blank" href="http://www.stack.nl/~dimitri/doxygen/index.html">Doxygen</a> to
generate UML diagrams.  The documentation it generates looks nice and includes
where symbols are referenced from.  The diagrams are rather busy because they
tend to include <i>everything</i>.  If I want to make it part of the normal
documentation build, it would require people to include Doxygen too.  I'm not
sure I want to take it that far just yet.
</p>

<p>
Refactored <code>NbSubMetricsMeasurement</code> to remove some duplication.
</p>
</dd>
<dt><a name="2007-08-03">August 03, 2007</a></dt>
<dd>
<p>
Added <code>SourceDebugExtension_attribute</code>.
</p>

<p>
Added counts for the various attribute types in <code>ClassMetrics</code>.
</p>
</dd>
<dt><a name="2007-08-02">August 02, 2007</a></dt>
<dd>
<p>
Played with JDK 1.6.  It screwed up some of the tests because of changes in the
language and the <code>.class</code> file format.  For instance, there is a new
<code>StackMapTable</code> attribute for which I could not find any description on the
Internet.  Of course, the JDK 1.6 compiler puts one such attribute in the
bytecode for <code>test.main()</code>.  Right now, Dependency Finder represents it using
<code>Custom_attribute</code>, but it threw off
<code>TestVisitorBase.testVisitCode_attribute()</code> which wasn't expecting custom
attributes.  The few bits of text I could find on Sun's website that talk
about <code>StackMapTable</code> also refer to a <code>StackMap</code> attribute, which I had never
heard off before.  Makes me wonder what else is lurking in the shadows.
</p>

<p>
Since I do most of my Dependency Finder development on a Mac these days, it
will still be a while before I can deal with JDK 1.6 issues.
</p>

<p>
Someone found a bug with the XML generated by <code>JarJarDiff</code>.  When it breaks
down the declaration of constants, it shows the value for that constant if it
can, which, in the case of strings, can contain characters that should be
escaped in XML.  I suspect it might be an issue for other XML generators too.
</p>
</dd>
<dt><a name="2007-07-31">July 31, 2007</a></dt>
<dd>
<p>
Fixed an error in <code>metrics.dtd</code>.  <code>members</code> was defined as a list of <code>members</code>
when it is actually a list of <code>member</code> elements, with no 's' at the end.
</p>
</dd>
<dt><a name="2007-07-26">July 26, 2007</a></dt>
<dd>
<p>
Finished reading the last Harry Potter book:
<a target="_blank" href="http://www.amazon.com/Harry-Potter-Deathly-Hallows-Book/dp/0545010225/ref=pd_bbs_sr_1/103-3589099-3771861?ie=UTF8&s=books&qid=1185551985&sr=8-1">Harry Potter and the Deathly Hallows</a>.
Now I can get back to Dependency Finder.  :-)
</p>
</dd>
<dt><a name="2007-07-21">July 21, 2007</a></dt>
<dd>
<p>
Started reading the last Harry Potter book:
<a target="_blank" href="http://www.amazon.com/Harry-Potter-Deathly-Hallows-Book/dp/0545010225/ref=pd_bbs_sr_1/103-3589099-3771861?ie=UTF8&s=books&qid=1185551985&sr=8-1">Harry Potter and the Deathly Hallows</a>.
Won't be working on Dependency Finder for a little while.
</p>
</dd>
<dt><a name="2007-07-19">July 19, 2007</a></dt>
<dd>
<p>
Back from vacation.
</p>
</dd>
<dt><a name="2007-07-12">July 12, 2007</a></dt>
<dd>
<p>
Leaving for vacation in Cancun, Mexico.  Won't be working on Dependency Finder
for a little while.
</p>
</dd>
<dt><a name="2007-07-04">July 04, 2007</a></dt>
<dd>
<p>
<code>Monitor</code> is too aggressive when multiple versions of a class show up in a
codebase.  This can happen on large projects that depend on many third-party
software that each depend, in turn, on some popular package.  For example, both
GWT and HttpUnit come with their own version of Xerces; if my project uses
both, <code>Monitor</code> is going to see Xerces classes twice when I try to analyze my
project.  When I designed <code>Monitor</code>, I was assuming that it wouldn't see the
same class name twice within a session.  Now, I probably want to merge
dependencies within a session and still remove everything between sessions,
regardless of whether <code>Monitor</code> is setup for open or closed sessions.
</p>

<p>
Refactored <code>Monitor</code> to use parameterized generics.  Removed code duplication
in <code>TestMonitor</code>.
</p>
</dd>
<dt><a name="2007-06-29">June 29, 2007</a></dt>
<dd>
<p>
I noticed that the <code>mnemonic()</code> column in <code>Instruction.html</code> was not turning
green or red as tests passed or failed.  I was using an HTML <code>class</code> attribute
on the cell to give it a monospaced font, but that interfered with Fit's
coloring scheme, which also uses a <code>class</code> attribute on the cell.  The browser
was using only the first <code>class</code> attribute and ignoring the one from Fit.  I
took mine out; it doesn't look as pretty now, but it is much more useful this
way.
</p>

<p>
In OO, a <i>signature</i> is something that uniquely identifies a method, typically
it is its name and the type of each parameter, in order.  But Java 1.5
introduced a different meaning to the word <i>signature</i>: the generic information
around a class, field, or method declaration.  Java in general uses the work
<i>descriptor</i> to refer to the combination of return type and parameter types of
a method.  The object model in <code>com.jeantessier.classreader</code> uses <i>signature</i>
in the OO sense and builds it from the method's name and decriptor information.
But I feel this may get confusing as I expose the Java 1.5 <code>Signature_info</code>
data.  I am debating whether I should rename all my <code>*Signature</code> methods to
<code>*Descriptor</code> instead; maybe even going as far as leaving the method name out
of them and let callers combine them as appropriate.  I'll need to look into
this more closely.
</p>

<p>
<code>Feature_info</code> already has a <code>getDescriptor()</code> method that returns the raw
string that describes the <i>descriptor</i> (in the Java sense).
</p>
</dd>
<dt><a name="2007-06-28">June 28, 2007</a></dt>
<dd>
<p>
Refactored classes in <code>com.jeantessier.classreader</code> to encapsulate knowledge of
field types and method signatures in the appropriate classes.  I want to better
encapsulate use of <code>DescriptorHelper</code>.  This is a little hairy because this
package has rather poor coverage from the tests.
</p>
</dd>
<dt><a name="2007-06-26">June 26, 2007</a></dt>
<dd>
<p>
Added a test generic method where some parameters are not generic and some are
simple types.  I think I can use the optional <code>Signature</code> attribute in lieu of
the descriptor, instead of trying to merge them somehow.
</p>
</dd>
<dt><a name="2007-06-25">June 25, 2007</a></dt>
<dd>
<p>
Extracted common code from <code>DependencyCycles</code>, <code>DependencyClosure</code>, and
<code>DependencyMetrics</code> and put it into <code>DependencyGraphCommand</code>.  They load and
merge all the graphs before they can start processing.  <code>DependencyReporter</code>
benefited also, but to a lesser degree because it optimizes the processing of
graphs as they are being loaded instead of waiting for one big graph of
everything.
</p>
</dd>
<dt><a name="2007-06-24">June 24, 2007</a></dt>
<dd>
<p>
Extracted common code from <code>ClassList</code> and cie into <code>DirectoryExplorerCommand</code>.
</p>
</dd>
<dt><a name="2007-06-22">June 22, 2007</a></dt>
<dd>
<p>
Found a bug with <code>DependencyExtractor</code>.  If I don't give it any parameters, it
is supposed to start exploring the current directory.  Instead of that, I am
getting a <code>UnsupportedOperationException</code> in <code>Collection.add()</code> when the tool
adds "." to the parameters when the parameter list is empty.  I opened a bug
against it:
<a target="_blank" href="http://sourceforge.net/tracker/index.php?func=detail&aid=1741810&group_id=43305&atid=435884">Bug #1741810</a>.
</p>

<p>
This impacts quite a few tools:
</p>

<ul>
<li><code>ClassFinder</code></li>
<li><code>ClassList</code></li>
<li><code>ClassMetrics</code></li>
<li><code>DependencyExtractor</code></li>
<li><code>ListDeprecatedElements</code></li>
<li><code>ListSymbols</code></li>
<li><code>OOMetrics</code></li>
</ul>

<p>
I also found a similar somewhat similar problem with <code>ClassReader</code>, but this
tool uses an <code>AtLeastParameterStrategy</code> and requires at least one parameter.
So it makes no sense to have a special case for when there are no parameters,
since this will never happen.  I looked at previous versions of the tool and
this duality has been present for a long time, so I kept the
<code>AtLeastParameterStrategy</code>.  <code>ClassReader</code> is not meant to run against a large
set of classes, it is intended for use against a small set so we can inspect
their internals.
</p>

<p>
The Tools page refers to two scripts that do not exist yet: <code>CyclesToHTML</code> and
<code>CyclesToText</code>.  Either I never wrote them or I somehow forgot them in some
Subversion client somewhere.  I will have to dig around for them or write them
from scratch eventually.
</p>
</dd>
<dt><a name="2007-06-18">June 18, 2007</a></dt>
<dd>
<p>
Plugged into <a target="_blank" href="http://google.com/analytics/">Google Analytics</a>.
</p>

</dd>
<dt><a name="2007-06-14">June 14, 2007</a></dt>
<dd>
<p>
Fixed tests so they could run without a network connection.
<code>MetricsConfigurationLoader</code> takes an optional boolean as to whether or not
validate XML documents against their DTD.  When runnning the tests without a
network connection, you can set the <code>DF_VALIDATE</code> environment variable to
anything but the string "true" to set the Java property
<code>DEPENDENCYFINDER<i>TESTS</i>VALIDATE</code> which in turn controls what gets passed to
<code>MetricsConfigurationLoader</code>.  Some new tests that verify the behavior of
<code>*.XMLPrinter</code> also try to parse the resulting XML and need to turn off the
validation feature of the parser when the network connection is not available.
</p>

<p>
Fixed the command-line test launchers to account for the latest versions of
WebWork and Tomcat, which have changed the name and/or location of their JARs.
Note that <code>junit</code> and <code>junit.bat</code> require that you pass them <code>-noloading</code> for
the HttpUnit-based tests to work.  They don't seem to like the classloader that
JUnit uses to reload classes between tests.
</p>
</dd>
<dt><a name="2007-05-30">May 30, 2007</a></dt>
<dd>
<p>
Fixed documentation.
</p>
</dd>
<dt><a name="2007-05-25">May 25, 2007</a></dt>
<dd>
<p>
Added <code>isSynthetic()</code>, <code>isAnnotation()</code>, and <code>isEnum()</code> to <code>InnerClass</code>.  I was
even able to test <code>isEnum()</code>!
</p>

<p>
Rev'ed up the release number to 1.2.1 <i>(-beta1)</i> and adjusted the Release Plan.
</p>
</dd>
<dt><a name="2007-05-23">May 23, 2007</a></dt>
<dd>
<p>
Renamed <code>SignatureHelper</code> to <code>DescriptorHelper</code>.  I used the word <i>signature</i>
in its non-java sense of a method's identifier and argument types and order.
But Java 1.5 has a specific structure in the <code>.class</code> file named <i>signature</i> to
represent information about type parameters of generics.  Since my previous
<code>SignatureHelper</code> was manipulating <i>descriptor</i> constructs, I renamed it
<code>DescriptorHelper</code> to prevent confusion.  I will introduce a new
<code>SignatureHelper</code> later to deal with the new <i>signature</i> constructs.
</p>

<p>
I took this opportunity to move some of the functionality that only dealt with
class names to the new helper <code>ClassNameHelper</code>.  I suspect that
<code>SignatureHelper</code> will need it too, so it makes sense to have it in some shared
location instead of tying <code>DescriptorHelper</code> and <code>SignatureHelper</code> together
somehow.
</p>
</dd>
<dt><a name="2007-05-22">May 22, 2007</a></dt>
<dd>
<p>
Fixed the copyright notice that was missing from some of the newest files.
</p>

<p>
Added <code>Signature_attribute</code>, <code>LocalVariableTypeTable_attribute</code>, and
<code>LocalVariableType</code> to support generics.
</p>
</dd>
<dt><a name="2007-05-15">May 15, 2007</a></dt>
<dd>
<p>
Got a new IntelliJ license from JetBrains.  Thanks Jetbrains!
</p>
</dd>
<dt><a name="2007-05-14">May 14, 2007</a></dt>
<dd>
<p>
Removed extra-class dependencies on access level constants in <code>Feature_info</code>
and <code>Classfile</code> and used accessors instead.
</p>

<p>
Used specialized generics in <code>ClassMetrics</code>.
</p>

<p>
Asked JetBrains to renew my open source license for IntelliJ.
</p>
</dd>
<dt><a name="2007-05-13">May 13, 2007</a></dt>
<dd>
<p>
Added <code>Field_info.isEnum()</code>.
</p>

<p>
Fixed <code>Feature_info</code> to account for the new "synthetic" access flag for fields
and methods.
</p>
</dd>
<dt><a name="2007-05-11">May 11, 2007</a></dt>
<dd>
<p>
Moved <code>ClassfileLoaderDispatcher</code> actions to a first-class enum instead of an
inner class.
</p>
</dd>
<dt><a name="2007-05-10">May 10, 2007</a></dt>
<dd>
<p>
Implemented <code>EnclosingMethod_attribute</code> to handle "EnclosingMethod" attributes
of classes.  Changed the <code>classfile</code> DTD to reflect the new attribute.
</p>

<p>
Fixed some tests that dealt with the <code>ldc</code> instruction.
</p>
</dd>
<dt><a name="2007-05-09">May 09, 2007</a></dt>
<dd>
<p>
Added a test for <code>Classfile.isAnnotation()</code>, including a sample annotation
class that the tests can use.
</p>
</dd>
<dt><a name="2007-05-05">May 05, 2007</a></dt>
<dd>
<p>
Renamed the test data class <code>TestEnum</code> to <code>testenum</code> to highlight that it is
not a regular class but just a construct to test parsing of <code>.class</code> files.
</p>
</dd>
<dt><a name="2007-05-03">May 03, 2007</a></dt>
<dd>
<p>
Added support for enum and annotation access modifiers for classes.  I put
together a test for the <code>ACC_ENUM</code> flag, but not for the <code>ACC_ANNOTATION</code>
flag yet.  A lot of this Java 1.5 support work is not going to be tested: it is
just too hard to generate all the possible byte streams for all the structures.
</p>
</dd>
<dt><a name="2007-04-30">April 30, 2007</a></dt>
<dd>
<p>
Changed <code>AttributeFactory</code> to use a Java enum instead of string constants when
deciding which <code>Attribute_info</code> subclass to instantiate.  Right now, the enum
is a public standalone enum and <code>AttributeFactory</code> is only one static method.
I'm thinking of combining them somehow, maybe make the enum a private enum of
<code>AttributeFactory</code>.
</p>
</dd>
<dt><a name="2007-04-27">April 27, 2007</a></dt>
<dd>
<p>
Made <code>Code_attribute</code> implement <code>Iterable</code> so I can use Java 1.5's for-each
loop to iterate over instructions.
</p>

<p>
Moved processing of <code>Instruction</code> in <code>XMLPrinter</code> out of <code>visitCode_attribute()</code>
and in to where it belongs: <code>visitInstruction()</code>.
</p>
</dd>
<dt><a name="2007-04-26">April 26, 2007</a></dt>
<dd>
<p>
Modified <code>com.jeantessier.classreader.XMLPrinter</code> so it shows custom attributes
and their contents.
</p>
</dd>
<dt><a name="2007-04-17">April 17, 2007</a></dt>
<dd>
<p>
Fixed the documentation for <code>JarJarDiff</code> (both CLI and Ant task) and
<code>ClassClassDiff</code>.  I also realized I had not updated the documentation of the
Ant tasks that is on the website, so I fixed it too.
</p>
</dd>
<dt><a name="2007-04-13">April 13, 2007</a></dt>
<dd>
<p>
I have been using <a target="_blank" href="http://jmock.org/">jMock</a> at work and it is very
interesting.  The syntax takes some getting used to, but I might actually
consider using it on Dependency Finder.
</p>
</dd>
<dt><a name="2007-04-11">April 11, 2007</a></dt>
<dd>
<p>
Fixed Ant build files to place the WebWork webapp WAR file in the <code>dist</code>
directory, next to the other distribution files.
</p>
</dd>
<dt><a name="2007-04-10">April 10, 2007</a></dt>
<dd>
<p>
Added a Fit test for the merging behavior of <code>NodeFactory</code>.
</p>
</dd>
<dt><a name="2007-04-05">April 05, 2007</a></dt>
<dd>
<p>
Figured a way to set properties for Ant targets within IntelliJ.  On other
platforms I've used, Windows and Linux, IntelliJ IDEA gets the environment
variables, but not on Mac OS X for some reason.  On the Mac, I have to set them
explicitly in the project.
</p>

<p>
Also on Mac OS X, FitLibrary tests have trouble copying some of the images in
the <code>files</code> subfolder, which has a <code>.svn</code> subfolder with Subversion-related
files.  Some of these are read-only and subsequent runs of the test suite has
trouble overwriting them again and again.  I had to add a <code>&lt;chmod&gt;</code>
task in <code>build.test.xml</code> to circumvent this.
</p>

<p>
Finally, the Mac OS X has timestamps on files with a resolution to the second.
One test was waiting only 50msec and so was failing on this platform.  I've
raised the sleep time to a full second, but I'm a little concerned at making
the tests take even longer.
</p>

<p>
Released version 1.2.0.
</p>
</dd>
<dt><a name="2007-04-04">April 04, 2007</a></dt>
<dd>
<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>IntelliJ IDEA</td>
        <td>:</td>
        <td>6.0.4</td>
        <td>-></td>
        <td>6.0.5</td>
    </tr>
</table>
</blockquote>

<p>
But it seems IntelliJ IDEA on a Mac doesn't get the environment variables the
way it does on Windows or Linux.  As a result, Ant targets don't execute
correctly.
</p>
</dd>
<dt><a name="2007-03-30">March 30, 2007</a></dt>
<dd>
<p>
Found a bug with OOMetricsGUI where the names of packages, classes, and
features are all prefixed with "com.jeantessier.metrics.Metrics".  It turns out
the cell renderer from Swing calls <code>toString()</code> on the object being redered, in
my case they are <code>Metrics</code> objects and their <code>toString()</code> method adds a lot of
debug information to the string.  I modified <code>OOMetricsTableModel</code> to insert
only the name of the <code>Metrics</code> in the first column instead of the <code>Metrics</code>
itself.
</p>

<p>
This bug was in Release 1.1.1 and has been around for almost two years before I
noticed it.
</p>
</dd>
<dt><a name="2007-03-23">March 23, 2007</a></dt>
<dd>
<p>
Used an <code>Enum</code> for the actions in <code>ClassfileLoaderDispatcher</code> so test error
messages would be more significative.  Previously, they were integers. 
</p>

<p>
Downgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>FitLibrary</td>
        <td>:</td>
        <td>20070217</td>
        <td>-></td>
        <td>20060116</td>
    </tr>
</table>
</blockquote>
</dd>
<dt><a name="2007-03-22">March 22, 2007</a></dt>
<dd>
<p>
I'm having a hard time getting all the tests to work with the new FitLibrary.
I'm thinking of reverting it for now.  I'll figure it out after I've launched
version 1.2.0 of Dependency Finder.
</p>

<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>Log4J</td>
        <td>:</td>
        <td>1.2.13</td>
        <td>-></td>
        <td>1.2.14</td>
    </tr>
    <tr>
        <td>Tomcat</td>
        <td>:</td>
        <td>5.5.17</td>
        <td>-></td>
        <td>6.0.10</td>
    </tr>
</table>
</blockquote>
</dd>
<dt><a name="2007-03-20">March 20, 2007</a></dt>
<dd>
<p>
Accessing fields of other classes is bad.  Even those of your superclasses.  I
just got bit by this with some of my <code>DoFixture</code> subclasses.  They called
<code>setSystemUnderTest()</code> to set it, but were accessing <code>systemUnderTest</code> directly
instead of calling <code>getSystemUnderTest()</code> like they should.  Of course, the
latest version of FitLibrary tightened access to this field and now my code is
broken.  Luckily, the easy fix is to get it through the accessor and everything
becomes alright.
</p>

<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>FitLibrary</td>
        <td>:</td>
        <td>20060116</td>
        <td>-></td>
        <td>20070217</td>
    </tr>
</table>
</blockquote>
</dd>
<dt><a name="2007-03-18">March 18, 2007</a></dt>
<dd>
<p>
I tried to upgrade Tomcat and FitLibrary as part of setting up my environment
on MacOS X.  Tomcat changed its directory structure between versions 5.5.17 and
6.0.10.  FitLibrary changed some of its code so my code no longer compiles
against the latest version, <code>FitLibraryRunner20070217</code>.
</p>
</dd>
<dt><a name="2007-03-16">March 16, 2007</a></dt>
<dd>
<p>
I got a Mac for my next laptop.  I'm going to switch development back and forth
between my Windows desktop and my Mac laptop.
</p>
</dd>
<dt><a name="2007-03-14">March 14, 2007</a></dt>
<dd>
<p>
Refactored <code>CycleDetector</code> to have better logging so maybe I can find what's
the problem when looking for cycles in large graphs.  I also simplified <code>Cycle</code>
slightly.
</p>
</dd>
<dt><a name="2007-03-09">March 09, 2007</a></dt>
<dd>
<p>
Finished documentation for <code>ClassClassDiff</code> and <code>DependencyGraphToRDF</code> in Tools
docs.
</p>

<p>
Refactored common parts of <code>com.jeantessier.diff</code> to use specialized generic
structures instead of unqualified ones.
</p>
</dd>
<dt><a name="2007-03-08">March 08, 2007</a></dt>
<dd>
<p>
Added documentation for <code>ClassClassDiff</code> and <code>DependencyGraphToRDF</code> to the
Tools docs.
</p>

<p>
Refactored common parts of <code>ClassClassDiff</code> and <code>JarJarDiff</code> into a new
abstract base class.
</p>
</dd>
<dt><a name="2007-03-01">March 01, 2007</a></dt>
<dd>
<p>
Fixed <code>DependencyGraphToRDF</code> so at least it runs and generates some output.  I
still have no way to verify the validity of its output.
</p>
</dd>
<dt><a name="2007-02-28">February 28, 2007</a></dt>
<dd>
<p>
Tech docs.  Still need to document:
</p>

<ul>
<li><code>ClassClassDiff</code></li>
<li><code>DependencyGraphToRDF</code></li>
</ul>

<p>
<code>DependencyGraphToRDF</code> appears broken and I have no way to verify the validity
of its output.
</p>
</dd>
<dt><a name="2007-02-23">February 23, 2007</a></dt>
<dd>
<p>
Use the new (in JDK 1.5) <code>Class.getSimpleName()</code> instead of cutting it out
myself as I used to.  I also added a similar method on objects that tend to
model classes, like <code>Class_info</code>, <code>Classfile</code>, and <code>ClassNode</code>.
</p>
</dd>
<dt><a name="2007-02-22">February 22, 2007</a></dt>
<dd>
<p>
I noticed that calling CLI commands with the <code>-version</code> switch when the command
has mandatory parameters or switches resulted in an error message and no
version information.  I reorganized the command-line parsing logic so it
collects error messages in a manner that does not prevent processing a
<code>-version</code> or a <code>-help</code> switch.
</p>
</dd>
<dt><a name="2007-02-21">February 21, 2007</a></dt>
<dd>
<p>
Fixed the <code>ParameterStraregy</code> for <code>ClassReader</code>, <code>DependencyClosure</code>,
<code>DependencyCycles</code>, <code>DependencyMetrics</code>, and <code>DependencyReporter</code>.  When I
refactored the CLI into <code>Command</code> subclasses, I inadvertently removed the
constraint that these tools require at least one file to work on.  I looked at
the dependencies on <code>ParameterStrategy</code> constructors between version 1.1.1 and
the latest code and I could determine which CLI commands needed a different
strategy from the others.
</p>

<p>
Created a launch script for Log4J's Chainsaw.  Between times that I actually
need to look at logs to debug something, I keep forgettting how to start it.
This way, I don't have to remember anything.
</p>
</dd>
<dt><a name="2007-02-16">February 16, 2007</a></dt>
<dd>
<p>
Tech doc for CLI version of <code>DependencyCycles</code>.  Changed <i>scope</i>
switches / attributes to <i>start</i> ones instead, similar to <code>DependencyClosure</code>.
</p>

<p>
Changed <code>CommandLine.getSwitch()</code> to throw an <code>IllegalArgumentException</code>
instead of a checked <code>CommandLineException</code> when it cannot resolve a switch
name.  This simplified the signature of many methods that deal with setting up
the <code>CommandLine</code> object in the CLI.
</p>

<p>
Fixed a bug in <code>DependencyCycles</code> where it was opening its own writer instead
of using the one setup by its superclass.  Revised all writer usage across CLI.
</p>
</dd>
<dt><a name="2007-02-15">February 15, 2007</a></dt>
<dd>
<p>
Minor refactoring in the GUI code to remove warnings.
</p>
</dd>
<dt><a name="2007-02-08">February 08, 2007</a></dt>
<dd>
<p>
Modified <code>extract.jsp</code> so the webapp can filter out dependencies at extraction
time too.  I also changed the default values of <code>showSource</code> and <code>showFile</code> to
<code>true</code>.  It makes more sense to show these values while someone is trying to
configure Dependency Finder and hide them later, if needed.
</p>
</dd>
<dt><a name="2007-02-05">February 05, 2007</a></dt>
<dd>
<p>
Someone raised a problem with <code>JarJarDiff</code> and <code>PublishedDiffToHTML.xsl</code>.  I
was able to reproduce their problem, but when I looked how it works in the
latest version, I found some bad text in the <code>Tools</code> documentation as well as
the documentation of the matching Ant task.  I want to remind everyone that in
version 1.2.0, you won't use XSLT to narrow down the diff report but do it
right inside <code>JarJarDiff</code> instead with the <i>level</i> switch.
</p>

<p>
Worked on documenting the new <code>AliasSwitch</code>.
</p>
</dd>
<dt><a name="2007-02-02">February 02, 2007</a></dt>
<dd>
<p>
Found another competitor, and curiously enough, they're called
<a target="_blank" href="http://jarjar.sourceforge.net/">JarJar</a>.  There are even
instructions on how to use it to find
<a target="_blank" href="http://www.sixlegs.com/blog/java/depfind.html">JAR-to-JAR dependencies</a>.
</p>
</dd>
<dt><a name="2007-01-29">January 29, 2007</a></dt>
<dd>
<p>
Changed the next version number from 1.1.2 to 1.2.0.  The scope of changes
warrants a higher version number.
</p>

<p>
Added package comment to <code>com.jeantessier.dependency</code> to give an overview of
the package hierarchy.  Maybe that would better belong in an <code>overview.html</code>
file, I have fully made up my mind, yet.
</p>
</dd>
<dt><a name="2007-01-26">January 26, 2007</a></dt>
<dd>
<p>
New <code>-echo</code> command-line switch for all CLI commands.
</p>
</dd>
<dt><a name="2007-01-25">January 25, 2007</a></dt>
<dd>
<p>
Received praise for Dependency Finder from Peter Lenahan, Technical Director,
Information Builder, Inc.  I've added it to the website.
</p>
</dd>
<dt><a name="2007-01-16">January 16, 2007</a></dt>
<dd>
<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>IntelliJ IDEA</td>
        <td>:</td>
        <td>6.0.2</td>
        <td>-></td>
        <td>6.0.4</td>
    </tr>
</table>
</blockquote>
</dd>
<dt><a name="2007-01-06">January 06, 2007</a></dt>
<dd>
<p>
Updated the copyright notice to 2007.
</p>
</dd>
<dt><a name="2007-01-05">January 05, 2007</a></dt>
<dd>
<p>
Working on release instructions with Subversion instead of CVS.
</p>
</dd>
<dt><a name="2007-01-03">January 03, 2007</a></dt>
<dd>
<p>
Added sample graphs as XML documents for one example in the Developer Guide and
for the graph used by the webapp tests.
</p>
</dd>
<dt><a name="2007-01-02">January 02, 2007</a></dt>
<dd>
<p>
Fixed some of the build files so running Clover analysis doesn't clear Emma
reports, or vice versa.
</p>
</dd>
<dt><a name="2006-12-30">December 30, 2006</a></dt>
<dd>
<p>
Finished refactoring the CLI commands.  Made some fixed to the tools
documentation in the process.
</p>

<p>
Adapted the build file for Clover for Clover 1.3 and streamlined the flow to
generate a coverage analysis report.  Emma copies instrumented files to a
separate directory, but I can't seem to get Clover to do the same.  Since some
of the metrics and API difference tests operate on compiled Dependency Finder
classes themselves, the instrumentation throws them off.  But the resulting
code coverage analysis seems close enough just the same.
</p>
</dd>
<dt><a name="2006-12-29">December 29, 2006</a></dt>
<dd>
<p>
Validate <code>-maximize</code> and <code>-minimize</code> switches to <code>DependencyExtractor</code>, just
like in <code>DependencyReporter</code>, complete with Fit tests.
</p>

<p>
Clean up Ant targets across build files and clean up documentation.  In the
process, I found a typo where a '*' was not escaped properly and the HTML
generator could not replace the encoded sequence with a '*' in the output.
</p>

<p>
Listed third-party packages in the Developer Guide, including some tentative
version numbers that are known to work with Dependency Finder.
</p>

<p>
Looked at fixing the Clover code coverage build file.  Got rid of the section
on jcoverage, since I can't seem to find a version of it that does not require
Eclipse.
</p>

<p>
Added a link to my LinkedIn profile at the top of my "Jean's Journal" blog.
<a target="_blank" href="http://www.linkedin.com/in/jeantessier"><img border="0" src="http://www.linkedin.com/img/webpromo/btn_liprofile_blue_80x15.gif" /></a><br />
</p>
</dd>
<dt><a name="2006-12-28">December 28, 2006</a></dt>
<dd>
<p>
New <code>AliasSwitch</code> to handle command-line switches that are simply an alias for
a collection of other switches.  This way, <code>com.jeantessier.commandline</code> can
handle aliases and their rendering in usage messages instead of each individual
CLI command.  I modified <code>DependencyReporter</code> and <code>DependencyMetrics</code> to use
the new aliasing mechanism.  I had to modify <code>CommandFixture</code> so I could test
command-line parsing and alias configurations as part of the Fit tests.
</p>

<p>
I refactored the buffer handling in <code>com.jeantessier.commandline.Printer</code> to a
new class <code>com.jeantessier.text.PrinterBuffer</code>.  Other printers will be able
to use it too to remove code duplication between them.  I already modified
<code>com.jeantessier.diff.Printer</code> and <code>com.jeantessier.diff.ListDiffPrinter</code>.
Other printers will take longer because they are wrappers around <code>PrintWriter</code>
instead of <code>StringBuffer</code>.
</p>

<p>
Figured out how to exclude sample classes that are only test data from Emma
reports.  I cleaned up <code>build.emma.xml</code> and the procedure for running the
coverage report to make it much simpler.  I no longer need to inovke a separate
target from <code>build.text.xml</code> to generate the rest of the test data.
</p>
</dd>
<dt><a name="2006-12-23">December 23, 2006</a></dt>
<dd>
<p>
Unit tests for <code>MultipleValuesSwitch</code>.
</p>
</dd>
<dt><a name="2006-12-18">December 18, 2006</a></dt>
<dd>
<p>
Refactoring <code>CommandLine</code> to verify satisfaction of command-line switches.
</p>
</dd>
<dt><a name="2006-12-16">December 16, 2006</a></dt>
<dd>
<p>
Unit tests around command-line parsing to prepare for upcoming support for
aliasing.
</p>
</dd>
<dt><a name="2006-12-15">December 15, 2006</a></dt>
<dd>
<p>
Push <code>isSatisfied()</code> behavior in <code>CommandLineSwitch</code> implementations.
</p>
</dd>
<dt><a name="2006-12-14">December 14, 2006</a></dt>
<dd>
<p>
Refactored <code>DependencyMetrics</code> as part of the grand CLI refactoring.
</p>

<p>
Refactored the control flow for parsing and validating the command-line in
<code>Command</code>.  One problem I still have is that multiple errors trigger multiple
printing of the usage text.
</p>
</dd>
<dt><a name="2006-12-13">December 13, 2006</a></dt>
<dd>
<p>
Refactored <code>DependencyClosure</code>, <code>DependencyCycles</code>, and <code>DependencyReporter</code>
as part of the grand CLI refactoring.
</p>

<p>
<a target="_blank" href="http://emma.sourceforge.net">Emma</a> recommends that you use an <code>enabled</code>
attribute on <code>&lt;emma&gt;</code> tags to control whether instrumentation is done or not.
The attribute takes its value from a flag property in the <code>build.xml</code> file
under a special target that you put on the command-line, before the <code>intrument</code>
or <code>report</code> targets.  This way, the flag gets set in the <code>emma</code> target so that
it enables the <code>&lt;emma&gt;</code> tags in other other targets.
</p>

<p>
My Emma-related Ant tasks are dedicated to doing code coverage, so I end up
always calling them with <code>emma</code> on the command-line.  Since I never turn the
flag off, I removed it altogether and got rid of the <code>emma</code> target.  Now, I
will be able to trigger the code coverage targets from within IntelliJ.
</p>

<p>
Refactored <code>Command</code> to remove duplication when populating groups of related
switches, such as for start and stop criteria and for filtering.
</p>
</dd>
<dt><a name="2006-12-11">December 11, 2006</a></dt>
<dd>
<p>
Reorganzied the build files to get all test reports in one location.
</p>
</dd>
<dt><a name="2006-12-10">December 10, 2006</a></dt>
<dd>
<p>
Refactored <code>ClassMetrics</code> as part of the grand CLI refactoring.
</p>
</dd>
<dt><a name="2006-12-09">December 09, 2006</a></dt>
<dd>
<p>
When I reorganized <code>build.xml</code>, I changed the project's name from
"DependencyFinder" to "Dependency Finder" with a space.  Now, I use the project
name to build the name of the JAR file when creating a distribution, so now the
JAR file had a space in its name.  Yuck!  So I changed the name back to
"DependencyFinder", without the space.
</p>

<p>
Refactored <code>ClassFinder</code> and <code>ClassList</code> as part of the grand CLI refactoring.
</p>

<p>
Cleaned up dependencies between Ant targets for Emma coverage analysis.
</p>
</dd>
<dt><a name="2006-12-05">December 05, 2006</a></dt>
<dd>
<p>
Reorganized <code>build.xml</code> into a number of build file.  This way, someone can
compile Dependency Finder with a minimum of third-party libraries, namely
the Servlets API and WebWork, instead of needing all the libraries used for
testing like Fit and HttpUnit.
</p>

<p>
I should get rid of the CVS report tasks eventually, now that everything is in
Subversion.  I don't know if I will create equivalent reports like Subversion,
given that SourceForge already has some statistics on source control.
</p>
</dd>
<dt><a name="2006-12-04">December 04, 2006</a></dt>
<dd>
<p>
Finally got <a target="_blank" href="http://emma.sourceforge.net">Emma</a> to run.  Looking at the
coverage data, I found some test classes that were not included in the
appropriate <code>TestAll</code> class.
</p>
</dd>
<dt><a name="2006-12-03">December 03, 2006</a></dt>
<dd>
<p>
Experimented with <a target="_blank" href="http://emma.sourceforge.net">Emma</a> for code coverage.
</p>
</dd>
<dt><a name="2006-12-02">December 02, 2006</a></dt>
<dd>
<p>
Tried to run the code coverage analysis with
<a target="_blank" href="http://jcoverage.com">jcoverage</a>, but my version (1.0.5) does not generate
valid Java 5 code when it instruments the code.  I was not able to find a more
recent version; the jcoverage website only mentions Eclipse plugins.  I am
going to try using <a target="_blank" href="http://emma.sourceforge.net">Emma</a> instead.
</p>
</dd>
<dt><a name="2006-12-01">December 01, 2006</a></dt>
<dd>
<p>
Fixed test for <code>ClassClassDiff</code>.  Had to move <code>-xml</code> switch out of <code>Command</code>
and back into <code>ClassReader</code> and <code>DependencyExtractor</code> to account for tools that
will not support multiple output formats, namely <code>ClassClassDiff</code> and
<code>JarJarDiff</code> that only output XML.
</p>
</dd>
<dt><a name="2006-11-30">November 30, 2006</a></dt>
<dd>
<p>
Major refactoring of <code>ClassClassDiff</code> to use common code from <code>Command</code>.
</p>
</dd>
<dt><a name="2006-11-29">November 29, 2006</a></dt>
<dd>
<p>
Better use of the facilities in FitLibrary to minimize the amount of fixture
code and maximize reuse.
</p>

<p>
Major refactoring of <code>DependencyExtractor</code> and <code>ClassReader</code> to pull common
code into the new base class <code>Command</code>.
</p>
</dd>
<dt><a name="2006-11-28">November 28, 2006</a></dt>
<dd>
<p>
Started refactoring the CLI classes, with the help of FIT tests.  It hints that
more refactoring is needed in <code>com.jeantessier.commandline</code>.
</p>
</dd>
<dt><a name="2006-11-19">November 19, 2006</a></dt>
<dd>
<p>
Refactored <code>com.jentessier.commandline</code> to simplify printers for usage and
echo of parsed command-line.  The latter still doesn't echo parameters; it
only does switches at this time.
</p>

<p>
Refactored <code>com.jentessier.commandline</code> to store parameters in the
<code>ParameterStrategy</code> instances instead of the <code>CommandLine</code>.  Just like switch
values are stored in the <code>CommandLineSwitch</code> objects, now the parameters are
also store outside the <code>CommandLine</code> object.
</p>

<p>
Cleaned up classes in the CLI and Ant tasks packages.
</p>

<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>IntelliJ IDEA</td>
        <td>:</td>
        <td>6.0.1</td>
        <td>-></td>
        <td>6.0.2</td>
    </tr>
</table>
</blockquote>
</dd>
<dt><a name="2006-11-18">November 18, 2006</a></dt>
<dd>
<p>
Added <code>com.jeantessier.commandline.TextPrinter</code> to echo the command-line, as
perceived by a program.  Some recent problems with the CLI stemmed from
improper escaping of shell metacharacters.  I hope that with some kind of
<code>-echo</code> switch users will be able to see what values made it into the program.
</p>

<p>
I had to rework <code>CommandLineSwitch</code> so each switch contained its own name.
This gave me the occasion to add unit tests to that package.
</p>
</dd>
<dt><a name="2006-11-16">November 16, 2006</a></dt>
<dd>
<p>
Added filtering to <code>DependencyExtractor</code>.  This came at the suggestion of a
user that it might help deal with very large graphs by removing dependencies
that do not really bring new information, like dependencies on classes in the
JDK for instance.  I added the functionality to both the CLI and the Ant task,
but I will also need to do something about the webapp and the GUI.
</p>
</dd>
<dt><a name="2006-11-13">November 13, 2006</a></dt>
<dd>
<p>
Simplified the command-line switch processing for <code>DependencyFinder</code>,
<code>DependencyCycles</code>, and <code>DependencyMetrics</code>.  I need to build aliasing support
in <code>com.jeantessier.commandline</code> instead of handling aliases in each CLI tool's
<code>main()</code> method.
</p>

<p>
I also adjusted the output form <code>DependencyMetrics</code> so it does not show NaN or
infinity when ratios involve a zero.
</p>

<p>
I am seeing again the case where the report from <code>DependencyMetrics</code> shows
strange numbers.  The number under "outbound link(s)" is the sum of the
breakdown under "inbound link(s)" and vice versa.  I remember looking into this
a while back and somehow convincing myself that this was right, but I am still
confused, which probably means I need to fix these sections so they are more
intuitive.
</p>

<p>
I also removed the <code>-all</code> switch from the CLI <code>OOMetrics</code>.
</p>
</dd>
<dt><a name="2006-11-12">November 12, 2006</a></dt>
<dd>
<p>
Removed <code>-all</code> and <code>-show-all</code> switches from <code>DependencyReporter</code>,
<code>DependencyMetrics</code>, and <code>DependencyCycles</code>.  I also removed their equivalent
in the matching Ant tasks (<code>DependencyCycles</code> doesn't have an Ant task yet).
Now, they act as if <code>-all</code> is on unless the user explicitly specifies at least
one of the scope or filter switches (<code>-package-scope</code>, etc.).  The same logic
applies to <code>-show-all</code>: <code>DependencyReporter</code> will show everything unless the
user explicitly requests only certain things.  This means that if you give now
switches to <code>DependencyReporter</code>, it will print out the input graph as is (but
in text instead of XML).  I believe these defaults make more sense than the
previous ones that would print nothing unless you remembered to actually ask
for something.
</p>
</dd>
<dt><a name="2006-11-11">November 11, 2006</a></dt>
<dd>
<p>
I want to write tests for the improvements I did to <code>XMLPrinter</code> for
<code>Instruction</code> and to <code>CodeDependencyCollector</code>, but the classes in
<code>com.jeantessier.classreader</code> were among the first I wrote for Dependency
Finder and they are not easy to test.  Their constructor takes a
<code>DataInputStream</code> with the binary data for a complete class.  This makes it
very hard to get test data without building actual Java classes and compiling
them.  Especially when trying to test specific instructions.  I will need to
change all of them so I can construct temporary structures in tests, but that
will take a while and I don't want to delay the upcoming release more than I
have to.
</p>
</dd>
<dt><a name="2006-11-09">November 09, 2006</a></dt>
<dd>
<p>
I have half a mind to unify the HTML styles for dependency graphs in the webapp
versus the XSLT transform used by the CLI and the Ant tasks.  I think the
style in the webapp looks better in the end.
</p>
</dd>
<dt><a name="2006-11-08">November 08, 2006</a></dt>
<dd>
<p>
It turns out the problem with closures comes down to Windows batch files strip
'^' characters from parameters.  So if you want to filter out <code>java.*</code> with a
regular espression <code>/^java/</code>, the Java program only gets <code>/java/</code> and filters
everything with "java" anywhere in it.  I filed a
<a target="_blank" href="http://sourceforge.net/tracker/index.php?func=detail&aid=1592817&group_id=43305&atid=435884">bug report (1592817)</a> for it.
</p>

<p>
For now, the best solution is to enclose regular expressions in double quotes,
such as <code>"/^java/"</code>, so the shell and script don't strip anything.  Similarily
under Unix, if you regular expression contains many meta-characters like '\',
'(', or '[', you need to escape them properly.  Maybe there is no fix for it
besides education.  I should add a note on this in the documentation.
</p>
</dd>
<dt><a name="2006-11-07">November 07, 2006</a></dt>
<dd>
<p>
Came upon an interesting consequence of using JDK 1.5+.  Take this simple
class:
</p>

<pre>
    package test;
    &nbsp;
    public class Test {
        public void test() {
            Class[] array = new Class[1];
            array[0] = String.class;
        }
    }
</pre>

<p>
If I compile it using JDK 1.4 and then run <code>DependencyExtractor</code> on it, I get:
</p>

<pre>
    java.lang *
        Class *
            <-- test.Test.class$(java.lang.String)
            <-- test.Test.class$java$lang$String
            <-- test.Test.test()
            forName(java.lang.String) *
                <-- test.Test.class$(java.lang.String)
        ClassNotFoundException *
            <-- test.Test.class$(java.lang.String)
            getMessage() *
                <-- test.Test.class$(java.lang.String)
        NoClassDefFoundError *
            NoClassDefFoundError(java.lang.String) *
                <-- test.Test.class$(java.lang.String)
        Object *
            <-- test.Test
            Object() *
                <-- test.Test.Test()
        String *
            <-- test.Test.class$(java.lang.String)
            <-- test.Test.test()
    test
        Test
            --> java.lang.Object *
            Test()
                --> java.lang.Object.Object() *
            class$(java.lang.String)
                --> java.lang.Class *
                --> java.lang.Class.forName(java.lang.String) *
                --> java.lang.ClassNotFoundException *
                --> java.lang.ClassNotFoundException.getMessage() *
                --> java.lang.NoClassDefFoundError.NoClassDefFoundError(java.lang.String) *
                --> java.lang.String *
                <-- test.Test.test()
            class$java$lang$String
                --> java.lang.Class *
                <-- test.Test.test()
            test()
                --> java.lang.Class *
                --> java.lang.String *
                --> test.Test.class$(java.lang.String)
                --> test.Test.class$java$lang$String
</pre>

<p>
The compiler created synthetic features to store the reference to
<code>String.class</code>.  All this machinery adds a lot of complexity to the dependency
graph.
</p>

<p>
In JDK 1.5, they expanded the VM instructions to handle this case and now the
compiler can generate much simpler bytecode.  If I compile the class with JDK
1.5 and then run <code>DependencyExtractor</code> on it, I now get:
</p>

<pre>
    java.lang *
        Class *
            <-- test.Test.test()
        Object *
            <-- test.Test
            Object() *
                <-- test.Test.Test()
    test
        Test
            --> java.lang.Object *
            Test()
                --> java.lang.Object.Object() *
            test()
                --> java.lang.Class *
</pre>

<p>
Notice the conspicuous absence of <code>java.lang.String</code> from the graph.  This is
because Dependency Finder does not understand the Java 1.5 features of the
bytecode, yet.
</p>

<p>
I make a quick change to <code>CodeDependencyCollector</code> so it could at least
account for the new behavior of two VM instructions (<code>ldc</code> and <code>ldc_w</code>) in
Java 1.5.  With this change, <code>DependencyExtractor</code> now gives this much simpler,
yet accurate graph:
</p>

<pre>
    java.lang *
        Class *
            <-- test.Test.test()
        Object *
            <-- test.Test
            Object() *
                <-- test.Test.Test()
        String *
            <-- test.Test.test()
    test
        Test
            --> java.lang.Object *
            Test()
                --> java.lang.Object.Object() *
            test()
                --> java.lang.Class *
                --> java.lang.String *
</pre>

<p>
While working on <code>ldc</code> and <code>ldc_w</code> handling, I also realized the XML output for
instructions wasn't descriptive enough to let me know which entry they are
referencing in the constant pool.  In the case I was looking at, the
instruction could point to a <code>class_info</code> structure or to a <code>Utf8_info</code>
structure and I couldn't tell which one it was.  So I added an <code>index</code>
attribute to the <code>&lt;instruction&gt;</code> tag so whoever reads the file can see
exactly what the instruction is referencing.
</p>

<p>
Someone contacted me with an issue regarding closures.  Apparently, filtering
is not working correctly.  I tried to recreate the problem, but it worked just
fine for me.  These kinds of bugs are always annoying to work on since I cannot
reproduce it to examine it.
</p>
</dd>
<dt><a name="2006-11-03">November 03, 2006</a></dt>
<dd>
<p>
Tried to convert the tutorial to HTML using
<a target="_blank" href="http://openoffice.org/">OpenOffice</a> instead of PowerPoint.  The resulting
HTML works in more browsers, but the embedded images look crappy.
</p>
</dd>
<dt><a name="2006-10-31">October 31, 2006</a></dt>
<dd>
<p>
Did a quick study of the download rates for Dependency Finder, based on the
statistics from SourceForge.  It's nice how downloads flow from one release to
the next, except that every once in a while, some of the old releases still get
downloads even when there are multiple new releases after them.  I wonder what
could motivate someone to fetch an old release.  Release 1.1.1 is holding up at
over 300 downloads per month; I'm happy.
</p>

<p>
Cleaned up <code>HTMLCyclePrinter</code>.
</p>
</dd>
<dt><a name="2006-10-29">October 29, 2006</a></dt>
<dd>
<p>
More closure functional tests to test hyperlinks in the HTML.  Also created
some functional tests for cycle detection and metrics.  I added an HTML
implementation of <code>CyclePrinter</code> to provide hyperlinks for the cycle detector
portion of the webapp.
</p>
</dd>
<dt><a name="2006-10-24">October 24, 2006</a></dt>
<dd>
<p>
Someone complained that the Tutorial only works on Microsoft products and I
should move it to open source technologies.  I'll try
<a target="_blank" href="http://openoffice.org/">OpenOffice</a> when I have some time.
</p>
</dd>
<dt><a name="2006-10-23">October 23, 2006</a></dt>
<dd>
<p>
More closure functional tests.
</p>
</dd>
<dt><a name="2006-10-20">October 20, 2006</a></dt>
<dd>
<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>WebWork</td>
        <td>:</td>
        <td>2.2</td>
        <td>-></td>
        <td>2.2.4</td>
    </tr>
</table>
</blockquote>
</dd>
<dt><a name="2006-10-19">October 19, 2006</a></dt>
<dd>
<p>
Clean up extraneous logging in <code>TestQueryBase</code>.
</p>
</dd>
<dt><a name="2006-10-18">October 18, 2006</a></dt>
<dd>
<p>
Clean up warnings in JSPs.
</p>
</dd>
<dt><a name="2006-10-11">October 11, 2006</a></dt>
<dd>
<p>
Created preliminary tests for <code>closure.jsp</code>.
</p>

<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>IntelliJ IDEA</td>
        <td>:</td>
        <td>6.0</td>
        <td>-></td>
        <td>6.0.1</td>
    </tr>
</table>
</blockquote>
</dd>
<dt><a name="2006-10-09">October 09, 2006</a></dt>
<dd>
<p>
Added hyperlinks on scoped node names in <code>HTMLPrinter</code> for the web app so the
user can narrow down the scope to a single package, class, or feature.  It is
not perfect, and sometimes behaves in surprising ways, but it is as good (or
bad) as the hyperlink on dependency names.  Note that each link simply forces
the <code>scope-includes</code> field to a certain prefix; it does not change the flags
for what is in scope, whether it's packages, classes, and/or features.
</p>

<p>
Suppose a query result has lots of packages, classes, and features.  You can
click on a class name reduces the scope to elements prefixed with that name.
In the query result, if you click on the package's name, it will expand the
scope of the query back to all elements in the package.
</p>

<p>
Modified <code>advancedquery.jsp</code> so it uses <code>HTMLPrinter</code>.  Refactored <code>TestQuery</code>
to share tests between <code>query.jsp</code> and <code>advancedquery.jsp</code>.  I also added tests
that actually follow the hyperlinks to verify they do the right thing.
</p>
</dd>
<dt><a name="2006-10-06">October 06, 2006</a></dt>
<dd>
<p>
Fixed bug where if the scope was reduced to an inferred feature of a confirmed
class, the class and its package ended up unconfirmed in the resulting
sub-graph.  <code>GraphCopier</code> and <code>GraphSummarizer</code> were using the current node's
confirmation status when copying a node a propagating it to its parent nodes
instead of creating accurate copies of the parent nodes in the first place.
</p>

<p>
Fixed the webapp's CSS stylesheet to treat visited links to inferred nodes
correctly.  The rules for <code>a:visited</code> and <code>a:hover</code> trump an explicit style
assigned via the <code>class</code> attribute.  I had to create explicit descriptions for
<code>a:visited.inferred</code> and <code>a:hover.visited</code>.
</p>
</dd>
<dt><a name="2006-10-05">October 05, 2006</a></dt>
<dd>
<p>
Adjusted dependecy printout in <code>HTMLPrinter</code> so the '*' for inferred
dependencies is not inside the <code>&lt;a&gt;</code> tag.  Also used CSS to highlight
scoped node names and subdue inferred nodes (both scoped nodes and
dependencies).
</p>
</dd>
<dt><a name="2006-10-03">October 03, 2006</a></dt>
<dd>
<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>IntelliJ IDEA</td>
        <td>:</td>
        <td>5.1.2</td>
        <td>-></td>
        <td>6.0</td>
    </tr>
</table>
</blockquote>
</dd>
<dt><a name="2006-10-01">October 01, 2006</a></dt>
<dd>
<p>
Fixed CLASSPATH in the launch scripts for JUnit to include WebWork libraries.
</p>
</dd>
<dt><a name="2006-09-29">September 29, 2006</a></dt>
<dd>
<p>
Changed classes in the <code>com.jeantessier.dependency.Printer</code> hierarchy to use
separate methods for printing scoped node names from dependency node names.
This lets me put scoped nodes in bold in the HTML output and leave dependency
names in regular font.  I should probably use CSS instead of hard-coding the
bold using <code>&lt;b&gt;</code> tags, though.
</p>

<p>
Fixed CLASSPATH in the launch scripts for JUnit to include all the libraries
needed by HttpUnit.  For the Windows batch file, I had to list all JARs
explicitly because I don't have a good way to detecting <code>*.jar</code> like I have in
Bash shell scripts.
</p>

<p>
There is a weird interaction between the JARs that breaks Commons-Logging when
using the Swing UI of JUnit.  If I don't use the automatic class reload
feature, it works just fine.  I tried playing with
<code>tests/junit/runner/excluded.properties</code> so JUnit would not reload the obvious
candidates (Commons-Logging, Jasper, even ServletUnit), but to no avail.
</p>
</dd>
<dt><a name="2006-09-27">September 27, 2006</a></dt>
<dd>
<p>
Added an <code>id</code> attribute to <code>&lt;a&gt;</code> tags from <code>HTMLPrinter</code> to help with
testing.
</p>
</dd>
<dt><a name="2006-09-20">September 20, 2006</a></dt>
<dd>
<p>
Made some progress with <code>ServletUnit</code>.  It really helped to read through the
<a target="_blank" href="http://httpunit.sourceforge.net/doc/tutorial">tutorial</a>.
<a target="_blank" href="http://httpunit.sourceforge.net/doc/tutorial/task1editor-entry.html">Step 3</a>
had the piece I was missing to correctly submit forms and navigate between
pages.
</p>
</dd>
<dt><a name="2006-09-19">September 19, 2006</a></dt>
<dd>
<p>
I starting to lose patience with <code>ServletUnit</code>.  This is a case where I can do
something in 10 minutes, but it is taking me weeks to get it under test.  This
is frustrating.  If I don't find a way to get <code>ServletUnit</code> to work soon, I
will have to drop it and go without test for the outermost layer of the UI.
</p>

<p>
I took a look at JUnit 4.1.  It uses annotations to mark the test methods and
the fixture setup and tear down code.  It would be a significant effort to
switch to JUnit 4.  Plus, I hear that support in IntelliJ and Ant is still
behind.  I think I'll stick with JUnit 3.8.2 for now.
</p>
</dd>
<dt><a name="2006-09-15">September 15, 2006</a></dt>
<dd>
<p>
I tried to fix the broken test with <code>ServletUnit</code>, but to no avail.  Instead of
navigating to the page I want by following links, I tried setting the request
parameters directly from the test, but that doesn't seem to work either.  I log
the HTML that comes back in the response, and it is as if I hadn't set any
parameters.  Something still escapes me when it comes to using <code>ServletUnit</code>.
</p>
</dd>
<dt><a name="2006-09-07">September 07, 2006</a></dt>
<dd>
<p>
Minor fix to <code>data2html.cgi</code> to remove <code>target</code> attribute from generated
&lt;a&gt; tags.
</p>
</dd>
<dt><a name="2006-09-06">September 06, 2006</a></dt>
<dd>
<p>
Got my first <code>ServletUnit</code> tests to pass.  As long as I just request a single
page, it works fine.  But when I use the controls on a page (submit button) to
navigate to another page, I get a strange <code>NullPointerException</code> from deep
within the framework.  Sigh.
</p>
</dd>
<dt><a name="2006-08-31">August 31, 2006</a></dt>
<dd>
<p>
Started writing tests using <code>ServletUnit</code>, but I can't seem to get it right.
</p>
</dd>
<dt><a name="2006-08-30">August 30, 2006</a></dt>
<dd>
<p>
Searched the web for examples of how to use <code>ServletUnit</code>.
</p>

<p>
Good news for Dependency Finder: I finally finished Half-Life 2!  >:-)
</p>
</dd>
<dt><a name="2006-08-29">August 29, 2006</a></dt>
<dd>
<p>
Downloaded <a target="_blank" href="http://httpunit.sourceforge.net/">HttpUnit</a> and checked the
documentation for <code>ServletUnit</code>.  It doesn't seem as trivial to use as I would
have hoped.
</p>
</dd>
<dt><a name="2006-08-25">August 25, 2006</a></dt>
<dd>
<p>
I want to finish putting web links in the results of the webapp, but how am I
going to test them?  I searched for "testing servlets" and "testing jsp out of
container" and found references to <code>ServletUnit</code>, a part of
<a target="_blank" href="http://httpunit.sourceforge.net/">HttpUnit</a>.
</p>
</dd>
<dt><a name="2006-08-05">August 05, 2006</a></dt>
<dd>
<p>
Investigated a little more the problems with <code>closure.jsp</code>, but I cannot seem
to reproduce the original problem.  I tried simple graphs, I tried working from
<code>com.jeantessier.dependency.NodeFactory.createClass()</code>, they all seem to work
just fine.
</p>
</dd>
<dt><a name="2006-08-04">August 04, 2006</a></dt>
<dd>
<p>
Played a bit with <a target="_blank" href="http://www.jetbrains.com/teamcity/">TeamCity</a>, by the
makers of IntelliJ IDEA.  While I was trying to set it up for Dependency
Finder, I was confronted with the fact that I create the distribution files in
the same folder as the <code>build.xml</code> file.  I should really put them in their
own folder, like <code>dist/</code>, so TeamCity can recognize them as build artifacts.
It would also align my build better with the best practices out there.
</p>
</dd>
<dt><a name="2006-07-19">July 19, 2006</a></dt>
<dd>
<p>
Fixed <code>HTMLPrinter</code> to properly escape the '$' in inner class names.  Since '$'
has special meaning in Perl regular expressions, it must be escaped otherwise
the regular expression does not match anything and you get empty results.
</p>
 </dd>
<dt><a name="2006-07-10">July 10, 2006</a></dt>
<dd>
<p>
Came back from a three-week vacation.
</p>

<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>IntelliJ IDEA</td>
        <td>:</td>
        <td>5.1.1</td>
        <td>-></td>
        <td>5.1.2</td>
    </tr>
</table>
</blockquote>
</dd>
<dt><a name="2006-06-16">June 16, 2006</a></dt>
<dd>
<p>
Looked at fixing <code>closure.jsp</code> so that it always match packages and also match
classes when looking for features.  It's not quite there yet; I will need to
think harder about this problem and why <code>closure.jsp</code> is sometimes unresponsive
or plain wrong.
</p>
</dd>
<dt><a name="2006-06-15">June 15, 2006</a></dt>
<dd>
<p>
Use specialized collections in package <code>com.jeantessier.dependency</code>.
</p>
</dd>
<dt><a name="2006-06-14">June 14, 2006</a></dt>
<dd>
<p>
Looked a little at <code>closure.jsp</code> and tried to figure out why it returns an
empty closure when I give it a perfectly valid starting point.  The classes
involved with <code>TransitiveClosureEngine</code> are not instrumented with Log4J, which
hinders me a little.  I will have to take care of that before I can
investigate further.  I also need to come up with sample data that reproduces
the problem.  I tried a trivial graph <code>a.A.a() --> b.B.b() --> c.C.c()</code> but
that one worked just fine.
</p>

<p>
I was discussing the <code>com.jeantessier.dependency.Visitor</code> hierarchy with a
colleague and complained about the complicated contract for children of
<code>VisitorBase</code>, especially for the printers.  During the discussion, it dawned
on me that I could try composition instead of inheritance.  The visitors would
delegate traversal to a stragegy, the way they do now, but they could also
delegate processing of each node to another collaborator.  The contract with
the <i>processor</i> would still be fairly complex to preserve flexibility, but
might be easier to manage.
</p>

<p>
A user raised an issue with <code>DependencyClosure</code> as they were trying to compute
a class-level outbound closure.  Some classes at the edges were missing unless
they used <code>-maximize</code> during extraction.  Without looking, it looks
suspiciously related to some
<a target="_blank" href="http://depfind.sourceforge.net/Manual.html#TrickyBehavior">tricky behavior</a>
I documented in the Manual already.
</p>
</dd>
<dt><a name="2006-06-10">June 10, 2006</a></dt>
<dd>
<p>
Functional tests for <code>com.jeantessier.dependency.MetricsGatherer</code>.
</p>
</dd>
<dt><a name="2006-06-09">June 09, 2006</a></dt>
<dd>
<p>
I decided against having <code>CycleDetector</code> summarize the graph to do
class-to-class cycle determinations.  For the CLI and Ant users, they can use
<code>DependencyReporter</code> to reduce the graph explicitly.  For the GUI and web app
versions, I will hard-code the reduction in the commands themselves.  I'll have
to see if it takes too long, maybe I can cache the reduced graph instead of
recomputing it for every call.
</p>
</dd>
<dt><a name="2006-06-08">June 08, 2006</a></dt>
<dd>
<p>
For some reason, I cannot compute closures with the web app anymore.  I will
have to investigate further.  <code>query.jsp</code> finds the node I'm interested in and
shows dependencies in and out of it.  <code>metrics.jsp</code> also sees it and can
compute measurements about it.  But when I try the same regular expression in
<code>closure.jsp</code>, I get an empty result.
</p>

<p>
There is a problem with <code>DependencyMetrics</code>.  The sub-heading under <i>outbound</i>
add up to the total for <i>inbound</i> and vice versa.  Sure enough, that's what the
code is computing.  I'll have to study my own code again to figure out what was
the original intent.  Maybe I can write some tests, this time around, to
document what it is supposed to do.
</p>
</dd>
<dt><a name="2006-06-06">June 06, 2006</a></dt>
<dd>
<p>
Today is 6/6/6!!!
</p>

<p>
Wrote a functional test to investigate finding dependency cycles at the class
or package level with a graph that goes down to the feature level.  The fact
that <code>CycleDetector</code> extends <code>VisitorBase</code>, with all its baggage, will not make
it easy to sort it all out.
</p>
</dd>
<dt><a name="2006-06-02">June 02, 2006</a></dt>
<dd>
<p>
Opened a ticket
(<a target="_blank" href="http://sourceforge.net/tracker/index.php?func=detail&aid=1499643&group_id=1&atid=200001">1499643</a>)
with SourceForge about my commit problem.  Apparently, I am not the only one.
I found at least one other ticket
(<a target="_blank" href="http://sourceforge.net/tracker/index.php?func=detail&aid=1499575&group_id=1&atid=200001">1499575</a>)
with the same problem and others are also having trouble commiting but get
different error messages.
</p>

<p>
Fixed my issue with table width in the new webapp pages for dependency cycles.
</p>

<p>
I tried to load the webapp with the dependency graph for Dependency Finder and
find class-level cycles starting at <code>com.jeantessier.classreader.Visitor</code>,
specifying it a maximum cycle length of 5.  The CPU went to 100% for over two
hours and never came back.  In the end, I had to kill Tomcat.  I'll have to
investigate why this happened and if it is a bug or just that <code>CycleDetector</code>
is not really useful in real life.
</p>

<p>
Found out SourceForge added a new permission on user accounts for Subversion
access.  I granted myself permission but it didn't work right away.  I guess
there is a propagation delay between the user management system and the
permission system.  It's all better now.
</p>

<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>Tomcat</td>
        <td>:</td>
        <td>5.5.15</td>
        <td>-></td>
        <td>5.5.17</td>
    </tr>
</table>
</blockquote>
</dd>
<dt><a name="2006-06-01">June 01, 2006</a></dt>
<dd>
<p>
Wrote a page for dependency cycles in the webapp.  I still have only a minor
issue with the layout of a table.
</p>

<p>
Cannot commit to SourceForge's Subversion for some reason.  I am getting a
<code>403 Forbidden</code> error code.
</p>
</dd>
<dt><a name="2006-05-31">May 31, 2006</a></dt>
<dd>
<p>
Wrote an Ant task for dependency cycles.
</p>
</dd>
<dt><a name="2006-05-27">May 27, 2006</a></dt>
<dd>
<p>
Added code to specify the indentation text on <code>CyclePrinter</code> classes and stream
data to a <code>Writer</code>.
</p>

<p>
Wrote a CLI tool for dependency cycles.  Next will be an Ant task, a webapp
page, and a GUI tab, not necessarily in that order.
</p>
</dd>
<dt><a name="2006-05-26">May 26, 2006</a></dt>
<dd>
<p>
Wrote a quick XML renderer for <code>Cycle</code> and an initial DTD.
</p>
</dd>
<dt><a name="2006-05-25">May 25, 2006</a></dt>
<dd>
<p>
Fixed a bug with name length-related metrics.  It was assuming method names
with parentheses in them and some of the tests were using plain names like
"foo".  I reworked the name computation so it is more reliable, for features
and for classes alike.
</p>
</dd>
<dt><a name="2006-05-18">May 18, 2006</a></dt>
<dd>
<p>
Re-did the text rendering of <code>Cycle</code> from scratch.  This time, I created unit
tests around <code>TextCyclePrinter</code>.  Getting Fit to process text somewhat properly
was more difficult than I expected.  At first, I tried using <i>check</i> rows, but
it got confused by \r\n versus \n line terminations.  Then, I tried using and
<code>ArrayFixture</code> to break down the lines of the text, but when Fit reads in the
expected cells, it strips the leading whitespace, which again breaks text
comparison.  For now, I check indentation in unit tests and general order of
the lines in Fit.
</p>
</dd>
<dt><a name="2006-05-17">May 17, 2006</a></dt>
<dd>
<p>
Added the IntelliJ logo on the website, at the request of JetBrains.  They
asked for it as a small favor and I like IntelliJ so much that it was a
no-brainer to put it up.  I really think it's the best Java IDE around at this
time.
</p>

<p>
Started working on text representation of <code>Cycle</code>.
</p>
</dd>
<dt><a name="2006-05-13">May 13, 2006</a></dt>
<dd>
<p>
Added <a target="_blank" href="http://headwaysoftware.com/products/structure101/">Structure 101</a> to
the Resources page.  I think this might be the latest incarnation of reView.
Both come from the same company and reView is no longer on their website.
</p>
</dd>
<dt><a name="2006-05-12">May 12, 2006</a></dt>
<dd>
<p>
Use specialized collections in <code>com.jeantessier.dependency.Cycle</code> and related
classes.
</p>

<p>
Added acceptance tests and code to pass a <code>SelectionCriteria</code> to
<code>CycleDetector</code> so I can use scope specifiers when looking for cycles.
</p>
</dd>
<dt><a name="2006-05-10">May 10, 2006</a></dt>
<dd>
<p>
More Fit tests to show how closures behave in the presence of a stop condition.
</p>
</dd>
<dt><a name="2006-05-06">May 06, 2006</a></dt>
<dd>
<p>
Created initial acceptance tests for dependency closures.
</p>

<p>
My license for InteliJ IDEA will expire soon.  I must renew it.  I hope they
still give out free licenses to open source projects.
</p>
</dd>
<dt><a name="2006-05-04">May 04, 2006</a></dt>
<dd>
<p>
Someone complained that the behavior of the closure engine was not intuitive.
I think I will write some acceptance tests to nail down the current behavior
and consider some of the improvements they suggested.
</p>
</dd>
<dt><a name="2006-04-20">April 20, 2006</a></dt>
<dd>
<p>
Added character count and word count for method names.  I added all the word
and character count measurements to the default <code>OOMetrics</code> configuration.
</p>
</dd>
<dt><a name="2006-04-19">April 19, 2006</a></dt>
<dd>
<p>
The online documentation of the Ant tasks had fallen behind.  I updated it to
version 1.1.1.
</p>
</dd>
<dt><a name="2006-04-18">April 18, 2006</a></dt>
<dd>
<p>
Reduced the scope for version 1.1.2 so I can get it out the door sooner, and
maybe even soon.
</p>
</dd>
<dt><a name="2006-04-17">April 17, 2006</a></dt>
<dd>
<p>
Started working on <code>WordCounter</code> to count the number of words in identifiers,
including package names.  Adjusted <code>MetricsFactory</code> to use it in computing the
number of words in package and class names.  I still need to deal with method
names.
</p>

<p>
I might have to start creating metrics for individual fields.  That might be
quite a bit of work.
</p>

<p>
Cleaned up <code>MaximumCapacityPatternCache</code> and its tests to remove unsued imports
and use specialized version of collections.
</p>
</dd>
<dt><a name="2006-04-13">April 13, 2006</a></dt>
<dd>
<p>
Fixed JUnit run scripts to have correct FitLibrary in their <code>CLASSPATH</code>.
</p>
</dd>
<dt><a name="2006-04-11">April 11, 2006</a></dt>
<dd>
<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>IntelliJ IDEA</td>
        <td>:</td>
        <td>5.1</td>
        <td>-></td>
        <td>5.1.1</td>
    </tr>
</table>
</blockquote>
</dd>
<dt><a name="2006-04-07">April 07, 2006</a></dt>
<dd>
<p>
Finished converting all my development environments to Subversion.
</p>

<p>
Fixed <code>TestDirectoryExplorer</code> to use dedicated temporary files instead of some
arbitrary folder within the project.  The tests would break everytime that
folder would gain or lose files.  With the switch to Subversion, there was an
explosion of ancillary files that finally decided me to do something about this
test.
</p>
</dd>
<dt><a name="2006-04-05">April 05, 2006</a></dt>
<dd>
<p>
Got FitLibrary's <code>FolderRunner</code> to run under JUnit.
</p>

<p>
Tried Subversion for version control.  With TortoiseSVN, a Windows Explorer
plug-in, I can checkout the project just fine.  With the official, command-line
client, it kept dropping the connection.  I tried the integration in IntelliJ
and SmartSVN, but they were having difficulties too.  Strange, and annoying.
Now, I wonder if I wouldn't be better staying with CVS.
</p>

<p>
Moved Fit test images to <code>files</code> folder so <code>FolderRunner</code> can copy it to the
<code>reports</code> folder.
</p>
</dd>
<dt><a name="2006-04-04">April 04, 2006</a></dt>
<dd>
<p>
SourceForge's CVS is back online.  Time to merge the development lines I've
been taking on three different computers.
</p>

<p>
Worked on the name character count and word count for packages and classes.
</p>

<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>Fit</td>
        <td>:</td>
        <td>1.1</td>
        <td>-></td>
        <td><i>none</i></td>
    </tr>
    <tr>
        <td>FitLibrary</td>
        <td>:</td>
        <td>15Feb2005</td>
        <td>-></td>
        <td>20060116</td>
    </tr>
</table>
</blockquote>
</dd>
<dt><a name="2006-04-03">April 03, 2006</a></dt>
<dd>
<p>
Use specialized collections in <code>com.jeantessier.metrics</code>.
</p>

<p>
Worked on <code>MetricsGathererFixture</code>, trying to find a good way to represent
metrics in a fixture.
</p>

<p>
I tried to use FitLibraryRunner20060110, which seems to be the latest version
of FitLibrary, but it eludes me.  <code>DoFixture</code> has changed package.  The HTML
pages now use CSS to manage colors and state and it seems I have to copy the
stylesheet myself between the folder with the input files and the folder with
the output files.  And apparently, <code>DoFixture</code> now works differently, because
I can many complaints about methods not being found, whereas it used to find
them just fine using introspection on my classes.
</p>

<p>
I tried FitLibraryRunner20060110 because there was an incompatibility between
FitLibraryForFit15Feb2005 and the latest fit-java-1.1.  I was able to do a
small change to FitLibrary and recompile it againt Fit 1.1, but I'm not sure
how the versioning of FitLibrary works.  The new FitLibraryRunner20060110 has
all the Fit classes inside of it, so I only need one JAR file.  But it seems
some of the semantics have changed along the way and I haven't seen any
documentation so far.  I'll have to dig some more.
</p>
</dd>
<dt><a name="2006-03-31">March 31, 2006</a></dt>
<dd>
<p>
SourceForge's CVS repository was down yesterday and today.
</p>

<p>
I signed up for a migration to Subversion.  I have been heading some good about
it and it looks like the switch is easy.  Even though SourecForge's CVS is
down, they were able to migrate my project and I could browse it using ViewVC.
But when I tried to check it out, it failed.  IntelliJ did not report any
error, but didn't create the project either and the checkout only had <code>website</code>
and was missing <code>DependencyFinder</code>.  I tried with SmartSVN, but didn't get any
further, except that it complained about a bad socket read at some point.
Maybe if I have them migrate it again, after CVS is operational again, it will
work better.  Subversion would be nice: it has atomic checkins and it knows
about folders, so you can move or rename parts of the filesystem and retain the
history.
</p>

<p>
Started working on Fit tests for metrics for identifier length.  I want to
compute the length of package names, class names, and method names, both in
number of characters and number of words.
</p>
</dd>
<dt><a name="2006-03-30">March 30, 2006</a></dt>
<dd>
<p>
I want to add metrics to find long identifiers.  I could have length, in
characters, of class names, package names, and feature names.  With some clever
parsing, I could also compute length in number of words.
</p>

<p>
Modified code using <code>ClassfileLoader</code> and <code>CommandLine</code> to use the generics
version of Collection classes so they can use the new <code>for()</code> loop to iterate
over collections.
</p>
</dd>
<dt><a name="2006-03-27">March 27, 2006</a></dt>
<dd>
<p>
Created a Fit test to try to capture the dependency cycle in the Visitor
pattern.  Adjusted <code>CycleDetector</code> to drill down packages and classes in its
search for cycles.
</p>

<p>
Added <code>CycleComparator</code> to order cycles within a detector to ease testing.
Short cycles come before long ones.  Cycles of the same length are ordered
according to the lexical ordering of the nodes in their path.
</p>
</dd>
<dt><a name="2006-03-26">March 26, 2006</a></dt>
<dd>
<p>
Augmented <code>CycleDetector</code> to detect cycles at the class level.
</p>

<p>
Added Fit tests for cycles at the class or feature levels.  Next, I will need
to look for cycles that span levels, like in the Visitor pattern.
</p>

<p>
<img src="../images/VisitorPattern.gif" /><br />
</p>

<pre>
    BaseClass
        accept(Visitor)
            --&gt; Visitor
    ClassA
        --&gt; BaseClass
        accept(Visitor)
            --&gt; Visitor
            --&gt; Visitor.visitClassA(ClassA)
    ClassB
        --&gt; BaseClass
        accept(Visitor)
            --&gt; Visitor
            --&gt; Visitor.visitClassB(ClassB)
    Visitor
        visitClassA(ClassA)
            --&gt; ClassA
        visitClassB(ClassB)
            --&gt; ClassB
</pre>

<p>
These cycles go from some feature to a class and continues through the features
of that class.  For this to work, <code>CycleDetector</code> would have to look at lower
levels when seeking cycles from a node.  It would have to drill down from
<code>PackageNode</code> to <code>ClassNode</code> and from <code>ClassNode</code> to <code>FeatureNode</code> as
appropriate.
</p>

<p>
I also fixed the image links in the Journal.  Since I switched to a CGI script,
the URL is no longer a prefix of the <code>images/</code> folder where the images are.
Links to images must now be prefixed with <code>../</code>.
</p>
</dd>
<dt><a name="2006-03-25">March 25, 2006</a></dt>
<dd>
<p>
Added Fit tests to the all tests suite.  I don't know why I had not done it
before.
</p>
</dd>
<dt><a name="2006-03-23">March 23, 2006</a></dt>
<dd>
<p>
I figured out how to test each individual path for cycles in Fit tests.
</p>

<p>
Added more tests.
</p>
</dd>
<dt><a name="2006-03-22">March 22, 2006</a></dt>
<dd>
<p>
Created a Fit test for detecting dependency cycles.  I think I got the basis
for a simple fixture to trigger the <code>CycleDetector</code>.  But I still need to work
on verifying the cycles it detected.
</p>
</dd>
<dt><a name="2006-03-14">March 14, 2006</a></dt>
<dd>
<p>
Wrote a little more explanation around Perl regular expressions in the Manual.
</p>
</dd>
<dt><a name="2006-03-13">March 13, 2006</a></dt>
<dd>
<p>
Added new experimental "Related links" banner from Google to selected pages on
the website.  It does not pay like Google's AdSense, but it might provide
useful links to people who visit the site.  I added it to the following pages
to start with:
</p>

<ul>
<li>Introduction (between main text and quotes)</li>
<li>Resources (at the top)</li>
<li>Journal (at the top)</li>
</ul>

<p>
I also added a copy of the open source license for Dependency Finder on the
website.  Someone was inquiring and they couldn't find it on the web.  It has
always been included in the distributions, but it can't hurt to have it posted
visibly too.
</p>

<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>JUnit</td>
        <td>:</td>
        <td>3.8.1</td>
        <td>-></td>
        <td>3.8.2</td>
    </tr>
</table>
</blockquote>
</dd>
<dt><a name="2006-03-11">March 11, 2006</a></dt>
<dd>
<p>
Fixed <code>ModifiedOnlyDispatcher</code> to only ignore <code>.class</code> files and delegate
everything else, including JAR and ZIP files.  This fixes the problem I had
been having when pointing the webapp to a collection of JARs instead of
unbundled <code>.class</code> files.
</p>
</dd>
<dt><a name="2006-03-10">March 10, 2006</a></dt>
<dd>
<p>
A user was asking questions about <code>Monitor</code> and how to reload a graph and pick
up new classes.  I augmented the Developer Guide to describe how you would use
a <code>Monitor</code> and a <code>ModifiedOnlyDispatcher</code> with a <code>ClassfileLoader</code> to support
reloading the graph and picking up changes.
</p>

<p>
As I was writting this, I realized that the monitor and the dispatcher are not
linked to one another.  This means that if the dispatcher decides to ignore a
JAR file that hasn't changed, the monitor will not know about the classes in it
and will remove them from the graph if it uses closed sessions.
</p>

<p>
I had experienced this behavior before, when using the webpp with a collection
of JAR files instead of the loose <code>.class</code> files I was used to.  I'm thinking
that if I let the dispatcher travers collections of classes, like JAR or ZIP
files, it would let the monitor know about all the <code>.class</code> files and the
monitor would not remove them from the graph.  That's already what
<code>ModifiedOnlyDispather</code> does with directories.
</p>
</dd>
<dt><a name="2006-03-06">March 06, 2006</a></dt>
<dd>
<p>
Augmented <code>DependencyMetrics</code> to report the number of confirmed packages,
classes, and features in the graph.
</p>

<p>
A friend of mine brought
<a target="_blank" href="http://headwaysoftware.com/products/structure101/">Structure 101</a> to my
attention.  They have a really nice user interface.  Maybe some day I'll have
something just as nice.
</p>
</dd>
<dt><a name="2006-03-03">March 03, 2006</a></dt>
<dd>
<p>
Wrote a long Fit test to check name, length, and index calculation for every
instrunction in the VM's instruction set.
</p>

<p>
I fixed a mispelling of <code>dup_x2</code> (0x5B) and the reserved opcode <code>breakpoint</code>
(0xCA).
</p>

<p>
I also added the new Java 1.5 instruction <code>invokedynamic</code> (0xBA).
</p>
</dd>
<dt><a name="2006-03-02">March 02, 2006</a></dt>
<dd>
<p>
Updated <code>dependencies.dtd</code> on the website.  It appears I had forgotten to do so
when I released 1.1.1.
</p>
</dd>
<dt><a name="2006-03-01">March 01, 2006</a></dt>
<dd>
<p>
Tied <code>Instruction</code> more closely to <code>Code_attribute</code> so that some of the
instruction processing could be centralized there.  <code>Instruction</code> is now a
<code>Visitable</code> and <code>VisitorBase</code> automatically traverses them when processing a
<code>Code_attribute</code>.  So I was able to pull the code for iterating over bytecode
from the various visitors into the abstract base class.  Also, now that
individual <code>Instruction</code> instances know about their corresponding
<code>Code_attribute</code> and its <code>Classfile</code> and its <code>ConstantPool</code>, those that
represent opcodes with indices into the constant pool can retrieve the correct
<code>ConstantPoolEntry</code> themselves, instead of relying on client code to do it.
These two changes together simplified greatly the various operations that walk
the bytecode.
</p>

<p>
<code>Instruction</code> knows whether or not it holds an index into the constant pool.
For now, I simply used the list from <code>CodeDependencyCollector</code>, but I will need
to take a close look at the entire instruction set to make sure I have a
complete solution.
</p>

<p>
I also take this knowledge into account when comparing instructions in
<code>Instruction.equals()</code> and in computing <code>Instruction.hashCode()</code>.  If the
instruction actually refers to a <code>ConstantPoolEntry</code>, <code>equals()</code> and
<code>hashCode()</code> will use the entry's <code>equals()</code> and <code>hashCode()</code> as part of their
computation.  Otherwise, they just do a byte-to-byte comparision of the
instruction's data.
</p>

<p>
With these new tools, I revisited the case a user had brought to my attention
on <a href="#2006-02-21">2006-02-21</a>.  At the time, <code>JarJarDiff</code> only did byte-to-byte comparision
when checking for code changes in methods.  The user complained that they had
changed only one method but <code>JarJarDiff</code> was flagging them all as different
after a recompile.  It turns out the constant pool was reordered between the two
compilations, resulting in different indices and therefore different bytes in
the bytecode.  Now, instructions are isolated from any shuffling in the constant
pool, so I expect that only the modified method will show up in the <code>JarJarDiff</code>
report.
</p>

<p>
There were three.  One was the method that had been modified, it had extra
instructions.  I was able to run <code>ClassReader</code> on the classes to compare
the actual instructions for the other two.  In both cases, the reordering of
the constant pool had pushed the index of a reference beyond 255 and required
an <code>ldc_w</code> instruction of 3 bytes instead of a simple <code>ldc</code> instruction of 2
bytes.  I could introduce special treatment to equate <code>ldc</code> with <code>ldc_w</code>, but
I feel this could lead to fairly convoluted comparison rules.
</p>
</dd>
<dt><a name="2006-02-28">February 28, 2006</a></dt>
<dd>
<p>
Cleaned up some dead or duplicated code.
</p>
</dd>
<dt><a name="2006-02-26">February 26, 2006</a></dt>
<dd>
<p>
Upgraded my wireless LAN from 802.11b to 802.11g.  Larger bandwidth and somehow
a larger range too.
</p>
</dd>
<dt><a name="2006-02-24">February 24, 2006</a></dt>
<dd>
<p>
Changed <code>CodeDifferenceStrategy</code> to compare instructions instead of the raw
bytes.  The next step will be to make instruction comparison smarter.
</p>

<p>
Also added <code>Hex.toString(byte[])</code> to make it easy to log byte arrays.
Previously,  <code>Hex</code> could only write to <code>OutputStream</code> or <code>Writer</code>, which
forced traces to write bytecode to a <code>StringWriter</code> in order to log it.  Now,
<code>Hex</code> uses a <code>StringBuffer</code> instead, which should speed things up a bit.
</p>
</dd>
<dt><a name="2006-02-23">February 23, 2006</a></dt>
<dd>
<p>
Played a little with <i>smarter</i> code difference determination, using the
<code>CodeIterator</code> and <code>Instruction</code> classes.  <code>Instruction</code> is not tied to its
<code>Classfile</code>, so it cannot access the constant pool and lookup indices in the
bytecode.  I will have to tie it tighter to the object tree if I want it to
compare the actual parameter to an instruction when deciding if something is
different or not.
</p>

<p>
I found something interesting.  In the compiled code I received from a user
yesterday, there is and <code>ldc_w</code> instruction that points to a
<code>CONSTANT_class</code> entry in the constant pool.  Now,
<a target="_blank" href="http://java.sun.com/docs/books/vmspec/2nd-edition/html/Instructions2.doc8.html">the spec clearly says</a>
it has to point to a either an <code>int</code>, a <code>float</code>, or a <code>string</code>.  I wonder if
maybe they used a non-compliant compiler or something.
</p>

<p>
Instrumented more debug info in the processing of bytecode from methods, when
reading it and when comparing it in <code>JarJarDiff</code>.
</p>

<p>
Did a massive refactoring to use the new Java 5 <code>for()</code> loop in
<code>com.jeantessier.classreader</code>, which meant using specialized versions of the
Collections API.  I'm not madly in love with generics, but the new <code>for()</code> is
really cool.
</p>
</dd>
<dt><a name="2006-02-22">February 22, 2006</a></dt>
<dd>
<p>
A user complained that <code>JarJarDiff</code> flagged all methods as having code changes
when only one methods had changed.  They sent me the classes so I could
investigate.
</p>

<p>
I took a quick look.  The constant pool is different for the two classes.  The
compiler didn't put the entries at the same offset in each case.  The bytecode
makes heavy use of references to the constant pool, so the indices in the
bytecode are different because the offsets in the constant pool are different.
The way <code>JarJarDiff</code> looks for differences in the bytecode is a simple
byte-to-byte comparison; it doesn't interpret the bytecode to see if they are
the same instructions with the same parameters.  It just compares the byte
arrays for each corresponding method together and makes the method as having
changed if any single byte is different.
</p>

<p>
I could probably make it a lot smarter, but that would mean it would have to
analyze the bytecode and understand each instruction and its parameters and
compare entries in the constant pool to see that they are the same even though
they have different offsets.  That could take a while, as there are many
instructions.  I have other tasks that I must finish first before I can think
of tackling this one.
</p>

<p>
If this is critical for you, I might reconsider...  Code-level differences is a
new feature and I wouldn't want it to start in a useless state.  At the same
time, I'd like to ship at some point, so if this is not critical, maybe it can
wait a future point release.  I guess I'll sleep on it for a while...
</p>
</dd>
<dt><a name="2006-02-18">February 18, 2006</a></dt>
<dd>
<p>
Fixed default value for <code>level</code> in the Ant version of <code>JarJarDiff</code>.  Somebody
brought to my attention that it wasn't initialized and caused a
<code>NullPointerException</code> if you didn't specify it in the <code>&lt;jarjardiff&gt;</code>
tag.  I also fixed its documentation.
</p>
</dd>
<dt><a name="2006-02-15">February 15, 2006</a></dt>
<dd>
<p>
Fixed typos in Manual around examples for extracting with the CLI.
</p>
</dd>
<dt><a name="2006-02-05">February 05, 2006</a></dt>
<dd>
<p>
Cleaned up <code>ExtractAction</code>.
</p>
</dd>
<dt><a name="2006-02-04">February 04, 2006</a></dt>
<dd>
<p>
Tested actual extraction in new WebWork-based <code>ExtractAction</code>.
</p>
</dd>
<dt><a name="2006-01-29">January 29, 2006</a></dt>
<dd>
<p>
Dependency Finder is now five years old.
</p>
</dd>
<dt><a name="2006-01-27">January 27, 2006</a></dt>
<dd>
<p>
I have been wondering how to replicate the current behavior of <code>extract.jsp</code>
under <a target="_blank" href="http://www.opensymphony.com/webwork/">WebWork</a>.  A WebWork action
terminates before the JSP tied to its result is even started.  The action has
no way to stream data that would end up embedded in the result, the way
<code>extract.jsp</code> streams parsing information to keep the user notified of its
progress.
</p>

<p>
But I found that the JSP can use the <code>&lt;ww:action&gt;</code> tag to invoke another
action while the JSP is rendered.  Maybe I can use this to have a dummy action
launch the <code>extract.jsp</code> and from within it, call the real action that extracts
the graph and stream progress to the output stream.
</p>
</dd>
<dt><a name="2006-01-24">January 24, 2006</a></dt>
<dd>
<p>
Added a new XSL stylesheet, <code>DiffToFullyQualifiedNames.xsl</code>, to extract symbols
from diff reports generated by <code>JarJarDiff</code>.  Someone suggested that they could
use these symbols to start an upstream closure to find which tests would
possibly exercise the modified code.  Apparently, their suites take a very
long time to run and this would allow them to quickly run some regression to
see that they haven't broken anything.  Sounds interesting, I'm curious to
see how it turns out.
</p>

<p>
I added <code>start-includes-list</code> and <code>stop-includes-list</code> switches to
<code>DependencyClosure</code>, similar to <code>scope-includes-list</code> on <code>DependencyReporter</code>.
This way, <code>DependencyClosure</code> can work from an explicit set of symbols instead
of regular expressions.  In the process, I had to do quite a bit of code
duplication between the two CLI tools, which I don't like very much.
</p>

<p>
<code>JarJarDiff</code> currently only lists the names of removed/new packages, classes,
and interfaces, without any of their internal details.  For this trick to
work, maybe it would help if it listed all the classes and features in a
removed package.
</p>

<p>
There was already a <code>ListFullyQualifiedNames</code> that operated on dependency
graphs.  I renamed it <code>DependencyGraphToFullyQualifiedNames</code> to align it with
the new <code>DiffToFullyQualifiedNames</code>.
</p>
</dd>
<dt><a name="2006-01-19">January 19, 2006</a></dt>
<dd>
<p>
Edited the Developer Guide to clarify the source of dependency events and how
Dependency Finder removes duplicates.
</p>

<p>
Incremented the date in the copyright to 2006.
</p>

<p>
Started writing tests for <code>ExtractAction</code>.  The WebWork people did a great job
of encapsulating things to make it easy to test.  Kudos to them.
</p>
</dd>
<dt><a name="2006-01-18">January 18, 2006</a></dt>
<dd>
<p>
Started redoing the webapp using <a target="_blank" href="http://opensymphony.com/webwork/">WebWork</a>.
</p>

<p>
Added the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>WebWork</td>
        <td>:</td>
        <td><i>none</i></td>
        <td>-></td>
        <td>2.2</td>
    </tr>
</table>
</blockquote>
</dd>
<dt><a name="2006-01-11">January 11, 2006</a></dt>
<dd>
<p>
Played a bit with <a target="_blank" href="http://www.opensymphony.com/webwork/">WebWork</a>.  I have
been toying with the idea of rewriting the webapp using WebWork, but since it
is merging with Struts now, I'm not so sure anymore.  I don't want the webapp
to bloat just because it needs a whole bunch of infrastructure JARs.  ALready,
the default type of WebWork webapp requires 1MB of JARs before you've even
started doing anything.
</p>

<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>Tomcat</td>
        <td>:</td>
        <td>5.5.12</td>
        <td>-></td>
        <td>5.5.15</td>
    </tr>
</table>
</blockquote>
</dd>
<dt><a name="2006-01-09">January 09, 2006</a></dt>
<dd>
<p>
Built a CGI script to rebuild the Journal from the
individual text entries.  I had to do a fair bit of
scrubbing of the text files.
</p>
</dd>
<dt><a name="2006-01-05">January 05, 2006</a></dt>
<dd>
<p>
Studied the impact of logging a little further.  If I remove all
logging in <code>CodeDependencyCollector</code>, I can save about 15%.
</p>

<p>
Worked at breaking down the Journal into individual wiki-like files.
The large, single file HTML was becoming too unwieldy.  IntelliJ IDEA
was stalling every time I opened a new tag.  With the wiki-like
notation, it will make writing entries a little easier since I won't
have to type all those HTML tags anymore.  I still need to figure out
how to rebuild the HTML file from the individual pieces.
</p>
</dd>
<dt><a name="2006-01-04">January 04, 2006</a></dt>
<dd>
<p>
Took another look at the impact of logging.  When analyzing Dependency
Finder itself with all logging turned on, some of the lines from
<code>VisitorBase</code> are over 300 KB long!  But these logging calls are
guarded by calls to <code>Logger.isDebugEnabled()</code>, so those 300K lines
usually aren't generated.
</p>
</dd>
<dt><a name="2006-01-03">January 03, 2006</a></dt>
<dd>
<p>
Cleaned up <code>build.xml</code>.
</p>
</dd>
<dt><a name="2005-12-30">December 30, 2005</a></dt>
<dd>
<p>
Making the switch to Java 5.0.
<b>If you're still running it with the JDK 1.4, let me know ASAP.</b>
</p>

<p>
Trying to compile for Java 1.4 with the 1.5 compiler is just too
risky.  It catches uses of the new language constructs, but not uses of
new API elements.  Relying on the compiler to keep me straight is just
not reliable.  And I'm tired of keeping multiple versions of the JDK
just so I can compile Dependency Finder in near-obsolete
technology.
</p>

<p>
Removed JARs for Xalan.  I'll rely on the version what ships with
the JDK.  It means that dependencies shift from <code>org.apache</code>
packages to <code>com.sun.org.apache</code> packages, which seems a
little fishy, especially since some of those have <i>internal</i>
in their name.  I'll have to read some more documentation about how
we're supposed to use those XSL-related classes.  On the plus side, I
can now use the default <code>XMLReaderFactory.createXMLReader()</code>
method instead of hard-coding the Apache implementation.
</p>

<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>Xalan</td>
        <td>:</td>
        <td>2.6.0</td>
        <td>-></td>
        <td><i>none</i></td>
    </tr>
</table>
</blockquote>
</dd>
<dt><a name="2005-12-18">December 18, 2005</a></dt>
<dd>
<p>
Fixed the Manual section on <code>JarJarDiff</code>.
</p>
</dd>
<dt><a name="2005-12-17">December 17, 2005</a></dt>
<dd>
<p>
Fixed the Manual section on <code>JarJarDiff</code>.
</p>
</dd>
<dt><a name="2005-12-16">December 16, 2005</a></dt>
<dd>
<p>
Cleaned up <code>build.xml</code>.  I had been running the tests
from my IDE for too long and some of the targets had gotten broken.
</p>
</dd>
<dt><a name="2005-12-15">December 15, 2005</a></dt>
<dd>
<p>
Finally settled to a format for my Fit tests.  I got rid of my early
experimentations and kept only the most comprehensive ones.  I also
posted a suggestion for a fix to FitLibrary to bring it in line with
Fit 1.1.  We'll see how that goes and if it gets incorporated.
</p>

<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>Log4J</td>
        <td>:</td>
        <td>1.2.8</td>
        <td>-></td>
        <td>1.2.13</td>
    </tr>
</table>
</blockquote>
</dd>
<dt><a name="2005-12-14">December 14, 2005</a></dt>
<dd>
<p>
Augmenting the Developer Guide to incorporate the extra explanations
from yesterday's email.  I also want to explain how
<code>com.jeantessier.dependency.VisitorBase</code> uses multiple
cases of the Template pattern to present a generic graph traversal
mechanism with multiple extension points.  And I do mean
<i>multiple</i>.
</p>
</dd>
<dt><a name="2005-12-13">December 13, 2005</a></dt>
<dd>
<p>
Sent a long email to a user who was asking how to use the classes in
the Dependency Finder library to extract dependencies and how to
operate on the graph.  I should work that into the Developer Guide.
</p>
</dd>
<dt><a name="2005-12-12">December 12, 2005</a></dt>
<dd>
<p>
Tech docs around the event-based processing when loading a
<code>.class</code> file using a <code>ClassfileLoder</code>.
</p>

<p>
Enhanced <code>NodeFactoryFixture</code> so I can test both inbound
and outbound dependencies in a single Fit table.
</p>
</dd>
<dt><a name="2005-12-11">December 11, 2005</a></dt>
<dd>
<p>
Tech docs to describe the <code>ClassfileLoder</code> hierarchy.
</p>

<p>
Came up with a new subclass of <code>DoFixture</code> to help me
test dependency graphs as part of Fit tables.
</p>
</dd>
<dt><a name="2005-12-07">December 07, 2005</a></dt>
<dd>
<p>
Got a bunch of questions from a user on how to use the various
classes in the Dependency Finder library to process <code>.class</code>
files and generate dependency graphs ready for further processing.
</p>
</dd>
<dt><a name="2005-12-06">December 06, 2005</a></dt>
<dd>
<p>
I finally figured out why Fit behaved differently between my desktop
and my laptop.  It turns out they had a different version of Fit.  I
must have downloaded Fit 1.0 to my laptop by accident.  Anyway, I
tried diff'ing the <code>fit.jar</code> and noticed they were
different.  I followed up with a quick run of JarJarDiff, just to be
sure, and there it was, lots of signature and code changes.  I copied
Fit from my desktop back onto my laptop and <i>voil&agrave;!</i> it
now works like a charm.
</p>

<p>
Also wrangled <code>DoFixture</code> into doing what I wanted it to
do.  It works great for dealing with simple values.  Now, I need to
figure out how to call <code>Node.addDependency()</code> and pass
<code>Node</code> values from the Fit tables.  I guess I will need one
of those fabled <code>TypeAdapter</code>.
</p>
</dd>
<dt><a name="2005-12-05">December 05, 2005</a></dt>
<dd>
<p>
Wrote Fit tests using <code>fit.DoFixture</code> so I don't need to
write custom fixture classes.  The book and the documentation are a
little sketchy and I need quite a few trial and errors to get it to do
what I want.  Or, at least, almost what I want.
</p>

<p>
Fit still behaves differently between my desktop and my laptop.  I
am still baffled.
</p>
</dd>
<dt><a name="2005-12-01">December 01, 2005</a></dt>
<dd>
<p>
Wrote <code>FitTestSuite</code> and <code>FitTest</code> to run Fit
tests with JUnit.  I got it to automatically pickup HTML files in a
given folder and to have tests fail when there are failures in one of
the tables in an HTML document.  Now, I can subclass
<code>FitTestSuite</code> and give it a folder name in
<code>suite()</code> to have it process a given folder.
</p>

<p>
Fit automatically compacts phrases like <i>is confirmed</i> into
camel-case identifiers like <code>isConfirmed</code>.  It works on my
desktop but not on my laptop.  The Fit version is the same, pretty much
everything is the same.  Maybe the JVM patch version is different, but
that's it.  I am baffled.
</p>
</dd>
<dt><a name="2005-11-28">November 28, 2005</a></dt>
<dd>
<p>
Started writing Fit tests for creating dependency graphs.  I hope
that using tables to create test setup will be easier.  I still have to
figure out how to run them automatically using Ant.
</p>
</dd>
<dt><a name="2005-11-27">November 27, 2005</a></dt>
<dd>
<p>
Started reading about the <a target="_blank" href="http://fit.c2.com">Fit</a> testing framework.
</p>
</dd>
<dt><a name="2005-11-19">November 19, 2005</a></dt>
<dd>
<p>
Refactored the code to instantiate the strategy in
<code>JarJarDiff</code> into private utility methods.  This helps
clean up the main code.
</p>

<p>
Also cleaned up some of the JSPs in the webapp.  Now, both
<code>extract.jsp</code> and <code>load.jsp</code> highlight missing
files.
</p>
</dd>
<dt><a name="2005-11-17">November 17, 2005</a></dt>
<dd>
<p>
For now, I'll treat typed arrays as independent classes.  We'll see
how it goes.
</p>

<p>
Continued work on the circular dependency detector.  Dealt with
comparing and ordering cycles.
</p>
</dd>
<dt><a name="2005-11-16">November 16, 2005</a></dt>
<dd>
<p>
Added a maximum cycle length to <code>CycleDetector</code>.
</p>

<p>
Healed tests for
<code>com.jeantessier.dependency.TestHTMLPrinter</code>.  It had been
a while since all the tests ran green.
</p>

<p>
In Java 5.0, some code compiles to strange forms.  Enums have an
implicit <code>values()</code> method that attempts to copy the
internal array of the enum's values.  It does this copying by calling
the array's <code>clone()</code> method, but the array is typed with
the enum's type, so it looks like a call to
<code>MyEnum[].clone()</code> and I can't seem to decide what kind of
dependency that is.  I need to investigate further.
</p>
</dd>
<dt><a name="2005-11-15">November 15, 2005</a></dt>
<dd>
<p>
Started a new <code>com.jeantessier.dependency.Visitor</code> to look for cycles in the
dependency graph.  It seems that many people out there who are interested in
dependencies really want to detect cycles.  I still think that not all cycles
are necessarily bad, but maybe at least listing them can be of some use.  You
definitely want to avoid circular dependencies between large-scale components,
but one component might be implemented as many, tightly coupled, packages.
Since Dependency Finder is not aware of organizing principles beyond the
package, it's usefulness at detecting unwanted cycles will be limited.
</p>

<p>
Further refined the webapp's <code>style.css</code>.
</p>

<p>
Posted Dependency Finder on <a target="_blank" href="http://base.google.com/">Google Base</a>.
</p>
</dd>
<dt><a name="2005-11-14">November 14, 2005</a></dt>
<dd>
<p>
Experimented with the webapp's <code>style.css</code> so hyperlinks
don't stand out too much.
</p>
</dd>
<dt><a name="2005-11-09">November 09, 2005</a></dt>
<dd>
<p>
Fixed <code>ClassReport</code> so it does not show modified
declarations for classes whose declaration has not changed, according
to the strategy in use.
</p>
</dd>
<dt><a name="2005-11-07">November 07, 2005</a></dt>
<dd>
<p>
Merged the <code>published_API</code> branch back into the trunk.
</p>

<p>
Fixed file count based tests.
</p>
</dd>
<dt><a name="2005-11-06">November 06, 2005</a></dt>
<dd>
<p>
Fixed interaction between <code>DifferencesStrategy</code> and its
<code>DifferenceStrategy</code> so we can overlook class differences
when the stategy dictates that we do.  This is to support the case when
a class has a backwards compatible change to its declaration but some
of its features have non-backwards compatible changes.  I still want to
report the feature changes, but I want to ignore the class declaration
difference.
</p>
</dd>
<dt><a name="2005-11-03">November 03, 2005</a></dt>
<dd>
<p>
Fixed JarJarDiff so the <code>-level</code> switch that takes a possible class name can
look for a constructor that takes a <code>DifferenceStrategy</code> before it falls back
on the default constructor.  This way, users can specify strategies that extend
<code>DifferenceStrategyDecorator</code> and have them decorate the same basic strategy
that <code>APIDifferenceStrategy</code> and <code>IncompatibleDifferenceStrategy</code> do.
</p>

<p>
I want to do the same thing for printers, too.
</p>

<p>
JUnit launch scripts for Unix.  I have had the Windows <code>.bat</code> files since
forever, but only got around to writing Unix equivalents last year.  I finally
checked them in.
</p>
</dd>
<dt><a name="2005-11-02">November 02, 2005</a></dt>
<dd>
<p>
Last tests for <code>IncompatibleDifferenceStragegy</code>.
</p>
</dd>
<dt><a name="2005-11-01">November 01, 2005</a></dt>
<dd>
<p>
More tests for <code>IncompatibleDifferenceStragegy</code>.  I am
done with class-level tests and starting field-level tests.  Then, I
will have to do constructor and method level tests.  It's gonna be a
while, still.
</p>
</dd>
<dt><a name="2005-10-30">October 30, 2005</a></dt>
<dd>
<p>
More tests for <code>IncompatibleDifferenceStragegy</code>.  I had a
little bout of analysis paralysis, but I think I'm out of it now.
</p>
</dd>
<dt><a name="2005-10-28">October 28, 2005</a></dt>
<dd>
<p>
Refactored of tests for
<code>IncompatibleDifferenceStragegy</code>.  Not done yet.
</p>
</dd>
<dt><a name="2005-10-25">October 25, 2005</a></dt>
<dd>
<p>
Reworked the entire <code>DifferenceStragegy</code> hierarchy.  For
a short time, I considered using a chain of responsibility pattern,
but setting it up in a flexible way, from the command-line, was just
too complicated.  So I will stay with decorators and some limited
combinations, based on command-line parameters.
</p>
</dd>
<dt><a name="2005-10-19">October 19, 2005</a></dt>
<dd>
<p>
I'm going to make <code>IncompatibleDifferenceStragegy</code> a
subclass of <code>DifferenceStrategyDecorator</code>.
</p>

<p>
I read that JDK 1.5 has JMX instrumentation to help with profiling.
I should look further into it to help with performance issues with
regard to logging.
</p>
</dd>
<dt><a name="2005-10-15">October 15, 2005</a></dt>
<dd>
<p>
More test data and initial tests for
<code>IncompatibleDifferenceStrategy</code>.
</p>
</dd>
<dt><a name="2005-10-14">October 14, 2005</a></dt>
<dd>
<p>
More test data and new <code>IncompatibleDifferenceStrategy</code>
to replace <code>PublishedDiffToHTML.xsl</code>.
</p>
</dd>
<dt><a name="2005-10-13">October 13, 2005</a></dt>
<dd>
<p>
Created some more test data to test the new
<code>DifferenceStrategy</code> to replace
<code>PublishedDiffToHTML.xsl</code>.
</p>
</dd>
<dt><a name="2005-10-12">October 12, 2005</a></dt>
<dd>
<p>
Reworked the way <code>DifferencesFactory</code> determines code
differences.  It is now all done by the strategy and the factory only
sets a flag in the appropriate <code>CodeDifferences</code> instance.
I had to adjust <code>DifferenceStrategy</code> in order to expose
<code>isCodeDifference()</code>.  I eventually would like for constant
value and code differences to have their own instance of
<code>Differences</code> instead of just being flags.  Objects can
hold information about the nature of the difference.
</p>

<p>
I had an idea of using a chain of command pattern instead of my
current strategy pattern for <code>DifferencesFactory</code>, but that
would make it much more complicated to insert user-defined strategies.
So I'll stick with my current design for now.
</p>
</dd>
<dt><a name="2005-10-11">October 11, 2005</a></dt>
<dd>
<p>
Removed obsolete method <code>Differences.isEmpty()</code>.
</p>
</dd>
<dt><a name="2005-10-09">October 09, 2005</a></dt>
<dd>
<p>
Got rid of the <code>Validator</code> hierarchy.  The only one that
was used at all was <code>ListBasedValidator</code> which I turned into
a decorator for <code>DiffereneStrategy</code>.  The resulting design
is much cleaner and it makes <code>DifferencesFactory</code> that much
simpler.  One last strategy for backward-compatibility-breaking changes
and I'll be done with this development item.
</p>
</dd>
<dt><a name="2005-10-04">October 04, 2005</a></dt>
<dd>
<p>
Changed all the JarJarDiff variations to use the new
<code>DifferenceStrategy</code>.  Each has a new <code>level</code>
parameter to tell it which strategy to use.  Level can either be a
predefined constant, <code>api</code> for
<code>APIOnlyDifferenceStrategy</code> or <code>code</code> for
<code>ComprehensiveDifferenceStrategy</code>.  In addition, users can
set it to the name of a class that implements
<code>DifferenceStrategy</code> and that has a default constructor;
the program will instantiate it and use the instance to analyze
API differences.  I might so the same thing for the selection of
printers in many of the tools.
</p>
</dd>
<dt><a name="2005-10-03">October 03, 2005</a></dt>
<dd>
<p>
Finished <code>APIOnlyDifferenceStrategy</code>.  Now, I need a
switch in JarJarDiff to select the strategy at runtime.
</p>
</dd>
<dt><a name="2005-10-02">October 02, 2005</a></dt>
<dd>
<p>
Introduced <code>APIOnlyDifferenceStrategy</code> to compute API
differences without regard for code-only variations.  I also want it to
not show the value of constants, but that will require more tweaking.
At least, I now have tests in place.
</p>
</dd>
<dt><a name="2005-09-29">September 29, 2005</a></dt>
<dd>
<p>
Tracking value differences for constants via their declaration is
too sensitive.  I will want cases where I only look at changes that
could break backward compatibility and these will show up.  I'm back to
finding a way to distinguish declaration changes separately from value
changes.
</p>

<p>
I'm seriously considering simply switching to Java 1.5.  It will let
me use all the features from the library and also some of the new
enhancements in the language, notably the new <code>for()</code> loop
for iterating over a collection.  At a place I used to work, we wrote
software that customers would run as part of their operation.  Some
customers were still using Java 1.3, so our build environment was
limited to 1.3 on purpose so we could detect any change that would not
be compatible with 1.3.  In order to run Dependency Finder reports as
part of the build, it had to run under 1.3.  I figured there might be
other installations with similar constraints, so it would be nice if
they could still benefit from Dependency Finder and I have kept it at
Java 1.3 ever since.  But it is starting to hurt, and I don't care
quite as much anymore.  Java 1.3 is approaching retirement, so it
should be safe to move up to Java 1.4.  But Java 1.5 is even better and
it has been out for a while now.  Surely anybody serious about Java
development has moved to it by now!
</p>

<p>
<b>If you're using Dependency Finder in an environment that requires Java 1.4, let me know.</b>
Otherwise, I'm just going to move up to Java 1.5 and ease my own suffering.  :-)
</p>
</dd>
<dt><a name="2005-09-28">September 28, 2005</a></dt>
<dd>
<p>
Implemented <code>equals()</code> and <code>hashCode()</code> in subclasses of <code>ConstantPoolEntry</code> to
help in discovering API differences.  It started with the need to compare
constant values to detect when they change between versions.  Since those make
up the majority of this hierarchy, I decided to do it all.
</p>

<p>
One interesting point is when comparing two values of either <code>Float_info</code> or
<code>Double_info</code>, where I need to compare <code>float</code> or <code>double</code> values respectively.
I cannot use operator <code></code><code></code> because rounding errors could make it fail when the
values are otherwise the same.  Since Java 1.4, I can use
<code>Float.compare(float, float)</code> and <code>Double.compare(double, double)</code>, but not in
Java 1.3.  So far, my policy has been to keep the code runnable on a Java 1.3
virtual machine.  I used to do it by compiling the release version with JDK 1.3,
but as of 2004-06-18, I use the <code>source</code> and <code>target</code> attributes to the
<code>&lt;javac&gt;</code> Ant task in <code>build.xml</code>.  This way, I only need JDK 1.5 on my
machine.  But this control mechanism does not guard against calling features
that were not in JDK 1.3, like those <code>compare()</code> methods.  The compiler compiles
them just fine, and the code runs fine until JarJarDiff hits a float or double
constant that didn't change and it tries to call my new <code>equals()</code> method to
verify it.  It then explodes with a <code>NoSuchMethodError</code> for either
<code>Float.compare(float, float)</code> or <code>Double.compare(double, double)</code>.
</p>
</dd>
<dt><a name="2005-09-26">September 26, 2005</a></dt>
<dd>
<p>
Introduced <code>DifferencesStrategy</code> and started using it in
<code>DifferencesFactory</code>.  In the process, I noticed that I
never modified <code>FieldDifferences</code> to take into account the
change in value for constants.  I fixed it, but I'll have to also fix
<code>ClassReport</code> and the XSL stylesheet in
<code>DiffToHTML.xsl</code>.
</p>
</dd>
<dt><a name="2005-09-23">September 23, 2005</a></dt>
<dd>
<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>Tomcat</td>
        <td>:</td>
        <td>5.5.9</td>
        <td>-></td>
        <td>5.5.12</td>
    </tr>
</table>
</blockquote>
</dd>
<dt><a name="2005-09-22">September 22, 2005</a></dt>
<dd>
<p>
Started using <code>PackageMapper</code> in
<code>DifferencesFactory</code>.
</p>
</dd>
<dt><a name="2005-09-20">September 20, 2005</a></dt>
<dd>
<p>
Created <code>PackageMapper</code> to have one place where a
collection of classfiles get mapped to packages.  Reworked its use into
<code>ComprehensiveDifferencesStrategy</code>.
</p>
</dd>
<dt><a name="2005-09-12">September 12, 2005</a></dt>
<dd>
<p>
Renamed <code>JarDifferences</code> to
<code>ProjectDifferences</code>, since it deals with the entire project
and not any single JAR file.
</p>

<p>
Finished <code>ComprehensiveDifferenceStrategy</code>.  Now I have
to use it in <code>DifferencesFactory</code>.
</p>
</dd>
<dt><a name="2005-09-11">September 11, 2005</a></dt>
<dd>
<p>
Continued work on <code>DifferenceStrategy</code> to encapsulate the
behavior behind <code>Differences.isEmpty()</code>.  Got through the
tests for packages.  Now, I need to handle entire projects and create a
subclass for backward-compatilibity breaking changes.
</p>
</dd>
<dt><a name="2005-09-09">September 09, 2005</a></dt>
<dd>
<p>
Continued work on <code>DifferenceStrategy</code> to encapsulate the
behavior behind <code>Differences.isEmpty()</code>.  Got through the
tests for classes and interfaces.
</p>

<p>
It turns out that constants have their value embedded directly into
their field entry.  I adjusted the new difference engine to look at
those values too (the old one was ignoring them).
</p>
</dd>
<dt><a name="2005-09-08">September 08, 2005</a></dt>
<dd>
<p>
Started work on <code>DifferenceStrategy</code> to encapsulate the
behavior behind <code>Differences.isEmpty()</code>.  Got through the
simple tests for fields, constructors, and methods.
</p>

<p>
Ran a quick test with a large JAR file: removing all calls to Log4J
reduces extraction time by 50%.  I should look into more discretionary
use of logging to make the application more responsive, specially for
large codebases.
</p>
</dd>
<dt><a name="2005-09-07">September 07, 2005</a></dt>
<dd>
<p>
After staring at the code for some time, I am finally convinced the
various subclasses of <code>Differences</code> each expose enough
information that I can come up with a strategy object that can look at
each one and determine if it is <i>empty</i> or not.  At first, I had
thought of using a visitor, but that would mean either changing the
<code>Visitor</code> interface to have a return value, or make the
visitors stateful.  Neither is appealing to me, so I'll stick with my
idea of using the Strategy pattern instead.
</p>

<p>
Fixed <code>RemovableDifferences</code> that was directly
referencing fields internally instead of going though accessors.  Since
the places it was doing the accessing will move to a strategy, it made
sense to go through an accessor instead so the calling code will be
easier to move later on.
</p>
</dd>
<dt><a name="2005-09-05">September 05, 2005</a></dt>
<dd>
<p>
I am stuck.  On two fronts.  With JarJarDiff, I can't seem to see a
way to insert some kind of strategy in the difference engine to choose
between all differences and only those I judge might break backward
compatibility.  With the HTML-ization of the web app output, I can't
seem to find a clean way to go from preformatted text output to
hyperlinked HTML.  This is frustrating.
</p>
</dd>
<dt><a name="2005-09-01">September 01, 2005</a></dt>
<dd>
<p>
Fixed a typo in the manual.
</p>
</dd>
<dt><a name="2005-08-25">August 25, 2005</a></dt>
<dd>
<p>
Tried to create an <code>HTMLPrinter</code> for the webapp so
dependencies can be hyperlinks to further queries.  Right now, it is
just a quick hack.  It will need more work to make it pretty and
generic enough.
</p>
</dd>
<dt><a name="2005-08-24">August 24, 2005</a></dt>
<dd>
<p>
Turns out my manual tests for <code>JarJarDiff</code>'s filtering
were using the wrong filter files.  I am glad to report that the
filtering function is working just fine.  And now, I have tests to
prove it.
</p>

<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>IntelliJ IDEA</td>
        <td>:</td>
        <td>5.0</td>
        <td>-></td>
        <td>5.0.1</td>
    </tr>
</table>
</blockquote>
</dd>
<dt><a name="2005-08-22">August 22, 2005</a></dt>
<dd>
<p>
Toyed with the idea of removing deprecation-related entries from
<code>JarJarDiff</code> reports, in addition to the
documentation-related ones I removed two days ago.  In the end, I
decided to keep them since they impact the compilation messages you get
when building code.
</p>

<p>
Further modified <code>JarJarDiff</code> to use
<code>Validator</code> as a filter instead of the two documentation
parameters it had before.  Now, it uses a new
<code>ComprehensiveValidator</code> by default but if supplied with
the <code>-filter</code> switch, it uses a
<code>ListBaSedValidator</code> instead to limit the report to
selected elements.  I have to modify <code>ListBaSedValidator</code> to
throw an exception when its input file is missing.  I am not finished
yet.  There are no tests for filtering and when I pass in the switch,
the resulting report is empty.  This shouldn't take too long to sort
out.
</p>
</dd>
<dt><a name="2005-08-21">August 21, 2005</a></dt>
<dd>
<p>
For some obscure reason, my laptop won't let me start SmartCVS
anymore.  It complains that I don't have Java 1.4 or later installed.
I have JDK 1.5!  I tried everything, up to and including uninstalling
both SmartCVS and JDK and reinstalling them, to no avail.  I figured
I'd use the CVS support in IntelliJ IDEA, but the branch only exists
on the source code and not on the website module, which confused my IDE
for a little while.
</p>

<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>SmartCVS</td>
        <td>:</td>
        <td>4.0.5</td>
        <td>-></td>
        <td>4.0.6</td>
    </tr>
</table>
</blockquote>
</dd>
<dt><a name="2005-08-20">August 20, 2005</a></dt>
<dd>
<p>
Started fixing <code>JarJarDiff</code> to remove all the parts that
dealt with the level of documentation as separate entries in the XML
report.  The next step will be to use the lists from
<code>-old-validator</code> and <code>-new-validator</code> to trim the
report itself, not with an XSL stylesheet.  I will do this work on a
separate branch and merge it in when I'm done.  The branch is named
<code>published_API</code>.
</p>

<p>
Fixed <code>textjunit.bat</code> and <code>junit.bat</code> to allow
for spaces in the <code>JAVA_HOME</code> environment variable.
</p>
</dd>
<dt><a name="2005-08-15">August 15, 2005</a></dt>
<dd>
<p>
Found more ideas for object-oriented metrics from the works of
<a target="_blank" href="http://irb.cs.uni-magdeburg.de/sw-eng/us/oop/morris.shtml">Kenneth L. Morris</a>.
I will have to research it a little further.
</p>
</dd>
<dt><a name="2005-08-13">August 13, 2005</a></dt>
<dd>
<p>
Thought about my current dilemma regarding what to display in
<code>JarJarDiff</code> reports between entire APIs, published ones
only, and selective display.  I thought I could do it with XSL
transformations, but those are becoming too complex.  Plus, there is an
issue with using function calls in predicates that I still haven't
resolved.  I'm starting to think I'd better generate different reports
from <code>JarJarDiff</code> and have a single stylesheet to render
them in HTML.  I might do the same for the stylesheets that narrow
down dependency graphs instead of using
<code>DependencyReporter</code>.
</p>

<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>JDK</td>
        <td>:</td>
        <td>1.5.0_01</td>
        <td>-></td>
        <td>1.5.0_04</td>
    </tr>
    <tr>
        <td>IntelliJ IDEA</td>
        <td>:</td>
        <td>4.5</td>
        <td>-></td>
        <td>5.0</td>
    </tr>
</table>
</blockquote>
</dd>
<dt><a name="2005-08-06">August 06, 2005</a></dt>
<dd>
<p>
Back from vacation (yeah, it was three weeks).
</p>
</dd>
<dt><a name="2005-07-26">July 26, 2005</a></dt>
<dd>
<p>
Fixed typos in Manual for UNIX installation instructions.
</p>
</dd>
<dt><a name="2005-07-16">July 16, 2005</a></dt>
<dd>
<p>
Gone on vacation.
</p>
</dd>
<dt><a name="2005-07-13">July 13, 2005</a></dt>
<dd>
<p>
Finished support for negative closure.
</p>

<p>
Checked in a "cleaned up" version of
<code>DependencyGraphToRDF.xsl</code> and associated script.
</p>
</dd>
<dt><a name="2005-07-11">July 11, 2005</a></dt>
<dd>
<p>
Gave some thoughts to computing negative closures using the tools
that are already there.  All I really need is a new stylesheet to
extract the fully qualified node names from the XML graph without any
indentation.
</p>
</dd>
<dt><a name="2005-07-06">July 06, 2005</a></dt>
<dd>
<p>
I started to reorganize the package
<code>com.jeantessier.dependency</code> (on paper) to separate the
classes that deal exclusively with the graph from those that deal in
terms of dependencies (from those about transitive closures).  Maybe
it's not as bad as I think.
</p>

<p>
Started looking at how Java 5.0 stores some of its more exotic
constructs, like variable argument methods and generics.  I found some
links to the updated JVM specification.  I have some work ahead of me.
The good news is that its all new special attributes and new access
flags, so everything kinds works already.  It's just that they are not
really accounted for when extracting dependencies or computing
metrics.
</p>

<p>
Moved <code>Hex</code> from package
<code>com.jeantessier.dependencyfinder</code> to package
<code>com.jeantessier.text</code> so classes in other packages can use
it to dump binary data to log files, like <code>Custom_attribute</code>
when logging the content of unknown attributes.
</p>
</dd>
<dt><a name="2005-07-05">July 05, 2005</a></dt>
<dd>
<p>
Somebody suggested using Dependency Finder to generate data flow
graphs.  They asked if inbound dependencies on fields couldn't map to
setting the value and outbound dependencies to reading the value.  The
goals are different between dependency graphs and data flow graps.  But
this got me thinking that maybe just having a different collector could
do the trick.  The <code>Node</code> class and its related classes are
generic enough to represent any kind of relationships.  It is up to the
consumer of the graph to infer meaning from things like "inbound" and
"outbound" nodes.
</p>
</dd>
<dt><a name="2005-06-23">June 23, 2005</a></dt>
<dd>
<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>Ant</td>
        <td>:</td>
        <td>1.6.2</td>
        <td>-></td>
        <td>1.6.5</td>
    </tr>
    <tr>
        <td>JDK</td>
        <td>:</td>
        <td>1.4.2</td>
        <td>-></td>
        <td>1.5.0</td>
    </tr>
    <tr>
        <td>Tomcat</td>
        <td>:</td>
        <td>5.0.28</td>
        <td>-></td>
        <td>5.5.9</td>
    </tr>
</table>
</blockquote>
</dd>
<dt><a name="2005-06-18">June 18, 2005</a></dt>
<dd>
<p>
Took one more look at using JDK 1.5 to generate the code for JDK 1.3
instead of JDK 1.3 itself.  The differences are very minor, from what I
could see.  Mostly, it has to do with how JDK 1.3 was resolving method
calls to their latest definition, while from JDK 1.4 forward they are
resolved to the most specific class of the reference.  This has no ill
effect on running the code in the JDK 1.3 virtual machine.
</p>
</dd>
<dt><a name="2005-06-17">June 17, 2005</a></dt>
<dd>
<p>
Worked a little more on <code>SelectedDiffToHTML</code>.
</p>
</dd>
<dt><a name="2005-06-16">June 16, 2005</a></dt>
<dd>
<p>
A coworker requested that pages from the web app be bookmarkable.
The easy solution is to replace the "method" attribute of
<code>&lt;form&gt;</code> tags in the JSPs.  The URLs can get pretty
large.  Just the parameter names for <code>advancedquery</code> make it
600 characters long.  With web proxies that can truncate URLs at 1K,
that leaves about 400 characters for specifying regular expressions.  I
haven't checked it in yet.
</p>
</dd>
<dt><a name="2005-06-08">June 08, 2005</a></dt>
<dd>
<p>
Added code difference information to the XML reports that come out
of JarJarDiff.  The XSL stylesheets are giving me trouble.  They can't
seem to pick up the new XML tags.  Strange.
</p>

<p>
It turns out that my CVS configuration in IDEA missed two test data
files the other day.  I guess I'll stick to SmartCVS for checkins.
</p>
</dd>
<dt><a name="2005-06-06">June 06, 2005</a></dt>
<dd>
<p>
Started on computing code differences for methods that have not
changed otherwise.
</p>

<p>
Working with IntelliJ IDEA and all its refactorings is really nice.
I still have a little difficulty configuring the project just right,
especially with support for JSPs without turning the entire project
into a web app.
</p>
</dd>
<dt><a name="2005-06-01">June 01, 2005</a></dt>
<dd>
<p>
SourceForge stats are back and WOW! they're great.  Check it out!
Release 1.1.0 got over 1000 downloads and Release 1.1.1 is already past
250 after just two weeks.  This is awesome.  I'm really happy.
</p>
</dd>
<dt><a name="2005-05-29">May 29, 2005</a></dt>
<dd>
<p>
Still looking at tracking changes in the bytecode as part of
<code>JarJarDiff</code> report.
</p>

<p>
A few additional fixes from IDEA's analysis.
</p>
</dd>
<dt><a name="2005-05-28">May 28, 2005</a></dt>
<dd>
<p>
Started looking at tracking changes in the bytecode as part of
<code>JarJarDiff</code> report.
</p>
</dd>
<dt><a name="2005-05-25">May 25, 2005</a></dt>
<dd>
<p>
Installed IntelliJ IDEA.  Ran the built-in analysis tool and found a
few places where signatures included exceptions that were no longer
thrown and some unused parameters.  I'm used to IDEA on the Mac, so I
need to adapt to the key bindings on Windows.
</p>
</dd>
<dt><a name="2005-05-24">May 24, 2005</a></dt>
<dd>
<p>
Updated the code coverage analyses on the website with runs against
Release 1.1.1.
</p>

<p>
Got my free license for
<a target="_blank" href="http://www.jetbrains.com/idea/">IntelliJ IDEA</a>.
</p>

<p>
Googled for "Dependency Finder", out of curiosity, and found two
interesting hits.
</p>

<p>
The first one was
<a target="_blank" href="http://www.headwaysoftware.com/">reView</a>.
I had already stumbled on it a while back and I must say the demo on
their website was pretty impressive.  It has a lot of what I'd want to
see in a graphical UI for Dependency Finder.  They sell licenses for
$1,999 each.  Whew!  Their brochure has a lot of great arguments for
managing dependencies from a financial point of view.  And since
Dependency Finder is free, it's an even <b>better</b> deal.
</p>

<p>
The second one was
<a target="_blank" href="http://hackystat.ics.hawaii.edu/hackystat/docbook/index.html">Hackystat</a>.
This one is a metrics framework that has Dependency Finder as one of
its tools for getting information about a codebase.  It is from the
University of Hawaii.  They use a dependency graph, which they post-
process, to extract coupling information about programming elements.  I
think they might have an easier time collecting their data if they used
<code>OOMetrics</code> instead.  I'll have to get in touch with them
and see if see if that is the case.
</p>
</dd>
<dt><a name="2005-05-23">May 23, 2005</a></dt>
<dd>
<p>
Updated the website with data regarding Release 1.1.1.
</p>

<p>
Applied for a free license for
<a target="_blank" href="http://www.jetbrains.com/idea/">IntelliJ IDEA</a>
as part of their Open Source License program.  I may finally move away
from Emacs.  It does have a lot more refactories and a lot of smart
features.  We'll see.
</p>
</dd>
<dt><a name="2005-05-18">May 18, 2005</a></dt>
<dd>
<p>
Generated some of the data for the Samples regarding Release
1.1.1.
</p>
</dd>
<dt><a name="2005-05-17">May 17, 2005</a></dt>
<dd>
<p>
Release 1.1.1.
</p>

<p>
Also found about a new graphics package for rendering graphs:
<a target="_blank" href="http://jung.sourceforge.net/">JUNG</a>.
</p>
</dd>
<dt><a name="2005-05-12">May 12, 2005</a></dt>
<dd>
<p>
Looked at using JDK 1.5 to compile Dependency Finder for the 1.3
runtime.  I can use <code>source</code> and <code>target</code>
attributes on the Ant targets, but the <code>.class</code> files are
different from the ones compiled with JDK 1.3.  I need to investigate
further to make sure they will run fine with the 1.3 runtime.
</p>
</dd>
<dt><a name="2005-05-02">May 02, 2005</a></dt>
<dd>
<p>
Tech docs.
</p>

<p>
Finished release 1.1.1.
</p>

<p>
Considered merging <code>ClassFinder</code> and
<code>ClassList</code> into a single tool.  But in other areas, I have
simple tools that each do one thing only, so I might as well let these
two follow the same pattern.
</p>
</dd>
<dt><a name="2005-04-30">April 30, 2005</a></dt>
<dd>
<p>
Tech docs.
</p>
</dd>
<dt><a name="2005-04-29">April 29, 2005</a></dt>
<dd>
<p>
Someone brought
<a target="_blank" href="http://www.jayasoft.fr/org/modules/ivy/overview.php?">Ivy</a>
to my attention.  It is a package for analyzing dependencies and
producing reports with integration into Ant, Maven, Cruise Control, and
even Eclipse.  I couldn't understand the sample reports on the website,
and I don't think it offers the same kind of dynamic interaction
capabilities as Dependency Finder.  It is good that there is slowly
more and more tools to support object-oriented design.
</p>

<p>
Tech docs.
</p>
</dd>
<dt><a name="2005-04-28">April 28, 2005</a></dt>
<dd>
<p>
Tech docs.
</p>
</dd>
<dt><a name="2005-04-24">April 24, 2005</a></dt>
<dd>
<p>
Realized I had mistakenly swapped the current CVSDiff and
CVSChangelog reports when I last updated them.
</p>
</dd>
<dt><a name="2005-04-19">April 19, 2005</a></dt>
<dd>
<p>
Adjusted the JSPs that manage the graph in memory to keep track
of extrat, update, and load times separately.  This way,
<code>extract.jsp</code> limits itself to extract and update times, as
appropriate, while <code>load.jsp</code> takes care of load times.
</p>
</dd>
<dt><a name="2005-04-18">April 18, 2005</a></dt>
<dd>
<p>
Dependency Finder: social networking for your code!
</p>

<p>
Cleared up the documentation regarding the web application and how
to get a dependency graph loaded.
</p>

<p>
Also changed the obscure <code>delta</code> application variable
to the more aplty named <code>duration</code>.  It tells how long the
last extraction or loading took.  In the case of extracting a graph,
I should probably have separate numbers for the last full extraction
and the last update only.
</p>

<p>
On my new PC, I can't seem to start Tomcat on port 8080.  It keeps
complaining that port 8080 is already in use, but I can't figure out
by what.  I've changed the default config to port 8000 in the meantime
and it seems to work just fine.
</p>
</dd>
<dt><a name="2005-04-17">April 17, 2005</a></dt>
<dd>
<p>
Started working on a new printer for transitive closures.  This will
be harder than I thought.
<code>com.jeantessier.dependency.Printer</code> has way too much
machinery geared solely at printing graphs to be useful.  I also need
to figure out a way to find the closure's starting point <i>after</i>
the engine has computed it and possibly after the graph has been
reduced possibly as far as package-to-package.
</p>
</dd>
<dt><a name="2005-04-14">April 14, 2005</a></dt>
<dd>
<p>
Tech docs for closures.
</p>
</dd>
<dt><a name="2005-04-12">April 12, 2005</a></dt>
<dd>
<p>
Someone is having problems computing closures and finding paths
between components.  Can't blame them, the output from
<code>DependencyClosure</code> is very hard to follow.
</p>

<p>
They claim that in JDK 1.3.1, there is a path from
<code>JTree</code> to <code>Toolkit</code> through
<code>MouseEvent</code>.  <code>DependencyClosure</code> found one
through <code>Component</code> and I looked at the source for
<code>MouseEvent</code> from 1.3.1_09 and there is no mention of
<code>Toolkit</code> in there.  There is in JDK 1.4 but not in
1.3.
</p>

<p>
At the time, I didn't have <code>rt.jar</code> handy to repeat the
tests, so I used <code>DependencyFinder.jar</code> instead.  At first,
I tried to find a closure from
<code>com.jeantessier.dependencyfinder.cli.DependencyExtractor</code>
to <code>com.jeantessier.commandline.MultipleValuesSwitch</code>.  I
thought it called <code>CommandLine.addMultipleValuesSwitch()</code>
and would then find <code>MultipleValuesSwitch</code> from there, but
it doesn't.  Of course, <code>DependencyExtractor</code> does not have
multiple value switches, so there is no feature-to-feature path from
it to <code>MultipleValuesSwitch</code>.  I will need to document this
situation, in case someone else comes upon it too.
</p>

<p>
Gave some more thought to a specialized printer for transitive
closures.
</p>

<p>
Finishing the documentation shouldn't take too long.  Definitely not
long enough to justify having a beta release while we're waiting.
</p>
</dd>
<dt><a name="2005-04-10">April 10, 2005</a></dt>
<dd>
<p>
Uploaded screenshots to SourceForge.
</p>
</dd>
<dt><a name="2005-04-07">April 07, 2005</a></dt>
<dd>
<p>
Adjusting wording on the GUI to make it a little more intuitive.
Also played with fonts to get something close to Courier in graph
displays.
</p>

<p>
Had a "teachable moment" with a colleague today.  I think he finally
saw the benefits of using Dependency Finder when dealing with a large,
intricate codebase.
</p>

<p>
I'm going to make a beta release while I finish the updating the
documentation.
</p>

<p>
I also need to start working on a new printer for closures.  The
normal graph printer makes results too difficult to read.
</p>
</dd>
<dt><a name="2005-04-06">April 06, 2005</a></dt>
<dd>
<p>
Talked to a former coworker who is still using
<code>JarJarDiff</code>.  He mentioned that having it also report on
methods whose implementation changed without impacting their
signature.  This is the same as Request for Enhancement #900448.  So
don't despair, it'll come one day.
</p>
</dd>
<dt><a name="2005-04-05">April 05, 2005</a></dt>
<dd>
<p>
Checked in fix for case where group is a single <code>.class</code>
file.
</p>
</dd>
<dt><a name="2005-04-04">April 04, 2005</a></dt>
<dd>
<p>
Fixed the <code>ClassfileLoaderEventSource</code> to record the
first dispatch call and use it when dealing with a group of a single
<code>.class</code> file.
</p>
</dd>
<dt><a name="2005-04-03">April 03, 2005</a></dt>
<dd>
<p>
Wrote a sequence diagram of what happens when you call
<code>ClassfileLoader.load()</code>.  This will help me figure out
how to handle the case where processing a group consisting of a single
<code>.class</code> file.
</p>

<p>
<img src="../images/ClassfileLoader.load.jpg" /><br />
</p>
</dd>
<dt><a name="2005-04-02">April 02, 2005</a></dt>
<dd>
<p>
Wrote a unit test to replicate the problem with groups of a single
<code>.class</code> file.
</p>
</dd>
<dt><a name="2005-03-31">March 31, 2005</a></dt>
<dd>
<p>
Found a problem when analyzing individual <code>.class</code> files.
For some reason, the GUI keeps on skipping them.  It turns out the
dispatcher gets called twice: once when initiating the group processing
and a second time to deal with the file as part of the group.  The
GUI uses a <code>ModifiedOnlyDispatcher</code>, which instructs the
<code>ClassfileLoader</code> to ignore the file after the first time,
so the file is never read.  The intricate collaboration between the
various <code>ClassfileLoader</code> subclasses will make this hard to
figure out.
</p>
</dd>
<dt><a name="2005-03-30">March 30, 2005</a></dt>
<dd>
<p>
There is a problem with <code>DependencyFinder</code>: it ignores
<code>.class</code> files passed in explicitly.  Somehow, the
dispatcher seems to think it should ignore the files.  This is because
the dispatcher is asked twice about the file: once as a group and once
as an individual file.  Since the file hasn't changed between being
looked at as a group and as a single file, the
<code>ModifiedOnlyDispatcher</code> tells the loader to ignore it the
second time around.  Maybe <code>ClassfileLoaderDispatcher</code>
needs both a <code>dispatchGroup()</code> method and a
<code>dispatchFile()</code> method instead of the current single
<code>dispatch()</code> method.
</p>
</dd>
<dt><a name="2005-03-28">March 28, 2005</a></dt>
<dd>
<p>
Looking into setting <code>Font</code> for UI elements in the
GUI.
</p>
</dd>
<dt><a name="2005-03-27">March 27, 2005</a></dt>
<dd>
<p>
Finished adjusting all the remaining dependency graph-related
stylesheets to use the new information about inferred versus confirmed
nodes.  I took the opportunity to update all the HTML stylesheets to
use the CSS styles instead of hard-coded HTML tags.
</p>
</dd>
<dt><a name="2005-03-26">March 26, 2005</a></dt>
<dd>
<p>
Fixed <code>NodeHandler</code> to use the new <code>confirmed</code>
attribute in the XML description of graphs.  In the process, I added
new tests for <code>NodeHandler</code> and <code>NodeLoader</code>,
which will help a little with the code coverage of the test suite.
</p>
</dd>
<dt><a name="2005-03-24">March 24, 2005</a></dt>
<dd>
<p>
Copied confirmed status when computing transitive closures.
</p>
</dd>
<dt><a name="2005-03-22">March 22, 2005</a></dt>
<dd>
<p>
Adjusted dependency graph-related stylesheets to use the new
information about inferred versus confirmed nodes.  More to come.
</p>
</dd>
<dt><a name="2005-03-21">March 21, 2005</a></dt>
<dd>
<p>
Added support in the dependency graph's <code>TextPrinter</code> and
<code>XMLPrinter</code> to show inferred versus confirmed status of
nodes.  I had done most of it during a spike back in January, but I
didn't have any tests for it.  Now, I need to fix the DTD and the XSL
transformations.  And <code>NodeHandler</code> too.
</p>
</dd>
<dt><a name="2005-03-17">March 17, 2005</a></dt>
<dd>
<p>
Added <code>windowtitle</code> to <code>&lt;javadoc&gt;</code> target so the Javadocs have a proper
window title when viewed with a browser.
</p>

<p>
Final clean up for using <code>logoicon.gif</code>.
</p>

<p>
Since October, I've been struggling for a good term to distinguish nodes in the
dependency graph that match elements that were actually extracted versus those
that were merely referenced, but not extracted per se.  Back on <a href="#2004-10-08">2004-10-08</a>,
I came up with <i>referenced</i> versus <i>concrete</i>.  Both are troublesome because
they have other accepted meanings in closely related contexts, such as
<i>concrete class</i>.  Today, I finally came up with a better replacement:
unconfirmed references produce <i>inferred</i> nodes until the element is actually
extracted, at which point the node gets promoted to <i>confirmed</i>.
</p>

<p>
Made sure that <code>GraphCopier</code> and <code>GraphSummarizer</code> maintain a node's confirmed
vs. inferred status across graph copies.
</p>
</dd>
<dt><a name="2005-03-15">March 15, 2005</a></dt>
<dd>
<p>
Finished setting up a <code>favicon.ico</code> for the documentation
and the website.
</p>
</dd>
<dt><a name="2005-03-14">March 14, 2005</a></dt>
<dd>
<p>
Final checks for switching from TABs to spaces.
</p>
</dd>
<dt><a name="2005-03-13">March 13, 2005</a></dt>
<dd>
<p>
Switched from using a combination of TABs and spaces for indentation
to using spaces only.  This way, the code will look the same no matter
what is used to view it, especially in SourceForge's ViewCVS.
</p>
</dd>
<dt><a name="2005-03-10">March 10, 2005</a></dt>
<dd>
<p>
Added a checkbox to <code>extract.jsp</code> to choose between
updating the current graph (using <code>Monitor</code>) or extracting a
new graph from scratch.
</p>

<p>
Started putting a <code>favicon.ico</code> in the web application
and on the website.  I tried to cheat by using
<code>logoicon.gif</code> and using <code>&lt;link&gt;</code> tags in
the HTML.  It works fine with Firefox but I couldn't get it to work
with Internet Explorer.  I tried to create a <code>.ico</code> file
with some free editor, but I still couldn't get it to work.  Maybe it
is a caching problem.
</p>
</dd>
<dt><a name="2005-03-09">March 09, 2005</a></dt>
<dd>
<p>
Fine tuned spaces in JSPs for the web application.
</p>
</dd>
<dt><a name="2005-03-08">March 08, 2005</a></dt>
<dd>
<p>
Finished installing <code>Monitor</code> in the GUI.  The
<code>Monitor</code> now has a notion of open vs. closed sessions.
An open session keeps accumulating data across load sessions.  It never
tries to remove files that were "not visited".  A closed session works
like the previous version of <code>Monitor</code> and follows closely
the load sessions, removing classes from files that were not visited in
the latest session.
</p>
</dd>
<dt><a name="2005-03-06">March 06, 2005</a></dt>
<dd>
<p>
Worked on better integration between <code>Monitor</code> and
<code>DependencyFinder</code> in the GUI.
</p>

<p>
Someone raised an interesting problem.  Say class
<code>MySuperClass</code> defines methods <code>m1()</code> and
<code>m2()</code> where <code>m1()</code> calls <code>m2()</code>,
introducing a dependency <code>m1()&nbsp;--&gt;&nbsp;m2()</code>.
Now imagine a subclass <code>SomeSubclass</code> that overrides
<code>m2()</code> and defines a method <code>m0()</code> that calls
<code>m1()</code>.  Because <code>m1()</code> depends on
<code>m2()</code>, which is redefined in <code>SomeSubclass</code>,
<code>m0()</code> really depends on <code>SomeSubclass.m2()</code>
and not <code>MySuperclass.m2()</code>.  But the dependency graph
does not know about this.  It looks at all dependencies from a very
narrow context and does not see the bigger picture.  This is
unfortunate, but it will stay that way for the foreseeable future.  It
would take a <b>lot</b> of work to have Dependency Finder walk through
the program's logic, almost simulating a program run, and I just don't
have the resources to get into it.
</p>
</dd>
<dt><a name="2005-03-04">March 04, 2005</a></dt>
<dd>
<p>
Finished revamping of JSPs.  I changed the labels around the
controls for showing inbound or outbound dependencies.  Instead of
saying "inbounds" and "outbounds", they now show "<code>&lt;--</code>"
and "<code>--&gt;</code>" respectively.  Hopefully, this will make it
a little clearer what each one does.  I will need to find a way to do
the same in the GUI.
</p>
</dd>
<dt><a name="2005-03-03">March 03, 2005</a></dt>
<dd>
<p>
Continued revamping of JSPs.  Tested using <code>title</code>
attributes to make popup hints; they seem to work great, but the amount
of text I can put in them varies by browser.  I'll have to keep it
short and get rid of the sample Perl expressions, I'm afraid.
</p>
</dd>
<dt><a name="2005-03-02">March 02, 2005</a></dt>
<dd>
<p>
Someone asked how to find which JAR contains a class using
Dependency Finder.  I created a new tool, <code>ClassFinder</code> that
uses the group stack from <code>VerboseListenerBase</code> to collect
that information and print it out.
</p>

<p>
They also asked for the same information for packages.
</p>

<p>
Found out about using <code>title</code> attributes to make popup
hints in HTML instead of weird Javascript.  I'll make it part of the
redesign of the JSP pages.
</p>
</dd>
<dt><a name="2005-02-28">February 28, 2005</a></dt>
<dd>
<p>
Bad news for Dependency Finder: I just got Half-Life 2!  >:-)
</p>
</dd>
<dt><a name="2005-02-27">February 27, 2005</a></dt>
<dd>
<p>
Bad news for Dependency Finder: I just got Doom 3!  >:-)
</p>
</dd>
<dt><a name="2005-02-26">February 26, 2005</a></dt>
<dd>
<p>
Started to revamp the JSPs in the web application to use
<code>&lt;fieldset&gt;</code> and <code>&lt;legend&gt;</code> tags to
group UI elements, instead of twisted <code>&lt;table&gt;</code>
tags.  This is going to take a while and there is way too much
duplication between the JSPs.
</p>
</dd>
<dt><a name="2005-02-21">February 21, 2005</a></dt>
<dd>
<p>
Fixed <code>DependencyFinder</code> to use the new
<code>Monitor</code> when re-extracting <code>.class</code> file.  In
the process, I fixed it so it retains all extracted locations instead
of just the last one, like it used to do.  I had to make changes to
many of the action classes, but overall the structure has improved a
little.  It still needs more testing.
</p>

<p>
Adjusted <code>load.jsp</code> to remove the monitor and dispatcher
when loading the graph from XML files.
</p>
</dd>
<dt><a name="2005-02-18">February 18, 2005</a></dt>
<dd>
<p>
Updated the code coverage reports, both jcoverage and Clover.  The last time
went all the way back to <a href="#2003-07-20">2003-07-20</a>.  The number have improved a bit but
they are still rather laughable.  I added the procedure for generating them to
the Developer Guide.
</p>

<p>
Upgraded my testing environment from Clover 1.3_01 to 1.3.4.
</p>
</dd>
<dt><a name="2005-02-16">February 16, 2005</a></dt>
<dd>
<p>
Fixed <code>build.xml</code> to use <code>&lt;junit&gt;</code> and
<code>&lt;junitreport&gt;</code> tasks to run the unit tests and get a
nice HTML report.  It works fine on MacOS, but not on Windows XP, for
some reason.  I get an <code>OutOfMemoryError</code> no matter how much
memory I put in <code>ANT_OPTS</code>.
</p>

<p>
I'm also going to use spaces only for indenting
<code>build.xml</code>.  I was using combinations of tabs and spaces,
but it looks very strange in some editors that show tabs as four
spaces.  Eventually, I might do the same in Java files, too.
</p>
</dd>
<dt><a name="2005-02-13">February 13, 2005</a></dt>
<dd>
<p>
Adjusted <code>OpenFileAction</code> so it gets its
<code>NodeFactory</code> from the model instead of creating its own.
This is in preparation to having it use a <code>Monitor</code>
instead.
</p>
</dd>
<dt><a name="2005-02-05">February 05, 2005</a></dt>
<dd>
<p>
Started to work out how to have <code>DependencyFinder</code> use
the new <code>Monitor</code>.  That GUI code is a mess!
</p>
</dd>
<dt><a name="2005-02-04">February 04, 2005</a></dt>
<dd>
<p>
Compiles and passes all tests with JDK 1.5.0 on Alienware.  Compiles
in 15 seconds and tests run in 10.203 secs.  My laptop, with JDK 1.4.2,
would take 31 seconds to compile it and the tests would take 20 secs.
to run.
</p>
</dd>
<dt><a name="2005-02-03">February 03, 2005</a></dt>
<dd>
<p>
Started thinking about reorganizing the build process to compile
everything into a <code>build</code> directory, like many other
projects do.  I must investigate further what the current Ant best
practices are like.
</p>
</dd>
<dt><a name="2005-02-02">February 02, 2005</a></dt>
<dd>
<p>
New hardware: Alienware.
</p>
</dd>
<dt><a name="2005-01-29">January 29, 2005</a></dt>
<dd>
<p>
Dependency Finder is now four years old.
</p>

<p>
It turns out the problem with re-extracting graphs had to do with
<code>CodeDependencyCollector</code> not setting <i>concreteness</i>
correctly.  That would throw off <code>DeletingVistor</code> when
rolling back a class during re-extraction.  One problem fixed.
</p>

<p>
Now, I need to get the GUI to use the new <code>Monitor</code>
too.
</p>
</dd>
<dt><a name="2005-01-28">January 28, 2005</a></dt>
<dd>
<p>
Finally got <code>Monitor</code> to behave properly.  But now, it's
the <code>DeletingVisitor</code> that seems to be missing some
dependencies.  I extract a graph, change a space in one file,
recompile, and re-extract (just the one file) and all of a sudden, the
graph has different numbers of inbound and outbound dependencies.
Worse, if I remove all <code>.class</code> files and re-extract,
effectively removing the entire graph, I end up with a partial graph
with no outbound dependencies but some inbound ones left.  Puzzling
</p>
</dd>
<dt><a name="2005-01-26">January 26, 2005</a></dt>
<dd>
<p>
Started coding <code>Monitor</code>, but I keep on missing some
aspect of tracking files because the behavior is not quite there
yet.
</p>
</dd>
<dt><a name="2005-01-24">January 24, 2005</a></dt>
<dd>
<p>
Further design for <code>Monitor</code> (on paper only).
</p>
</dd>
<dt><a name="2005-01-22">January 22, 2005</a></dt>
<dd>
<p>
Worked on a possible design for an object that could monitor what
files are being read and what classes are in them, so it can roll back
changes to the dependency graph from a class before it is re-read.  I
don't have a name for it yet, so I'll just call it <code>Monitor</code>
in the meantime.
</p>
</dd>
<dt><a name="2005-01-20">January 20, 2005</a></dt>
<dd>
<p>
It's one of those bugs.  The moment I put in logging statements, the
<code>ModifiedOnlyDispatcher</code> suddenly starts to work.  Well, now
the classfile loader is loading the correct files.
</p>

<p>
Used <code>ModifiedOnlyDispatcher</code> in
<code>DependencyFinder</code>.  But along with
<code>extract.jsp</code>, it does not yet adjust its dependency graph
correctly.  I need to make them keep the old graph, remove reloaded
classes, and somehow remove classes that have altogether disappeared.
More work ahead.
</p>
</dd>
<dt><a name="2005-01-19">January 19, 2005</a></dt>
<dd>
<p>
Tried <code>ModifiedOnlyDispatcher</code> with
<code>extract.jsp</code>.  It was a little overeager, skipping
directories without even looking if files in them had changed.  So I
modified it to not do anything special with directories and always
delegate to the underlying dispatcher.  Somehow, it doesn't seem to
really skip unmodified files, so I'll have to investigate further.
</p>
</dd>
<dt><a name="2005-01-18">January 18, 2005</a></dt>
<dd>
<p>
Added more tests for <code>DeletingVisitor</code> to make sure that
deleting nodes with inbound dependencies does not remove them from the
graph but only makes them as referenced elements.
</p>

<p>
Added flags to the web application to control whether or not to
display the <code>source</code> and <code>file</code> parameters on
<code>extract.jsp</code> and <code>load.jsp</code> respectively.  This
can help in debugging where a given installation is getting its data
from.
</p>
</dd>
<dt><a name="2005-01-17">January 17, 2005</a></dt>
<dd>
<p>
Finished te support for removing nodes from the dependency graph.
It turns out the logic was so twisted that I had to resort to using a
visitor in the end.  The new class is called
<code>DeletingVisitor</code>.  It traverses the graph and removes
specified nodes and cleans up after them.
</p>
</dd>
<dt><a name="2005-01-11">January 11, 2005</a></dt>
<dd>
<p>
Found a bug in the Unix script for <code>OOMetricsGUI</code>.  It
tried to be clever and use a local variable based on the named under
which the script was invoked to determine the class name to start.  It
works for all other scripts, but in this case, the class name is
different from the script name.  The script <code>OOMetrics</code>
starts <code>com.jeantessier.dependencyfinder.<b>cli</b>.OOMetrics</code>
and the script <code>OOMetricsGUI</code> starts
<code>com.jeantessier.dependencyfinder.<b>gui</b>.OOMetrics</code>.
</p>

<p>
I fixed the bug and issued patch
<a target="_blank" href="http://sourceforge.net/tracker/index.php?func=detail&aid=1100722&group_id=43305&atid=435886">#1100722</a>.
</p>

<p>
Fixed the bug using a CVS branch: <code>bug-1100131</code>.
</p>
</dd>
<dt><a name="2005-01-08">January 08, 2005</a></dt>
<dd>
<p>
The logic to pull out nodes is too complex.  I'm getting lost in all
the bookkeeping required.
</p>
</dd>
<dt><a name="2005-01-06">January 06, 2005</a></dt>
<dd>
<p>
Started putting support in <code>NodeFactory</code> to remove nodes.
I still need to handle the dependendcies themselves.
</p>
</dd>
<dt><a name="2005-01-04">January 04, 2005</a></dt>
<dd>
<p>
Stated implementing a <code>ClassfileLoaderDispatcher</code>
decorator to support reloading only <code>.class</code> files that have
changed.
</p>
</dd>
<dt><a name="2005-01-03">January 03, 2005</a></dt>
<dd>
<p>
Amended the User Manual to have the simpler way of narrowing down an
API diff to the subset actually used.
</p>

<p>
Incremented the date in the copyright to 2005.  Incremented the
working version number to 1.1.1.
</p>
</dd>
<dt><a name="2004-12-30">December 30, 2004</a></dt>
<dd>
<p>
Came up with a much better way to narrow down a diff to the API
actually used by some software.  I use <code>ListSymbols</code> first
on the library and then use the symbols to extract a subgraph from the
calling software.  By using
<code>DependencyReporter -show-empty-nodes</code>, the graph only has
the nodes for used symbols.  Converting this subgraph from XML to text
with <code>DependencyGraphToText</code> gives me the subset of symbols
that are used in the software.  Pass this shorter list to
<code>PublishedDiffToHTML</code> and that is all there is to it.
</p>
</dd>
<dt><a name="2004-12-29">December 29, 2004</a></dt>
<dd>
<p>
Finally got around to cleaning up some of the HTML on the website.
The documents say they use HTML 4.01, but I try to follow XHTML as much
as possible.  This sometimes yields strange results on some browsers.
For instance, I like to have empty named anchors as
<code>&lt;a name</code>"someName" /&gt;= but some browsers won't see
the empty tag but a start tag instead and proceed to underline all text
after it.  So I have to write it as
<code>&lt;a name</code>"someName"&gt;&lt;/a&gt;=.  But that doesn't
work for <code>&lt;br&gt;</code> or <code>&lt;hr&gt;</code> because
they do not allow any content and therefore the notations
<code>&lt;br&gt;&lt;/br&gt;</code> and
<code>&lt;hr&gt;&lt;/hr&gt;</code> are illegal.  For those, I can still
write <code>&lt;br /&gt;</code> or <code>&lt;hr /&gt;</code> because
the browser doesn't expect any content and simply ignores the trailing
<code>/</code>.  So my rule has been to write closing tags for elements
that can have content, and the XML empty notation when the elements
cannot have content.  That should fix it for most people.
</p>
</dd>
<dt><a name="2004-12-28">December 28, 2004</a></dt>
<dd>
<p>
Release 1.1.0.
</p>
</dd>
<dt><a name="2004-12-22">December 22, 2004</a></dt>
<dd>
<p>
Updated CVS diff and change log data.
</p>

<p>
Generated some
<a target="_blank" href="statcvs/">CVS statistics</a> using
<a target="_blank" href="http://statcvs.sf.net/">StatCVS</a>.
</p>
</dd>
<dt><a name="2004-12-20">December 20, 2004</a></dt>
<dd>
<p>
Adjusted tech docs in the User Manual.
</p>

<p>
Updated version number to 1.1.0.  I'm ready for the release.
</p>
</dd>
<dt><a name="2004-12-19">December 19, 2004</a></dt>
<dd>
<p>
Adjusted tech docs in the User Manual.
</p>
</dd>
<dt><a name="2004-12-18">December 18, 2004</a></dt>
<dd>
<p>
Reviewed latest additions to the User Manual.
</p>
</dd>
<dt><a name="2004-12-16">December 16, 2004</a></dt>
<dd>
<p>
Wrote examples of using <code>OOMetrics</code> for tracking usage of
deprecated elements and computing the D' metric in the User Manual.
</p>
</dd>
<dt><a name="2004-12-13">December 13, 2004</a></dt>
<dd>
<p>
Wrote a section of the User Manual to describe how you can keep
track of usage of deprecated programming elements using
<code>DependencyReporter</code>.
</p>
</dd>
<dt><a name="2004-12-12">December 12, 2004</a></dt>
<dd>
<p>
Wrote a section of the User Manual to describe how you can limit the
API diff report of a third-party library to the subset of that API that
you are using in your code.
</p>

<p>
Found a bug with the CLI scripts.  When I generated the template for
1.1.0 beta3, I used an example that lacked the Xerces libraries.  This
means that all tools that need to read XML coudn't find a proper
parser.  Since no one has complained yet, I guess they all use the GUI
or the Ant tasks.  I won't write a patch for this since the official
1.1.0 release is very close and will have the correct scripts.
</p>

<p>
Had a similar problem with the XSL scripts, but in reverse.  Most of
them are straightforward XSL transformations and only require Xalan
JARs.  But <code>PublishedDiffToHTML.xsl</code> uses some custom code
and needs Dependency Finder's JARs.  I changed the template to include
them all the time, just like the Unix template was doing.
</p>
</dd>
<dt><a name="2004-12-11">December 11, 2004</a></dt>
<dd>
<p>
Figured out how to detect if a file has changed since it was last
extracted.  I'll use the decorator pattern to wrap the
<code>ClassfileLoaderDispatcher</code> of the
<code>ClassfileLoader</code> with a decorator that will remember the
modification date of files and instruct the loader to ignore files that
have not been modified.  By using a decorator, I don't have to change
any interfaces and I get to intercept the call to the real dispatcher
before it gets made.  Other solutions, like a common super class for
dispatchers, had the problem that the subclass method was being called
first.  This would necessitate some kind of communication between the
subclass and its superclass to get the new behavior.  A decorator is a
simpler, more elegant solution.
</p>

<p>
This will not go in the 1.1.0 release, but most likely the very
next one.
</p>
</dd>
<dt><a name="2004-12-10">December 10, 2004</a></dt>
<dd>
<p>
Got an idea for undoing extraction of a single class on the graph.
If I can do that, then I can re-extract a single class that I just
recompiled and see it's effect on the graph without re-extracting the
whole graph.  I'm still strugling with detecting if a file has changed
since it was last extracted, so I can launch a re-extraction on a whole
codebase and have it pick only the files that have changed.
</p>
</dd>
<dt><a name="2004-12-09">December 09, 2004</a></dt>
<dd>
<p>
Added a section to the User Manual to deal with very large codebase
by breaking them up and analysing the pieces separetely.
</p>

<p>
Added version information to the documentation.
</p>
</dd>
<dt><a name="2004-12-01">December 01, 2004</a></dt>
<dd>
<p>
Fixed binary files for version 1.1.0 beta3 which had been compiled
with JDK 1.4 by accident.  I recompiled them with JDK 1.3 and uploaded
them again to SourceForge.  I'm curious if anyone noticed.
</p>

<p>
Removed some old sample files that dated prior to version 1.0.
</p>
</dd>
<dt><a name="2004-11-30">November 30, 2004</a></dt>
<dd>
<p>
Updated <code>&lt;cvstagdiff&gt;</code> and
<code>&lt;cvschangelog&gt;</code> reports to account for the release of
version 1.1.0 beta3.
</p>
</dd>
<dt><a name="2004-11-28">November 28, 2004</a></dt>
<dd>
<p>
Third beta release for version 1.1.0.
</p>
</dd>
<dt><a name="2004-11-27">November 27, 2004</a></dt>
<dd>
<p>
Finished updating the documentation to account for the Unix
distribution.  I also used this occasion to update the documentation
for the web application and explain <code>load.jsp</code>.
</p>
</dd>
<dt><a name="2004-11-26">November 26, 2004</a></dt>
<dd>
<p>
Tested the Unix distribution on MacOS X.  Also changed the
distribution to have <code>.zip</code> files for Windows and
<code>.tar.gz</code> and <code>.tar.bz2</code> for Unix.  I also have
matching archives for source code.
</p>
</dd>
<dt><a name="2004-11-24">November 24, 2004</a></dt>
<dd>
<p>
I've been struggling for some time with how to deal with start
scripts for Unix.  I also find it tedious to maintain a large number of
scripts that are identical except for one identifier.  At first, I
thought of having some kind of <i>install</i> program that could link
up the right version of the right script, but I was hesitant at making
the installation procedure more complex.  A friend suggested to
generate the scripts at build-time.  This solves two problems:
maintaining nearly identical files and having start scripts for Unix.
Now, I can generate both and select which ones get in the ZIP file for
Windows and which ones get in a new compressed TAR file for Unix.
</p>

<p>
Right now, I'm generating a ZIP file with <code>.bat</code> scripts
only and a separate compressed TAR file with shell scripts with no
extension only.  Neither one has all the scripts but they are otherwise
identical.  I could have the two files be identical and have both sets
of scripts, and possibly give the shell scripts a <code>.sh</code>
extension.  But I hesitate since I don't think this is the standard in
Unix-land yet.
</p>

<p>
Code contribution!
</p>

<p>
Joe Fisher submitted a new version of the GUI's
<code>SaveFileAction</code> so it reports its progress to the user.  I
have incorporated it into the codebase, it will ship with the next
release.  Thanks, Joe.  You get to be the very first external
contributor to the project.
</p>
</dd>
<dt><a name="2004-11-22">November 22, 2004</a></dt>
<dd>
<p>
Moved the detailed dependency-related measurement explanations from
the Developer Guide to the Manual.  Finalized the documentation for
measurements, at least for now.
</p>

<p>
Renamed <code>SymbolList</code> to <code>ListSymbols</code>.
Finished its documentation and wrote a corresponding Ant task.
</p>

<p>
Started looking at
<a target="_blank" href="http://fitnesse.org/">FitNesse</a> and the
<a target="_blank" href="http://fit.c2.com/">FIT framework</a> again.
One thing I don't understand is how to set these up as part of an
automated build and put the contents under source control.  Someone on
the FitNesse Yahoo! group gets weird behavior when they put the
contents of the FitNesse wiki under CVS and the gurus don't seem to
have an easy solution.  One option is to use the FIT framework by
itself, but how do I run all the tests automatically and have them
report that everything went fine or not?
</p>
</dd>
<dt><a name="2004-11-14">November 14, 2004</a></dt>
<dd>
<p>
Fixed the Unix script for <code>OOMetrics</code> and
<code>OOMetricsGUI</code>.  Because they were symbolic links to one
script used by all other tools, they were missing their mandatory
<code>-default-configuration</code> switch.  Now, they are their own
scripts, shared by no one else.
</p>

<p>
Tech docs around metrics and dependency-related measurements.
</p>
</dd>
<dt><a name="2004-11-13">November 13, 2004</a></dt>
<dd>
<p>
Fixed <code>DependencyMetrics</code> in both the CLI and Ant task.
It used to process each graph input file as it was loaded, which could
result in some nodes being counted more than once if they show up in
more than one file.  By reading all graphs beforehand, they get merged
together before the measurements are taken, preventing double
count.
</p>
</dd>
<dt><a name="2004-11-11">November 11, 2004</a></dt>
<dd>
<p>
I decided not to mess with the UI on the GUI application.  It would
require massive reorganization to account for the different semantics
of the UI elements between closures and the other functions.  I will
need to rework it anyway when I have a new renderer for closures, I'll
take care of it then.  I want to finish this release.
</p>

<p>
Also cleaned up the build file a little more.
</p>
</dd>
<dt><a name="2004-11-10">November 10, 2004</a></dt>
<dd>
<p>
Adjusted the UI for <code>closure.jsp</code> and
<code>advancedclosure.jsp</code> to use radio buttons when specifying
the degree of summarization to apply to the closure.
</p>

<p>
Adjusted <code>build.xml</code> to use Tomcat's manager when
deploying the web application.  At the same time, I extracted some of
the properties to external properties files, such as those dealing with
Tomcat or CVS tasks.
</p>

<p>
Added better examples to the documentation of the
<code>dependencyclosure</code> Ant task.
</p>
</dd>
<dt><a name="2004-11-09">November 09, 2004</a></dt>
<dd>
<p>
Fixed the Tools docs and Ant task documentation to account for new
switches to <code>DependencyClosure</code>.  I also started reworking
the UI for <code>closure.jsp</code> and
<code>advancedclosure.jsp</code>, but I'm going to need some more time
to finalize it and apply it to the GUI too.
</p>
</dd>
<dt><a name="2004-11-04">November 04, 2004</a></dt>
<dd>
<p>
It turns out the problem with the switch
<code>-start-includes /^com.jeantessier.dependency.NodeFactory/</code>
was related to the DOS command interpreter.  It somehow stripped the
caret from the regular expression.  Putting double quotes around it
fixed it.
</p>
</dd>
<dt><a name="2004-11-03">November 03, 2004</a></dt>
<dd>
<p>
Fixed the parameters for <code>DependencyClosure</code> in both the
CLI and Ant task. But at least the CLI version seems to still have
problems: the switch
<code>-start-includes /^com.jeantessier.dependency.NodeFactory/</code>
still matches anything with <code>NodeFactory</code> in it, as opposed
to only names beginning with it.
</p>

<p>
Someone filed bug
<a target="_blank" href="http://sourceforge.net/tracker/index.php?func=detail&aid=1058905&group_id=43305&atid=435884">#1058905</a>
where <code>PublishedDiffToHTML.xsl</code> still uses the old method
names from before the naming change.  I fixed the bug and issued patch
<a target="_blank" href="http://sourceforge.net/tracker/index.php?func=detail&aid=1060021&group_id=43305&atid=435886">#1060021</a>.
</p>
</dd>
<dt><a name="2004-10-28">October 28, 2004</a></dt>
<dd>
<p>
Thought of a new feature for transitive closures.  I was tracking
calls that go through an interface-implementation transition a few
times.  Because of the dependency severing nature of those transitions,
I could not compute the closure for the whole call sequence
automatially.  This got me the idea that if the dependency graph were
to keep track of inheritance and implementation information, the tools
would be able to cross the interface-implementation transition and
compute larger sequences.  This will take some while.
</p>

<p>
Fixed the broken link to Perl help in the web app.
</p>

<p>
Fixed <code>extract.jsp</code> where I had forgotten to account for
the fact that <code>CodeDependencyCollector</code> was no longer a
<code>LoadListener</code>.
</p>

<p>
Fixed a number of setters that were mistakenly named
<code>getXXX()</code> when I changed the naming scheme.
</p>
</dd>
<dt><a name="2004-10-27">October 27, 2004</a></dt>
<dd>
<p>
Checked in the new version of <code>TransitiveClosure</code> that
uses the new <code>TransitiveClosureEngine</code>.  All the unit tests
are now passing, for the first time in nearly two years.  I still need
to fix the UI and documentation of the transitive closure tools.
</p>
</dd>
<dt><a name="2004-10-25">October 25, 2004</a></dt>
<dd>
<p>
Changed <code>GraphSummarizer</code> so it does not create
extraneous dependencies, going from
<code>a.A.a&nbsp;--&gt;&nbsp;b.B.b</code> to
<code>a.A&nbsp;--&gt;&nbsp;b.B</code> and
<code>a&nbsp;--&gt;&nbsp;b</code> unnecessarily.
</p>
</dd>
<dt><a name="2004-10-24">October 24, 2004</a></dt>
<dd>
<p>
Adjusted <code>TransitiveClosure</code> to use two engines, one for
upstream and one for downstream closures.  The two engines share the
same factory, so the results are all in a single graph, like it used
to be with the old processing.  Still, a lot of tests are broken and it
will take some time to fix them.
</p>

<p>
I was able to test my theories about separate summarization on
<code>TestTransitiveClosureWithTestClass</code>.  Mostly successful,
but one test ends up with too many dependencies because
<code>GraphSummarizer</code> is a little too eager.
</p>
</dd>
<dt><a name="2004-10-21">October 21, 2004</a></dt>
<dd>
<p>
Thought up of a way to have <code>TransitiveClosure</code> work on
the raw graph and do the summarization separately.  This works fine for
CLI and Ant tasks, but is awkward for the GUI and web application where
the user cannot easily save intermediary results.  These last two will
need to include the summarization function internally and rework their
UI accordingly.
</p>
</dd>
<dt><a name="2004-10-20">October 20, 2004</a></dt>
<dd>
<p>
Retrofitted <code>TransitiveClosure</code> to use the new
<code>TransitiveClosureEngine</code>.  Many tests are now broken
because it used to include summarization capabilities that are no
longer there.
</p>
</dd>
<dt><a name="2004-10-19">October 19, 2004</a></dt>
<dd>
<p>
More tests in preparation for retrofitting
<code>TransitiveClosure</code> to use the new
<code>TransitiveClosureEngine</code>.
</p>
</dd>
<dt><a name="2004-10-12">October 12, 2004</a></dt>
<dd>
<p>
Found
<a target="_blank" href="http://www.java.net/">java.net</a> and took
initial steps to have Dependnecy Finder listed there too.
</p>
</dd>
<dt><a name="2004-10-11">October 11, 2004</a></dt>
<dd>
<p>
Found <a target="_blank" href="http://www.ihep.ac.cn/~chep01/paper/8-024.pdf">an interesting article</a>
by a group at CERN who built a dependency analyzer for looking at their software:
large C++ systems used in high-energy physics.  This was really interesting since
they had roughly the same motivations I had to come up with Dependency Finder.
They have a nice introduction as to why you need to manage dependencies very
closely and how painful it can be if you don't automate the whole thing.
</p>
</dd>
<dt><a name="2004-10-10">October 10, 2004</a></dt>
<dd>
<p>
Build initial support for distinguishing between referenced versus
concrete nodes in the dependency graph.  <code>NodeFactory</code> now
has versions of its <code>createX()</code> methods that take a boolean
parameter to mark nodes as concrete.  The default is for them to be
marked as referenced only.  Marking a node as concrete makes its
ancestors concrete, but not its sibblings nor descendants.
</p>
</dd>
<dt><a name="2004-10-08">October 08, 2004</a></dt>
<dd>
<p>
Came up with a name!  Nodes are <i>referenced</i> by default,
until the dependency extractor actually encounters them in analyzed
code and then marks them as <i>concrete</i>.
</p>
</dd>
<dt><a name="2004-10-06">October 06, 2004</a></dt>
<dd>
<p>
Thought about categorizing dependency nodes some more.  I was
concerned that dependencies on things that are not part of the body of
code under analysis might muddy things up and that everything might end
up in <code>Object</code> somehow.  If I find a non-visited feature in
a visited class node, and I start walking up the inheritance tree to
locate where that feature is actually defined (wait a minute, I will
need to store inheritance information too), I might not find the
definition if it is in some third party library.
</p>
</dd>
<dt><a name="2004-10-05">October 05, 2004</a></dt>
<dd>
<p>
Got an idea to characterize nodes in the dependency graph between
nodes that represent elements that are only referenced by analyzed code
versus nodes that represent elements that underwent analysis.  I was
trying to track dependencies in a piece of software and hit a wall when
I tried to see if anybody accessed private methods of an implementation
class.  All the other methods it inherited from superclasses kept
showing up too.
</p>

<p>
Under JDK 1.4, dependencies are resolved to the exact type of the
reference.  For example, in the case of the Template Method pattern,
if the client calls the template method on the concrete subclass, it
creates a dependency to a shadow template method on the subclass, not
the actual template method in the abstract superclass.  This is a new
form of interface polution where a class can have symbols that it does
not necessarily define but that it rather inherits from a superclass.
These can create false impressions when running dependency analysis
because you can miss actual calls to a method that are attributed an
hypothetically overriden version in a subclass.
</p>

<p>
I could have Dependency Finder figure it out, somehow.
</p>
</dd>
<dt><a name="2004-10-04">October 04, 2004</a></dt>
<dd>
<p>
Finished <code>LoadListenerVisitorAdapter</code>.
</p>

<p>
I also noticed that I have quite a few tools that do similar things.
I need to align the naming of all these tools.
<code>ListDeprecatedElements</code> lists symbols from compiled code.
It focuses solely on elements marked as deprecated.  It uses a
<code>Printer</code> to print elements as it finds them.
<code>SymbolList</code> lists symbols from compiled code.  You can
choose between class names and feature names, but it offers no
filtering.  It uses a <code>Collector</code> to assemble the output and
prints it as a separate operation.  <code>ListDocumentedElements</code>
lists symbols from source code by filtering of special javadoc tags.
</p>
</dd>
<dt><a name="2004-10-03">October 03, 2004</a></dt>
<dd>
<p>
As I developed <code>SymbolList</code>, I realized that the way it
ties a <code>LoadListener</code> and a <code>Visitor</code> was common
to a few classes and that each one was reimplementing it, always in the
same manner.  I decided to get rid of this code duplication by putting
it in a <code>LoadListenerVisitorAdapter</code>.  From now on, if you
want a visitor to get called as classfiles are loaded, you will be able
to wrap the visitor in a <code>LoadListenerVisitorAdapter</code> and
then register it as a load listener.
</p>
</dd>
<dt><a name="2004-10-01">October 01, 2004</a></dt>
<dd>
<p>
For some reason, I thought Log4J had moved to Jakarta Commons as the
Logging library.  But after a little bit of investigation, I realized
that was not the case.  And there are no new version of Log4J yet.
</p>

<p>
Started looking at Maven.
</p>
</dd>
<dt><a name="2004-09-30">September 30, 2004</a></dt>
<dd>
<p>
Discovered that new versions of Ant have a <code>&lt;war&gt;</code>
task to help creating <code>.war</code> files.
</p>
</dd>
<dt><a name="2004-09-20">September 20, 2004</a></dt>
<dd>
<p>
Second beta release for version 1.1.0.  I opened the developer
discussion forum for people who use the API to write extensions or
custom processors.  Hopefully, the familiarity of Java camel-case names
will outweigh the pain of moving their code to the new method names.
</p>
</dd>
<dt><a name="2004-09-19">September 19, 2004</a></dt>
<dd>
<p>
Generated a few finer-grained CVS reports to show changes between
beta releases for 1.1.0.
</p>
</dd>
<dt><a name="2004-09-14">September 14, 2004</a></dt>
<dd>
<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>Ant</td>
        <td>:</td>
        <td>1.6.1</td>
        <td>-></td>
        <td>1.6.2</td>
    </tr>
</table>
</blockquote>

<p>
Revived the CVS diff reports using Ant's CvsTagDiff task.  I'm also
trying to have Ant generate change log reports, but the
<code>ssh</code> authentication is getting in the way.  I need to use
<code>pserver</code> access but it seems <code>cvs</code> won't let me
use it on a directory that was not checked out with
<code>pserver</code>.  So now I have to keep two copies of the
development tree just so I can generate reports.  This is annoying.
</p>

<p>
I also looked at <code>StatCvs</code> from SourceForge.  It still
needs its own copy of everything, so it might not help all that much.
But it has nice little charts.  :-)
</p>
</dd>
<dt><a name="2004-09-12">September 12, 2004</a></dt>
<dd>
<p>
Phase IX: assess work to change naming in test code.
</p>

<p>
Phase X: fixed test code.  I'm done.
</p>
</dd>
<dt><a name="2004-09-09">September 09, 2004</a></dt>
<dd>
<p>
Phase VIII: fix the JSP files for the web app.
</p>
</dd>
<dt><a name="2004-09-07">September 07, 2004</a></dt>
<dd>
<p>
Wrote a new tool to list all symbolic names in a codebase:
<code>SymbolList</code>.  It shows all class names, all methods' full
signature, and all fields' full signature.  In addition, if the code
was compiled with <code>-g</code> and retained its local variables
table, the tool can list method parameters and local variables too.
</p>

<p>
Phase VI: find what previous phases might have missed.
</p>

<p>
Phase VII: fix what previous phases had missed.
</p>
</dd>
<dt><a name="2004-09-06">September 06, 2004</a></dt>
<dd>
<p>
Phase V: everything else under <code>src/</code>.  Now I have to
deal with <code>tests/</code> and straggling parameters and local
variables.
</p>
</dd>
<dt><a name="2004-09-05">September 05, 2004</a></dt>
<dd>
<p>
Phase IV: finished <code>com.jeantessier.dependency</code>.
</p>
</dd>
<dt><a name="2004-09-04">September 04, 2004</a></dt>
<dd>
<p>
Phase II: finished <code>com.jeantessier.classreader</code>.
</p>

<p>
Phase III: did <code>com.jeantessier.commandline</code> and started
<code>com.jeantessier.dependency</code>.
</p>
</dd>
<dt><a name="2004-09-03">September 03, 2004</a></dt>
<dd>
<p>
Looking a little further into renaming symbols.  There are over
3,000 methods, but from those I can remove constructors, which will
retain their initial capital, and methods that already follow the Java
convention, such as <code>toString()</code> and
<code>equals(java.lang.Object)</code>.  But I must also account for
fields, where I use all lowercase with underscore to separate words.
Constants in all caps don't count, and fields with only one word are
just fine.  So I wrote a little Perl script to list what's left and
ended up with 2,611 symbols that need renaming.
</p>

<p>
That still leaves local variable to take care of.  I'll need to
tweak <code>com.jeantessier.metrics.MetricsGatherer</code> to find a
way to list them.  It currently counts them, but doesn't keep track of
their names.  Then again, maybe a simple classfile printer could do the
trick.
</p>

<p>
Phase I: got started on <code>com.jeantessier.classreader</code>.
I'll check it in, and when I'm done, I'll release beta 2 and see the
reaction it gathers.
</p>
</dd>
<dt><a name="2004-09-01">September 01, 2004</a></dt>
<dd>
<p>
Toying with the idea of changing the naming convention to adopt the
regular Java convention instead of my beloved C++ convention.  This
would mean renaming accessors to <code>getX()</code> and
<code>setX()</code> and renaming all methods and fields so they
start with a lowercase letter and use camel case.  That's a lot of
work and will obviously break the code of anyone who's be programming
to the API.  Is it acceptable, if it brings the code in line with what
people expect of Java code?  And it's quite an undertaking: 239 classes
and over 3,000 methods.
</p>
</dd>
<dt><a name="2004-08-24">August 24, 2004</a></dt>
<dd>
<p>
Configuring FitNesse and HtmlFixture still eludes me.  I need some
kind of tutorial on how to set them up together.  And once that is
done, how do I put the tests under source control?  Let alone running
them automatically from an Ant script?  That includes starting a web
container, deploying the web app, and connecting to it.
</p>
</dd>
<dt><a name="2004-08-23">August 23, 2004</a></dt>
<dd>
<p>
Started looking at <a target="_blank" href="http://fitnesse.org/">FitNesse</a> in
combination with its HtmlFixture to test the web app.
</p>
</dd>
<dt><a name="2004-08-18">August 18, 2004</a></dt>
<dd>
<p>
At work, we're using
<a target="_blank" href="http://htmlunit.sourceforge.net/">HtmlUnit</a>
to test a web app through a browser.  I really like the way it
simulates the user connection and allows you to query the resulting
HTML, including following hyperlinks and submiting forms.  This could
be very helpful in testing Dependency Finder's web app.
</p>
</dd>
<dt><a name="2004-07-21">July 21, 2004</a></dt>
<dd>
<p>
Had a baby boy.  Work on Dependency Finder will have to slow down
for a little while.
</p>
</dd>
<dt><a name="2004-07-12">July 12, 2004</a></dt>
<dd>
<p>
Someone pointed out that the HTML in the website have a
<code>DOCTYPE</code> for HTML 4.01 but actually contain XHTML
markup.  Things like <code>&lt;br /&gt;</code> and
<code>&lt;a name</code>"..." /&gt;=.  This last one is specially
troublesome since most browsers start looking for the closing
<code>&lt;/a&gt;</code> tag and consider everything past the opening
tag a hyperlink.  I should change them to
<code>&lt;a name</code>"..." &gt;&lt;/a&gt;= instead.  I'll try to fix
them shortly.
</p>
</dd>
<dt><a name="2004-07-06">July 06, 2004</a></dt>
<dd>
<p>
Some more thoughts about combining selection criteria.
</p>

<p>
So the target boolean expression is:
</p>

<pre>
    (include1 || include2) && (!exclude1 && !exclude2)
</pre>

<p>
Which we can generalize and rewrite as:
</p>

<pre>
    (include1 || include2 || ...) && !(exclude1 || exclude2 || ...)
</pre>

<p>
Now, most of the time, there is only a single <i>include</i>
clause and a single <i>exclude</i> clause.  Especially in the GUI and
the web application, where I have limited the range of options and
where responsiveness is critical.  It does not feel right to have all
this overhead for traversing composite lists of one subcriteria.  In
the case where there is only one subcriteria, I should be able to use
it directly and forgo all of the composite overhead.  But I will need
some kind of builder pattern to get to that point, somewhere I can
encapsulate the decision of which classes to instantiate as I figure
out what the selection expression is going to look like.
</p>
</dd>
<dt><a name="2004-07-01">July 01, 2004</a></dt>
<dd>
<p>
I realized that my approach to combining regular-expression-based
and collection-based selection criteria is flawed.  Each one verifies
that a given node matches its <i>include</i> terms and does not match
its <i>exclude</i> terms.  That is, it satisfies the boolean
expression:
</p>

<pre>
    (include && !exclude)
</pre>

<p>
But if I combine two criteria with an <code>AND</code>, I get:
</p>

<pre>
    (include1 && !exclude1) && (include2 && !exclude2)
</pre>

<p>
That is, the node must match both <i>includes</i> and neither
<i>excludes</i>.  What I want, is for the node to match either
<i>includes</i>, so I might try combining criteria with an
<code>OR</code>:
</p>

<pre>
    (include1 && !exclude1) || (include2 && !exclude2)
</pre>

<p>
But this fails to ensure that the node matches neither
<i>excludes</i>.  What I really need is:
</p>

<pre>
    (include1 || include2) && (!exclude1 && !exclude2)
</pre>

<p>
That is, I want it to match either <i>includes</i> but none of the
<i>excludes</i>.  To do this, I will need to split the current criteria
classes between <i>include</i> and <i>exclude</i> classes.  I will
also need a <code>NotCompositeSelectionCriteria</code>.
</p>
</dd>
<dt><a name="2004-06-30">June 30, 2004</a></dt>
<dd>
<p>
Attended a session at JavaOne on the new annotation mechanism in the
upcoming JDK 5.0.  This is going to be interesting, from the point of
view of parsing <code>.class</code> files and defining language
constructs.
</p>
</dd>
<dt><a name="2004-06-28">June 28, 2004</a></dt>
<dd>
<p>
Attended a session at JavaOne on sorting and filtering in Swing
JTables.  They had a nice approach to combine multiple levels of
sorting and filter on multiple columns.  I'll try to incorporate it
into <code>OOMetrics</code> when I get a chance.
</p>
</dd>
<dt><a name="2004-06-27">June 27, 2004</a></dt>
<dd>
<p>
Checked in the new composite selection criteria.  Now, I need to put
them to good use in the CLI and the appropriate Ant tasks.
</p>
</dd>
<dt><a name="2004-06-24">June 24, 2004</a></dt>
<dd>
<p>
Extracted common behavior from <code>AndCompositeSelectionCriteria</code> and
<code>OrCompositeSelectionCriteria</code> into a common abstract base
class <code>CompositeSelectionCriteria</code>
</p>

<p>
Read a
<a target="_blank" href="http://www.softmetaware.com/complexity-and-dependency-management.pdf">white paper on dependency management</a>
by Jorn Bettin.  It is very formal when talking about dependencies and
complexity, but provides some interesting rationales for controling
dependencies.  Basically, without strict, mechanized monitoring of
dependencies, the project's complexity will spiral out of control and
maintainability will go out the door.  And what better tool to
mechanically look at dependencies than Dependency Finder!
</p>
</dd>
<dt><a name="2004-06-23">June 23, 2004</a></dt>
<dd>
<p>
Created <code>OrCompositeSelectionCriteria</code> with <i>either / or</i>
logic.  I think that's the one I want to use.  I'll keep
<code>AndCompositeSelectionCriteria</code> around as a curiosity.  It
might come in handy eventually.
</p>
</dd>
<dt><a name="2004-06-22">June 22, 2004</a></dt>
<dd>
<p>
Created <code>AndCompositeSelectionCriteria</code> so I can combine
regular expression-based and list-based selection criteria.  This will
only be useful for CLI and Ant tasks, since the GUI and the web app do
not support list-based selection.
</p>
</dd>
<dt><a name="2004-06-16">June 16, 2004</a></dt>
<dd>
<p>
Fixed <code>CollectionSelectionCriteria</code> so it has separate
include and exclude lists.  This way, I can leave the include list as
<code>null</code> to indicate a wildcard and explicitly exclude names
from a list.  The previous implementation applied the the excluded
list to a predefined inclusion list, preventing me from doing
"anything but ..." type of logic.
</p>

<p>
Next, I'll need to combine regular expression-based with list-based
selection criteria for maximum flexibility.  This will mean some kind
of <i>AndSelectionCriteria</i>.
</p>
</dd>
<dt><a name="2004-06-15">June 15, 2004</a></dt>
<dd>
<p>
Checked the help discussion on the project page in SourceForge and
found a few new messages since the last time I checked.  Somehow, I
don't receive emails from that discussion anymore, even though
SourceForge still says I'm monitoring it.
</p>
</dd>
<dt><a name="2004-06-05">June 05, 2004</a></dt>
<dd>
<p>
Discussed possible new icons with my friend who worked on Shrek 2.
We brainstormed some ideas around a possible theme and made some
promising sketches.  I'm eager to see what he'll come up with.
</p>
</dd>
<dt><a name="2004-06-03">June 03, 2004</a></dt>
<dd>
<p>
As I was tryin to explain scoping and filtering to someone, I came
upon a new way of explaining it.  The graph really has two dimensions:
aggregation betweeen packages, classes, and features, and dependencies
between the nodes as a separate dimension.  Scoping select specific
nodes along the aggregation dimention, while filtering selects
specific dependencies along the other dimension.  Maybe that will make
it a little easier for people to understand what I mean and how to use
regular expressions in either context.
</p>

<p>
There was also some confusion around the
<code>com.jeantessier.dependency.Visitor</code> classes.  Most of them
traverse a graph and leave it intact, but <code>LinkMaximizer</code>
and <code>LinkMinimizer</code> actually modify the graph in-place.
This means that if you run either one of them on the nodes in a given
factory, you can access the maximized or minimized graph through that
same factory.  But if you use a <code>GraphCopier</code> to get a
subgraph, you need to go to the copier's internal factory to get at the
subgraph.
</p>
</dd>
<dt><a name="2004-05-31">May 31, 2004</a></dt>
<dd>
<p>
Fixed documentation for <code>DependencyReporter</code> to include
the switches that control what gets shown in the output graph or
not.
</p>
</dd>
<dt><a name="2004-05-30">May 30, 2004</a></dt>
<dd>
<p>
Finished moving my office to the next room down the hall.  I do have
quite a few books!
</p>

<p>
Someone asked me how to tie additional information to
<code>com.jeantessier.dependency.Node</code> objects for their
application.  My answer to them is to use the <code>Node</code>
instances as keys in a <code>java.util.Map</code>.  It implements
<code>equals()</code> and <code>hashCode()</code> based on the name of
the node, so comparisons will match just fine.  This allows you to
associate any arbitrary data to nodes without introducing any
additional dependencies in the node classes.
</p>
</dd>
<dt><a name="2004-05-29">May 29, 2004</a></dt>
<dd>
<p>
Started moving my home office to the next room down the hall.  Got
all the hardware and wiring done.
</p>
</dd>
<dt><a name="2004-05-24">May 24, 2004</a></dt>
<dd>
<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>Tomcat</td>
        <td>:</td>
        <td>5.0.16</td>
        <td>-></td>
        <td>5.0.25</td>
    </tr>
</table>
</blockquote>

<p>
I also came upon a new UML tool called
<a target="_blank" href="http://objectclub.esm.co.jp/Jude/jude-e.html">Jude</a>.
It has decent sequence diagrams but only supports UML 1.4 yet, not UML
2.0 with the nice ball and socket notation for interfaces.  Maybe I
can use Poseidon for clas diagrams and Jude for sequence diagram, at
the cost of maintaining two models.
</p>
</dd>
<dt><a name="2004-05-23">May 23, 2004</a></dt>
<dd>
<p>
My neighbor works for DreamWorks and did the illustrations during
the rolling credits at the end of Shrek 2.  They look like medieval
vignettes of various activities, but he somehow managed to have them
represent modern activities of moviemaking, such as sound mixing and
such.
</p>

<p>
I asked him if he could do icons for Dependency Finder in the same
style and he said he'd look into it.  So I put together a list of the
icons and how they're used for him to look at.  I hope it works out, it
would be very cool.
</p>
</dd>
<dt><a name="2004-05-22">May 22, 2004</a></dt>
<dd>
<p>
New beta release for version 1.1.0.  And I forgot to mention, I
relabeled 1.0.2 to 1.1.0.  I figured the changes to the tools, with the
introduction of list-based scoping and filtering warranted a higher
version number change.
</p>

<p>
I tried to generate a distribution that didn't include Xalan or
Xerces and relied on what is provided by JDK 1.4.2, but I hit a wall
when it came to creating SAX readers.  Right now, I explicitly name a
reader class from Xerces, which allows me to use custom attributes to
trigger validation of the XML.  But this custom class is part of
Xerces while JDK 1.4.2 ships with Crimson; almost the same, but my
reader is not in there.  Once I had found the corresponding reader
class, the custom attributes didn't match, so I was stuck.  Changing
reader might lock the code into JDK 1.4.2, which I am still reluctant
to do.  People relying on prior version of the JDK should still be
able to just get the source, get Xerces and Xalan, and simply
recompile.
</p>

<p>
I also tried to package the documentation in a separate JAR file.
At one point, the main distribution file was about 800 KB instead of
the current 5+ MB, once Xalan and Xerces and the documentation were
removed.  But since I cannot get rid of Xerces and Xalan just yet,
I will wait a little longer before separating the documentation too.
Right now, the difference is not worth the added complexity of
downloading two files for people who want the documentation.
</p>
</dd>
<dt><a name="2004-05-21">May 21, 2004</a></dt>
<dd>
<p>
I don't know what SourceForge changed in their system, but their
advice for my CVS problems were to get the latest version of my client.
I did, and now everything's fine.  I find it very hard to believe that
they would change something as important as their CVS support without
telling anyone.  But what can you do.
</p>

<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>SmartCVS</td>
        <td>:</td>
        <td>2.4.2</td>
        <td>-></td>
        <td>3 rc</td>
    </tr>
</table>
</blockquote>

<p>
I was finally able to check in my most recent changes, including
documentation of new switches on Ant tasks and use of long names for
measurements when writing to <code>.csv</code> files.
</p>

<p>
Finally got around to updating my copyright notices to 2004.
</p>

<p>
I want to do a beta release for the next release, tentatively 1.1,
compiled only for JDK 1.4.2 and above.  This will allow me to see if
anyone cares for me to stick with lower versions of the JDK.  If
enough people complain, I'll do the real release with JDK 1.3 again.
Or, they could simply get the source code and compile it themselves
with JDK 1.3 and track Xalan on their own, but I would have to stick
with Log4J and Jakarta-ORO for this to work.
</p>

</dd>
<dt><a name="2004-05-20">May 20, 2004</a></dt>
<dd>
<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>Ant</td>
        <td>:</td>
        <td>1.6.0</td>
        <td>-></td>
        <td>1.6.1</td>
    </tr>
</table>
</blockquote>

<p>
Opened a new
<a target="_blank" href="http://sourceforge.net/tracker/?func=detail&aid=957832&group_id=1&atid=200001">trouble ticket</a>
with SourceForge.  I haven't been able to contact the CVS
repository for over a week now.
</p>
</dd>
<dt><a name="2004-05-13">May 13, 2004</a></dt>
<dd>
<p>
I could depend only on JDK 1.4.2 instead of 1.3.  This way, I would
not have to ship Xalan with Dependency Finder.  I could even go further
and use Java Logging and Regex instead of Log4J and ORO respectively.
Then, Dependency Finder wouldn't need any third party software.
</p>

<p>
A while back, I compared Log4J with Java's Logging API and preferred
Log4J.  It is more flexible and easier to configure.  It would feel
strange to move away from it now.
</p>

<p>
I chose ORO because it supports pretty much all of Perl's very rich
regular expression language.  From what I understand, its coverage
even outdoes Java's Regex.  But Dependency Finder only uses a small
subset of that language, which is equally covered by both package, so
I could easily switch.
</p>

<p>
So switching to JDK 1.4.2 would give me access to both the Logging
and Regex APIs.  It also includes a complete copy of Xalan.  JDK
1.4.1 had a bug in its Xalan, but 1.4.2 is all better.
</p>

<p>
I wonder how many people out there currently use JDK 1.3 or a
version of 1.4 that is below 1.4.2.  If I switch now, how many users
will not be able to follow?  If I don't switch, then I need to keep
dragging Log4J and ORO along.
</p>

<p>
CVS on SourceForge is still out.
</p>
</dd>
<dt><a name="2004-05-10">May 10, 2004</a></dt>
<dd>
<p>
Documented the new attributes of the<code>DependencyReporter</code>
and <code>OOMetrics</code> Ant tasks.
</p>

<p>
Adjusted the metrics's CSV printer to include each measurement's
long name, in addition to their short name, to reduce confusion.
</p>

<p>
CVS on SourceForge is out.  Again.
</p>
</dd>
<dt><a name="2004-05-09">May 09, 2004</a></dt>
<dd>
<p>
Documented the new switches on <code>DependencyReporter</code> and
<code>OOMetrics</code>.
</p>

<p>
CVS on SourceForge is back.
</p>
</dd>
<dt><a name="2004-05-06">May 06, 2004</a></dt>
<dd>
<p>
Deleted <code>DeprecationReporter</code>.
</p>

<p>
Updated the UML diagrams for the package
<code>com.jeantessier.metrics</code>.
</p>

<p>
Fixed javadocs for <code>DocumentableDifference</code>.
</p>

<p>
CVS on SourceForge is out again.  Grrr.
</p>
</dd>
<dt><a name="2004-05-05">May 05, 2004</a></dt>
<dd>
<p>
CVS on SourceForge is finally back.
</p>
</dd>
<dt><a name="2004-05-04">May 04, 2004</a></dt>
<dd>
<p>
Cleaned up <code>MartinConfig.xml</code> to compute Robert C.
Martin's <code>D'</code> metric.  I also drew a diagram of the various
measurements and how they feed into each other.  This might be useful
documentation.
</p>

<p>
CVS on SourceForge is still down.  This is annoying.  I don't want
to have too much code not checked in; it's not safe.
</p>
</dd>
<dt><a name="2004-05-02">May 02, 2004</a></dt>
<dd>
<p>
Added scope lists for <code>OOMetrics</code> similar to its current
filter lists.  I don't know what good they could serve yet, since any
such filtering could already be achieved by extracting only the desired
classes.
</p>

<p>
Added <code>-show-all-metrics</code> switch to
<code>OOMetrics</code> to show metrics for classes that were not
extracted.  This is so I can list metrics regarding inbound
dependencies on classes outside the examined codebase, so I can group
dependencies on deprecated symbols by those same deprecated symbols.
It still uses <code>-filter-includes-list</code> to limit the tracking
to dependencies on deprecated symbols, but all non-deprecated classes
and methods will now be empty.  With the new switch, it will list all
non-empty metrics, including those metrics attached to symbols outside
the codebase.
</p>

<p>
CVS on SourceForge is down again.
</p>
</dd>
<dt><a name="2004-04-30">April 30, 2004</a></dt>
<dd>
<p>
Document dependency-related metrics in Developer Guide.
</p>

<p>
UC Irvine team to do Eclipse plugin using Dependency Finder.
</p>

<p>
Managed to get Poseidon license on laptop.  Latest version supports
UML 2.0 with new notation for interfaces.  Might be interesting.
</p>

<p>
CVS on SourceForge is back.
</p>
</dd>
<dt><a name="2004-04-29">April 29, 2004</a></dt>
<dd>
<p>
Stylesheet for HTML of dependency graphs
</p>

<p>
Removed Poseidon from my desktop.  Had trouble installing license
on my laptop.
</p>
</dd>
<dt><a name="2004-04-28">April 28, 2004</a></dt>
<dd>
<p>
Removed trace, new <code>OOMetrics</code> now takes 6 minutes
instead of four hours.
</p>

<p>
CVS on SourceForge is down.  I cannot check in changes.
</p>
</dd>
<dt><a name="2004-04-27">April 27, 2004</a></dt>
<dd>
<p>
The new <code>OOMetrics</code> on that production code and it still
took 4 hours, but at least it worked and stayed under the 500MB heap
size.  I still need to figure out what it is taking so long.  Im
tempted to try a custom version of <code>MetricsGatherer</code> that
only deals with dependencies.
</p>

<p>
The metrics configuration had some errors in it, so I mapped it
first to verify where each piece of data came from, and then entered a
new, much simpler version.
</p>

<p>
Had to adjust <code>StatisticalMeasurement</code> so it bases its
empty status on that of the measurements it monitors.  Otherwise it
would say it was not empty when it was monitoring a bunch of empty
measurements in submetrics.
</p>

<p>
<code>MetricsGatherer</code> does not track dependencies on fields
directly, but rather only the class they are part of.  In the context
of this latest work, this means it cannot detect dependencies on
deprecated fields.  Maybe it is not such a big deal, since it will
never be able to track dependencies on fields of primitive types (int,
float, String, etc.) anyway because they are inlined by the
compiler.
</p>
</dd>
<dt><a name="2004-04-26">April 26, 2004</a></dt>
<dd>
<p>
Tried the new filtered dependency metrics report on some production
code at work.  Gave it 1GB heap and it crashed after 4 hours with an
out of memory error.  Filtering in accumulators is too expensive.  The
elementary measurements (IICM, OIP, ...) still gather all dependencies
before we start filtering and they use up all the memory.
</p>

<p>
So I moved the filtering to <code>MetricsGatherer</code> instead.
This way, I can take out dependencies at the source.  I only had time
to do filter lists now.  I'll look at scope lists later.  Also, right
now the resulting report is broken down by dependency source.  Showing
them broken down by target is going to be more difficult, but I can
use <code>MetricsFactory.All<i>xxx</i>Metrics()</code> to get at metrics
for deprecated symbols outside the codebase.
</p>
</dd>
<dt><a name="2004-04-25">April 25, 2004</a></dt>
<dd>
<p>
Finished <code>Metrics.Empty()</code>.  It recursively looks at any
submetrics and also looks at all measurements, ignoring those that are
not visible.  The stylesheet is also shaping up.  I want to take the
same approach with my other HTML generators.
</p>

<p>
Now, <code>OOMetrics</code> skips <i>empty</i> metrics by default.
You have to pass it the <code>-show-empty-metrics</code> to see all
metrics like before.
</p>

<p>
I haven't updated the documentation yet.
</p>
</dd>
<dt><a name="2004-04-24">April 24, 2004</a></dt>
<dd>
<p>
Finished the new types of measurements.
</p>
</dd>
<dt><a name="2004-04-23">April 23, 2004</a></dt>
<dd>
<p>
Shifted strategy.  I'm going to use <code>OOMetrics</code> instead
of a simple dependency graph.  This allows me to have automatic counts
tallied at the class and package level.  But the changes are extensive.
I need variations on the <code>AccumulatorMeasurement</code> and the
ability to ignore <i>empty</i> metrics and focus on the actual
offenders.
</p>

<p>
Also started playing with XSLT stylesheets for converting metrics
from XML to text and HTML.  I also experimented with using CSS to
format the HTML.  But with the introduction of external stylesheets,
it raise the question of where am I going to put them?  I can provide
defaults in <code>etc/</code> or simply embed the stylesheet in the
generated HTML.  I'm not completely decided yet.
</p>
</dd>
<dt><a name="2004-04-22">April 22, 2004</a></dt>
<dd>
<p>
<code>DeprecationReporter</code> is working great to track usage of
deprecated APIs.  Now, I need to provide a summary with counts broken
down by package.  I should be able to do this using
<code>OOMetrics</code> with the right configuration.  I will need a new
type of measurement to take into account the lists of deprecated
elements.
</p>

<p>
Adjusted the stylesheet for the website and the documentation to
remove the underlining in hyperlinks.  I think it makes them a little
easier to read.  They're still blue, so they stand out, of course.
</p>
</dd>
<dt><a name="2004-04-21">April 21, 2004</a></dt>
<dd>
<p>
<code>DeprecationReporter</code> is not flexible enough, so I found
a way to adjust <code>DependencyReporter</code> so I can use it
instead.  I'm adjusting the printers in the
<code>com.jeantessier.dependency</code> package so they can all hide
inbound or outbound dependencies or empty nodes.  In due time, I'll be
able to remove that business logic from XSL stylesheets.
</p>

<p>
I still have to document the new switches.
</p>

<p>
I will physically remove <code>DeprecationReporter</code> very soon,
before anyone really starts to use it.
</p>

<p>
I also want to write an HTML printer so I can generate the HTML
directly from within the application.  Then I could use it in the web
app to have nicer output with hyperlinks.
</p>
</dd>
<dt><a name="2004-04-20">April 20, 2004</a></dt>
<dd>
<p>
Wrote a whole new tool to monitor usage of deprecated APIs.
<code>ListDeprecatedElements</code> scans JARs and collects a list of
names for deprecated classes, interfaces, fields, methods, and
constructors.  <code>DeprecationReporter</code> is a variation on
<code>DependencyReporter</code> that uses the list instead of
regular expressions to figure out the scope and does no filtering.
There are CLI and Ant versions of each, with associated
documentation.
</p>

<p>
Refactored <code>TestRecord</code> to use <code>StringReader</code>
to read back generated XML documents in strings.
</p>

<p>
Refactored <code>TestRegularExpressionSelectionCriteria</code> to
make all its fields private.
</p>
</dd>
<dt><a name="2004-04-19">April 19, 2004</a></dt>
<dd>
<p>
Wrote unit test that uses XPath to validate the generated XML from
<code>com.jeantessier.diff.Report</code>.  This will later help me
write tests that use Xalan to test the XSL transformations.
</p>
</dd>
<dt><a name="2004-04-18">April 18, 2004</a></dt>
<dd>
<p>
I started writing more tests to check that interactions with Xerces
are tested.  In the process, I cleaned up some of the tests for classes
that generate XML documents.
</p>

<p>
I found some mistakes in <code>classfile.dtd</code>: missing
elements, typos in element and attribute names, those sorts of things.
I fixed them.  I also changed the generated XML so it does not pretend
to be standalone anymore.  The DTDs are on the project's website, how
can these documents be standalone!
</p>

<p>
Now, I need to write some regression tests for Xalan too.
</p>
</dd>
<dt><a name="2004-04-16">April 16, 2004</a></dt>
<dd>
<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>Xerces</td>
        <td>:</td>
        <td>2.5.0</td>
        <td>-></td>
        <td><i>none</i></td>
    </tr>
    <tr>
        <td>Xalan</td>
        <td>:</td>
        <td>2.5.1</td>
        <td>-></td>
        <td>2.6.0</td>
    </tr>
</table>
</blockquote>

<p>
I am not going to chase after Xerces anymore.  I do not use anything
fancy that would require me to be absolutely up-to-date.  I will do
just as fine with the version that comes with Xalan.  And thie way, I
don't have to worry about my Xerces version working with my Xalan
version.
</p>
</dd>
<dt><a name="2004-04-07">April 07, 2004</a></dt>
<dd>
<p>
Someone else asked me about JAR-to-JAR dependencies.  Last time I pondered this
question was on <a href="#2003-11-14">2003-11-14</a>.
</p>

<p>
Since then, I thought of adding another layer at the top of the dependency
graph, above the package layer.  But passing the JAR information around all the
way to the dependency extractor would introduce changes in the data model that I
am not completely comfortable with.
</p>

<p>
Plus, this new layer would be incomplete.  What should I do with outbound
references to classes beyond the scope of the tool, that are possibly in other,
unknown JARs?  What should I do with packages that span multiple JARs?
</p>

<p>
Maybe with a parallel layer besides the packages instead of above it.  This
would impact visitors and printers and any other parts that deal with the
dependency graph.  And it still doesn't solve the problem of dependencies on
classes outside the ones being analyzed.
</p>

<p>
I'll need to give this some more thought, still.
</p>
</dd>
<dt><a name="2004-04-01">April 01, 2004</a></dt>
<dd>
<p>
Built a stop condition for the new closure engine and came up with
the public interface so I can control how many layers it computes.
</p>

<p>
Remove all remaining signs of support for object serialization.
This consisted namely of removing code that used
<code>java.io.ObjectInputStream</code> to read files and having
<code>com.jeantessier.dependency.Node</code> not implement
<code>java.io.Serializable</code> anymore.
</p>
</dd>
<dt><a name="2004-03-30">March 30, 2004</a></dt>
<dd>
<p>
Release the Dependency Finder tutorial at last.  I managed to crop
all my screen captures in a consistent fashion.  At the last moment, I
noticed that a tool tip was on one of the GUI captures.  Too bad.
</p>

<p>
I started thinking about an OO Metrics tutorial too.  Setting up a
custom configuration is non-trivial and could use some kind of
introduction.
</p>
</dd>
<dt><a name="2004-03-29">March 29, 2004</a></dt>
<dd>
<p>
Removed all support for serialization of the dependency graph.  I
was never able to deserialize the graphs anyway.  I was semi-useful for
guesstimating the size of the graph, but <code>DependencyMetrics</code>
is much better for that.  Serialiazed objects are not forward-
compatible anyway, so they do not make a good mechanism for
persistence.
</p>

<p>
I started to compress the sample XML files on the project's home
page.  They were taking up too much space and making me overrun my
quota over there.
</p>
</dd>
<dt><a name="2004-03-28">March 28, 2004</a></dt>
<dd>
<p>
Did some screen capture for the tutorial.  My previous version had
crappy mockups in PowerPoint.  I captured the same pictures in both the
web application and the GUI, but the images are too big (800x600) to
put in the PowerPoint slides that make up the tutorial.  If I shrink
them down to make them fit, I cannot make out the details that I need
to show.  So I will need to crop the important parts out, on all
images.
</p>
</dd>
<dt><a name="2004-03-22">March 22, 2004</a></dt>
<dd>
<p>
Outfitted the closure engine with an inbound selector in unit
tests.
</p>

<p>
Fixed broken links on the Resources page.
</p>
</dd>
<dt><a name="2004-03-21">March 21, 2004</a></dt>
<dd>
<p>
Refactored closure selectors to share common code.  This will also
help me pass an abstract selector to the engine when calculating
closures.
</p>
</dd>
<dt><a name="2004-03-20">March 20, 2004</a></dt>
<dd>
<p>
Added an <code>InboundSelector</code> to compute "upstream"
closures.
</p>
</dd>
<dt><a name="2004-03-19">March 19, 2004</a></dt>
<dd>
<p>
Looked at the bug list and feature request list.  It had been a while.  There
was one bug request regarding broken links on the web site, and two requests
for interesting new ways to use JarJarDiff.
</p>

<p>
It turns out that I had thought of one such way back on <a href="#2003-08-19">2003-08-19</a>.  The
idea is to use a dependency graph to list the parts of a third party API you
are using.  Then feed this list to JarJarDiff to limit the hange report to the
subset that you are really using.  All the tools are there, it's just a matter
of how you use them.  I scanned my notes and added them to
<a target="_blank" href="http://sourceforge.net/tracker/index.php?func=detail&aid=900446&group_id=43305&atid=435887x">feature request #900446</a>
until I come up with a formal description.
</p>
</dd>
<dt><a name="2004-03-18">March 18, 2004</a></dt>
<dd>
<p>
Figured out how to keep the graphs separate while I compute the
transitive closure.  The selectors and the engine need to keep two
lists of nodes, one for each graph.  This allows the closure to only
copy the nodes and dependencies that will make up the closure.
</p>

<p>
But I have another problem.  What if class <code>A</code> depends
on class <code>B</code>, and method <code>foo()</code> of
<code>B</code> depends on class <code>C</code>.  When I traverse the
graph to compute the closure, is it reasonable to visit features of
classes for additional dependencies?  Does <code>A</code> transitively
depend on <code>C</code> in this case?.  At runtime, it would only if
<code>foo()</code> is called as a result of interactions on with
<code>A</code>.  If that were the case, the graph would have a path
from some feature of <code>A</code> to <code>foo()</code> anyway, so
maybe the transitive closure engine doesn't need to go the extra
distance.  I'll think about it some more.
</p>
</dd>
<dt><a name="2004-03-17">March 17, 2004</a></dt>
<dd>
<p>
More work on <code>TransitiveClosureEngine</code>.  I'm stuck in the
selectors and how they navigate the original graph and copy only what's
needed to the destination graph, all the while keeping track of
individual layers as I build the closure.
</p>
</dd>
<dt><a name="2004-03-15">March 15, 2004</a></dt>
<dd>
<p>
Finished the initial step in the new transitive closure algorithm.
Now, I need to work on each step's processing, where I incrementally
build the closure, one level at a time.
</p>
</dd>
<dt><a name="2004-03-14">March 14, 2004</a></dt>
<dd>
<p>
Started working of a <code>NodeSelector</code> to handle the initial
step of the new transitive closure algorithm.  I need to take a scope
criteria and traverse the graph, collecting nodes matching the
closure's starting point as I go.
</p>
</dd>
<dt><a name="2004-03-12">March 12, 2004</a></dt>
<dd>
<p>
I have a problem with test-driven development.  People say you can
use the test suite to document how to use a system; but if I'm new to
this software, which one of the hundreds of tests should I look at
first?  I have been toying with the idea of using the dependency graph
to categorize the tests and maybe provide a order in which to approach
them.  I wonder if I could use some clever heuristic estimate the
complexity of a given test.  I would have to start with a test method
and look at dependencies to other classes and methods in the same
package.  I don't know what the heuristics would look like, yet.
</p>

<p>
I tried to list OO metrics for test classes by using a group
definition.  I noticed that the group counters for the group I had
created were all at zero.  It looked strange since the first one is the
number of public classes and it said zero.  Statistical measurements
were just fine.  After investigating a bit, I realized the counters are
incremented by <code>MetricsGatherer</code>, but only for the package
group of a given class.  My custom group never had a chance.
</p>

<p>
I also noticed one more problem.  The statistical measurements at
the project level take <i>all</i> groups into account, packages and
user-defined.  This means that SLOC counts some classes more than once,
for example.  I don't have a solution at this time.
</p>
</dd>
<dt><a name="2004-03-07">March 07, 2004</a></dt>
<dd>
<p>
Following a recommendation from a user, I reworked the documentation
for scoping and filtering in Ant tasks.
</p>
</dd>
<dt><a name="2004-03-04">March 04, 2004</a></dt>
<dd>
<p>
Adjusted <code>PermissiveDispatcher</code> so it ignores HTML files.
I also gave it its own unit tests.
</p>

<p>
A number of people have been asking about why Dependency Finder does
not list line numbers where dependencies occur.  I added a section in
the User Manual that explains how the line number information in
<code>.class</code> files is so fragmented as to be useless.  I put it
under the "Limitations" heading.
</p>
</dd>
<dt><a name="2004-03-02">March 02, 2004</a></dt>
<dd>
<p>
Scott Stirling pointed out IBM's SA4J to me.  Apparently, IBM
acquired SmallWorlds and this is based on the SmallWorlds tool.  It
would explain why my link to SmallWorlds on the Resource page is
broken.  Thanks Scott for pluging Dependency Finder in a related
article on
<a target="_blank" href="http://www.theserverside.com/news/thread.jsp?thread_id=24255">TheServerSide.COM</a>.
</p>

<p>
Scott also gave me some feedback on the documentation and submitted
some improvements.  He's also investigating graphical rendering of
graphs on his own.  I'll keep you posted.
</p>
</dd>
<dt><a name="2004-03-01">March 01, 2004</a></dt>
<dd>
<p>
IBM released a review of
<a target="_blank" href="http://www.alphaworks.ibm.com/tech/sa4j">Structural Analysis for Java (SA4J)</a>.
</p>
</dd>
<dt><a name="2004-02-26">February 26, 2004</a></dt>
<dd>
<p>
I've been reading "UML for Java Programmers" by Robert C. Martin.
In one chapter, he talks about dependency management and recommends
using tools to automatically track them in code.  He goes so far as to
recommend JDepend to readers.  I wonder if he'd recommend Dependency
Finder too.  Maybe if I add a package-level dependency cycle detection
feature, it would make the tool even more useful.  At some point, I
will have to start thinking about going beyond the raw data and have
the tools do more work when it comes to analyzing design quality
factors.
</p>
</dd>
<dt><a name="2004-02-25">February 25, 2004</a></dt>
<dd>
<p>
Got started on a <code>TransitiveClosureEngine</code> to handle the
next version of transitive closures.  The engine should select a
starting point in the graph and incrementally grow a subgraph from that
initial set of nodes until some termination criteria is met.  This
could be that a given node is reached or that a certain number of steps
have been taken.
</p>

<p>
Added a link to the patch tracker on SourceForge from the project's
home page.
</p>
</dd>
<dt><a name="2004-02-21">February 21, 2004</a></dt>
<dd>
<p>
Finished passing XML encoding to XML writers.
</p>
</dd>
<dt><a name="2004-02-20">February 20, 2004</a></dt>
<dd>
<p>
Worked on having XML writers take an optional encoding identifier.
The default is UTF-8 but may not be enough if some Java identifiers
contain multibyte characters.  I tried UTF-16, but IE and Xerces had
trouble with it.  So I'll just let the caller pick something they
like.
</p>
</dd>
<dt><a name="2004-02-19">February 19, 2004</a></dt>
<dd>
<p>
Fixed <code>ClassReader</code> so it processes multiple
<code>.class</code> files correctly.  I modified the DTD to allow
multiple <code>&lt;classfile&gt;</code> tags within an all inclusive
<code>&lt;classfiles&gt;</code> tag.  I logged it as bug #900938.
</p>

<p>
I fixed it immediately as
<a target="_blank" href="http://sourceforge.net/tracker/index.php?func=detail&aid=900942&group_id=43305&atid=435886">patch #900942</a>.
</p>
</dd>
<dt><a name="2004-02-18">February 18, 2004</a></dt>
<dd>
<p>
Someone has been having a number of issues.  I'll be able to fix
some of them, but not all.
</p>

<p>
First, they analyzed classes with non-ASCII characters in
identifiers.  For example, a class name or method name that includes an
"&eacute;" character.  I was surprised that <code>javac</code> will let
you do such a thing; it turns out this is perfectly legal.  Anyway, the
encoding for XML output is UTF-8.  XML parsers cannot read the data
correctly because the characters in the stream do not correspond to the
UTF-8 encoding.  They would like me to ad an option to specify a custom
encoding.
</p>

<p>
I looked into this an since Dependency Finder simply write out
String objects, maybe I should simply use Java's default encoding
instead.  The documentation says this should be UTF-16, but when I try
it, Xerces complains about byte ordering.  And IE complains about the
encoding not being supported.  More thought needed.
</p>

<p>
Second, the <code>.class</code> file parser throws a
<code>ClassCastException</code> when it encounters unknown, illegally
constructed <code>attribute_info</code> structures.  Apparently, this
was with output from Visual Age for Java.  I logged it as bug
#900060.
</p>

<p>
I fixed it immediately as
<a target="_blank" href="http://sourceforge.net/tracker/index.php?func=detail&aid=900062&group_id=43305&atid=435886">patch #900062</a>.
</p>

<p>
Third, they encountered the situation I described on <a href="#2004-02-03">2004-02-03</a>.  I am
starting to think that maybe I should do something about it.  But what?
</p>

<p>
Fourth, and last, they tried to run <code>ClassReader</code> on a
whole JAR file.  It is designed for use on one file at a time (in
spite of what the documentation says), not on a whole codebase.  The
result is an invalid XML document with repeated DOCTYPE and no root
tag.  I'll try to fix that tomorrow.
</p>

<p>
Ran this journal throught a spelling checker.
</p>
</dd>
<dt><a name="2004-02-17">February 17, 2004</a></dt>
<dd>
<p>
Fixed a broken link to
<a target="_blank" href="http://www.gentleware.com?redirect=products">Poseidon for UML</a>
in the user manual.
</p>
</dd>
<dt><a name="2004-02-16">February 16, 2004</a></dt>
<dd>
<p>
Someone at work brought
<a target="_blank" href="http://www.touchgraph.com/index.html">TouchGraph</a> to my
attention.  It's a graph package for complex graphs that lay themselves
out.  You can collapse nodes and stretch things around.  It looks very
cool and maybe I could make use of it in Dependency Finder for some
kind of rendering of dependency graphs.  I looked at the code on
SourceForge, but there is no documentation and I don't have the time to
investigate further right now.  Maybe later...
</p>
</dd>
<dt><a name="2004-02-09">February 09, 2004</a></dt>
<dd>
<p>
Last November, I nominated Dependency Finder for the 2003 Jolt Award
at <a target="_blank" href="http://www.sdmagazine.com/jolts/">Software Development</a>
magazine.  Today, they announced the finalists.  I'm afraid it didn't
make the cut.  Not that I had high hopes or anything.  It did get a
mention in the magazine after all.
</p>
</dd>
<dt><a name="2004-02-06">February 06, 2004</a></dt>
<dd>
<p>
<a target="_blank" href="http://www.sdmagazine.com/">Software Development</a>
magazine published a piece on open source software in which they
mention Dependency Finder.  It is listed right alongside heavy hitters
like LAMP (Linux, Apache, MySQL, PHP), Perl, and JUnit.  My name is
listed with the likes of Richard Stallman, Larry Wall, Linus Torvalds,
Yukihiro Matsumoto, Kent Beck, ...
</p>

<p>
... eh! ... wait a minute! ...
</p>

<p>
... all these guys are &uuml;bergeeks! ...
</p>

<p>
They've put me in with a bunch of geeks!  Args!!!
</p>

<p>
<code>:-)</code>
</p>

<p>
Or more precisely: <code>:-D</code>
</p>
</dd>
<dt><a name="2004-02-03">February 03, 2004</a></dt>
<dd>
<p>
Someone came up with some weird behavior in Dependency Finder and
asked me for an explanation.  It turns out to be caused by some
interesting things done by the Java compiler.  I touched upon it back on
<a href="#2004-01-07">2004-01-07</a>, but I'll elaborate further here.
</p>

<p>
First, suppose you have the following classes <code>A</code> and
<code>B</code>:
</p>

<table><tr>
<td valign="top">
<pre>
    class B {
        void b() {}
    }
    <i></i>
    <i></i>
    <i></i>
    <i></i>
    class A extends B {
        void a() {
            b();
        }
    }
</pre>
</td>
<td width="150"
    align="right">
<img src="../images/AandB.gif" /><br />
</td>
</tr></table>

<p>
Now, imagine for a second that we have the following class
<code>C</code>:
</p>

<table><tr>
<td valign="bottom">

<pre>
    class C {
        A a = new A();
        void foo() {
            a.b();
        }
    }
</pre>

</td>
<td width="500"
    align="right">
<img src="../images/AandBandC.gif" /><br />
</td>
</tr></table>

<p>
The compiler resolves the line "<code>a.b()</code>" as a call to
method <code>b()</code> on object <code>a</code> of type
<code>A</code>.  The JDK 1.3 compiler will see that method
<code>b()</code> is actually defined in superclass <code>B</code> of
class <code>A</code> and will generate bytecode to call
"<i>method <code>b()</code> in class definition <code>B</code>, or one of its superclasses</i>".
</p>

<p>
This is fine and dandy as long as nobody overrides <code>b()</code>
in subclasses of <code>B</code>, like <code>A</code> for instance.
Imagine that someone overrides <code>b()</code> in <code>A</code> but
does not recompile <code>C</code>, maybe because this client code was
developed by someone else and the person making the change is unaware
of its existence.  Now <code>C</code> will go on calling
"<i>method <code>b()</code> in class definition <code>B</code></i>", even though
the instance <code>a</code> is of type <code>A</code> and now has a new
definition for its method <code>b()</code>.  The compiler said "call
the method defined in <code>B</code>" and that's what the VM will do.
</p>

<p>
So the good people at Sun changed the compiler in JDK 1.4 to use the
type of the reference instead of where it thinks the method is located.
The VM will walk the inheritance tree at runtime to find the method.
So in the JDK 1.4-compiled version of <code>C</code> even if class
<code>A</code> does not override the method <code>b()</code>, the
bytecode essentially says to call
"<i>method <code>b()</code> in class definition <code>A</code>, or one of its superclasses</i>".
Now, even if we modify <code>A</code> without recompiling <code>C</code>, the
method will resolve correctly.
</p>

<p>
Let's take a closer look back at class <code>A</code>'s method
<code>a()</code>.  In reality, it is calling method <code>b()</code>
on the implicit <code>this</code> variable, which is of type
<code>A</code>.  So if you compile <code>A</code> with JDK 1.3, it will
try to call method <code>b()</code> in class <code>B</code>.  If you
compile it with JDK 1.4, it will try to call method <code>b()</code>
in class <code>A</code>.
</p>

<p>
<img src="../images/A.this.gif" /><br />
</p>

<p>
Dependency Finder gets its information from the bytecode in the
compiled Java class.  It provides you with an exact rendition of what
the compiler did.  In the case of the code above, compiled with JDK
1.4, it will list a dependency
<code>A.a()&nbsp;--&gt;&nbsp;A.b()</code>, even though there may not be
any method <code>b()</code> in class <code>A</code>.
</p>

<p>
Now you may ask "Can't Dependency Finder figure it out and assign
the dependency to method <code>b()</code> in class <code>B</code>?"
The answer is no, it can't.  For starters many dependencies go to
classes that the tool will never see such as classes and features in
external libraries that may not get analyzed, such as
<code>rt.jar</code>.  Then, there is the issue of starting to make
assumptions.  I've resisted the temptation to make any assumptions so
far.  I would rather have to tools present an unmodified view of
reality and not run the risk of misleading users with possibly invalid
assumptions.  Even if this means that results look strange from time to
time.
</p>

<p>
I also had someone else ask me about a launching script for
JarJarDiff on AS/400.  I have never even seen as AS/400 system, so all
I could do was to point them to the current Windows and Unix scripts,
and what it is that the JarJarDiff tool classes do, in the hope that
they are able to fix it for their system.
</p>
</dd>
<dt><a name="2004-02-02">February 02, 2004</a></dt>
<dd>
<p>
Looking at the release plan, I think I'm a little dispersed right
now.  I need to focus and get things rolling again.  The holiday break
really threw me off and left me with a couple of unfinished tasks.  I'm
going to complete the documentation and fix the dependency closure bugs
and ship the net release ASAP.
</p>
</dd>
<dt><a name="2004-01-30">January 30, 2004</a></dt>
<dd>
<p>
Turns out the discussion on
<a target="_blank" href="http://groups.yahoo.com/group/pragprog/">praprog</a> was aimed
at code analyzers that are part of the language compilers and how they
traverse parse trees to determine the type of expressions in loosely
typed languages.  It was not directly related to the work done by
Dependency Finder, but there were still some interesting ideas.  Like
Tarjan's algorithm for finding minimum spanning trees using depth-first
search.  It was a good exercise, even if the knowledge will not be
immediately useful.
</p>
</dd>
<dt><a name="2004-01-29">January 29, 2004</a></dt>
<dd>
<p>
Dependency Finder is three years old!
</p>

<p>
I have been thinking some more about tracking inter-JAR
dependencies.  I could come up with some kind of <code>GroupNode</code>
that would be the parent of <code>PackageNode</code>.  But this
assumes that packages are wholly contained in one location, which is
not necessarily the case.  An alternative would be for groups to be
made of arbitrary sets of classfiles, kind of like the group
functionality in <code>OOMetrics</code>, where classes can be part of
more than one grouping.  Some groups represent packages while others
could represent JAR files.  Still needs more thought.
</p>

<p>
The <a target="_blank" href="http://groups.yahoo.com/group/pragprog/">praprog</a>
mailing list had a discussion on dependency cycles and some of the
theory behind cycle detection and resolution.  Looks like I'll need to
hit the books to keep myself current.  :-)
</p>
</dd>
<dt><a name="2004-01-27">January 27, 2004</a></dt>
<dd>
<p>
Started working on a tool to list packages by JAR file in a given
codebase.  I'm thinking I could turn this into a way to track classes
by their location, be it a loose class file or as part of a JAR file.
I have had a few requests for tracking inter-JAR dependencies and this
could be a step in that direction.
</p>
</dd>
<dt><a name="2004-01-26">January 26, 2004</a></dt>
<dd>
<p>
Yesterday, I forgot to refactor the JSPs to use the new
<code>SelectionCriteria</code> instead of the previous
<code>SelectiveTraversalStrategy</code> directly.  Of course, the Ant
task for compiling JSPs using Jasper has changed between Tomcat 4.1.27
and Tomcat 5.0.16, so I had to spend a fair amount of time getting my
custom Ant build script up to stuff.  After that, upgrading the JSPs
was pretty easy.
</p>

<p>
There was a thread on the
<a target="_blank" href="http://groups.yahoo.com/group/pragprog/">praprog</a> mailing
list about code inspection tools.  At first, I didn't want to mention
Dependency Finder because the original message asked for tools to
evaluate code style and unused variables/methods.  Dependency Finder
can't do much about style, and while it can find elements that are not
referenced directly, that does not necessarily mean they are not used.
They could be interface methods or things called via reflection.  But
then, someone else brought up JDepend, so I had to say something.
Some of the other tools mentioned:
</p>

<ul>
<li><a target="_blank" href="http://pmd.sourceforge.net/">PMD</a></li>
<li><a target="_blank" href="http://checkstyle.sourceforge.net/">Checkstyle</a></li>
<li><a target="_blank" href="http://jalopy.sourceforge.net/">Jalopy</a></li>
<li><a target="_blank" href="http://www.clarkware.com/software/JDepend.html">JDepend</a></li>
</ul>

<p>
I haven't tried any of them myself, but some of the brochures
looked nice.
</p>
</dd>
<dt><a name="2004-01-25">January 25, 2004</a></dt>
<dd>
<p>
I'm done with the refactoring.  It was a lot of work but went on
smoothly.  Now, I move on to the next task in fixing the closure
logic.
</p>
</dd>
<dt><a name="2004-01-24">January 24, 2004</a></dt>
<dd>
<p>
I started revamping the dependency closure computations.  First, I
need to extract node selection logic to its own class and refactor
<code>SelectiveTraversalStrategy</code> to use the new
<code>SelectionCriteria</code> to determine both scope and filter.
This is getting to be quite an undertaking, but it will help the new
closure logic figure out starting nodes and stopping conditions.
</p>
</dd>
<dt><a name="2004-01-21">January 21, 2004</a></dt>
<dd>
<p>
Tried the web application with Tomcat 5.0.  Someone claimed they had
trouble deploying Dependency Finder with it.  I'm afraid this is going
to turn into one of those nasty "<i>It works fine on my machine</i>" as
I was unable to reproduce their problem.
</p>
</dd>
<dt><a name="2004-01-19">January 19, 2004</a></dt>
<dd>
<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>Ant</td>
        <td>:</td>
        <td>1.5.3-1</td>
        <td>-></td>
        <td>1.6.0</td>
    </tr>
    <tr>
        <td>Jakarta ORO</td>
        <td>:</td>
        <td>2.0.7</td>
        <td>-></td>
        <td>2.0.8</td>
    </tr>
</table>
</blockquote>

<p>
There is a nice new feature in Javadoc that Ant 1.6 now makes
available to me.  The <code>-linksource</code> switch to Javadoc links
the documentation to the source code.  An HTML-ized version of the
source files is created alongside the javadocs.  I also saw something
called either "j2h"  or "java2html" a while back that created
hyperlinked version of the source code, complete with syntax
highlighting.  I wonder if I could somehow get to two to work together.
The links between documentation and source could definitely be useful,
and the syntax highlighting is quite cool too.
</p>

<p>
I hesitated to checking the new version of <code>build.xml</code>
that uses the <code>linksource</code> attribute to the
<code>&lt;java&gt;</code> task.  This would require that people upgrade
to Ant 1.6 just to compile Dependency Finder.  But then again, it is
only if they try to generate the javadocs, so it shouldn't really be a
problem.
</p>
</dd>
<dt><a name="2004-01-16">January 16, 2004</a></dt>
<dd>
<p>
Found a reference to Dependency Finder on the
<a target="_blank" href="http://osswin.sourceforge.net/">OSSwin</a> project page.  They
had mistakenly listed the licensing scheme as GPL when it is actually
BSD, but it has all been fixed now.  This project is a nice,
comprehensive list of open source software for the Windows platform.
</p>

<p>
I also found someone who listed Dependency Finder in their resume
under a "tools used" heading.  I will take it as a testimony to the
broad acceptance and wide adoption of Dependency Finder.  :-)
</p>

<p>
Someone asked if I could add the line number where the dependencies occur in
the dependency graph.  Back on <a href="#2002-10-31">2002-10-31</a>, I had toyed with the idea of
modeling each dependency with their own object.  This would allow me to collect
a lot more data about each dependency, but at the cost of massive object
creation.  I'm afraid this would impact performance too much.  I'll keep
thinking about it some more.
</p>
</dd>
<dt><a name="2004-01-14">January 14, 2004</a></dt>
<dd>
<p>
Latest SourceForge tallies show downloads only for old release files:
</p>

<ul>
<li><code>release 20020127 of "DependencyFinder.zip"</code></li>
<li><code>release 20020127 of "DependencyFinder.src.zip"</code></li>
<li><code>release 20020711 of "DependencyFinder.war"</code></li>
</ul>

<p>
These coincide with the first time these names were used, when I
removed the release label from the file names.  I suspect that some new
logic for tallying downloads at SourceForge looks at filename now
instead of what maybe used to be either a combination of release ID and
filename or some form of file ID.
</p>

<p>
Actually, looking at the links on the download page, the links for
the various <code>DependencyFinder.zip</code> files are identical.  I
wonder what people are downloading?  The most recent file or one from
over 18 months ago?  A quick download at least reassured me that they
are indeed sending the most recent file, but that's regardless of which
link I click.  I cannot download any of the previous versions; I always
end up with the most recent file.
</p>

<p>
So I always download the <i>most recent</i> file by a given name,
but the download gets tallied with the <i>oldest</i> file by that name.
Strange.  I hope this is temporary and the SourceForge people fix this
soon.  Otherwise, I'll have to reinstate the version label in the
filenames (which might actually not be a bad idea).
</p>
</dd>
<dt><a name="2004-01-12">January 12, 2004</a></dt>
<dd>
<p>
Updated this journal.
</p>

<p>
Added quotes to the website.
</p>

<p>
Cleaned up leftover text on the resources page.
</p>

<p>
Now, I need to go and update all the copyright notices to 2004.
</p>

<p>
The SourceForge website mentions that project statistics are currently impacted
by known issues.  They are working on it.  They have been affected since
2003-12-22.
</p>
</dd>
<dt><a name="2004-01-11">January 11, 2004</a></dt>
<dd>
<p>
I fixed my HTML scraper to account for the new HTML on
SourceForge's download page.  It now seems to work just fine.  But the
data on SourceForge is stale.  The statistics page only go to
December 30, 2003.  I fear that SourceForge is having problems with its
statistics collection again.
</p>

<p>
Apparently, there were over 50 downloads of release 20020127 during
the holidays.  I don't see why people would be interested in that old
version.  Something is definitely fishy with SourceForge's statistics
and download tallies.
</p>
</dd>
<dt><a name="2004-01-08">January 08, 2004</a></dt>
<dd>
<p>
Rosalyn Lum, of <a target="_blank" href="http://www.sdmagazine.com/">Software Development</a> magazine,
sent me an email to enquire about Dependency Finder.  It seems it might get
mentioned in their upcoming March issue.  Yeah!
</p>
</dd>
<dt><a name="2004-01-07">January 07, 2004</a></dt>
<dd>
<p>
Researched how inherited methods are represented in compiled code.
Method access is resolved based on the type of the object reference
through which the call is made.  In the case of a concrete class
calling its inherited methods, it does so against the <code>this</code>
implicit variable which is typed to the concrete class itself.  Hence,
all the dependencies are to the concrete versions of the methods.
</p>

<p>
Here, JDK 1.3 and JDK 1.4 differ slightly.  In JDK 1.3, the
compiler would resolve method calls to where the methods are defined in
the inheritance hierarchy.  In JDK 1.4, the calls are resolved to the
lowest point in the inheritance hierarchy.  This allows redefinition of
the method in subsequent versions of subclasses, where appropriate.
With the JDK 1.3 compiled class, it would have to be recompiled to
benefit from the new definitions.
</p>

<p>
<i>Look to <a href="#2004-02-03">2004-02-03</a> for an example</i>.
</p>

<p>
Someone is having trouble deploying the web application in Tomcat
5.0.  I will have to research this further.
</p>
</dd>
<dt><a name="2004-01-06">January 06, 2004</a></dt>
<dd>
<p>
Someone is asking about classes depending on methods they inherit
from interfaces or abstract supeclasses.  If a concrete class calls one
of its own methods that it inherited from an interface or an abstract
superclass, there is no dependency recorded between the concrete class
and its ancestor.  I'll need to research this a little further.
</p>
</dd>
<dt><a name="2004-01-03">January 03, 2004</a></dt>
<dd>
<p>
I have an automated task that scrapes the SourceForge "Files" page
for Dependency Finder and saves the download tallies in a
<code>.csv</code> file.  I've been running it for over a year now.  I
have a nice graph in Excel showing trends and releases.  I was a little
apprehensive about my Windows 98 PC not crashing while I was away on
vacation, so I was relieved to find it still running upon my return.
But unfortunately, SourceForge changed the HTML for the page the day
after I left, with the result that I collected no data for the whole
time I was away.  And now, I must rewrite the HTML scraper to account
for the new HTML.
</p>
</dd>
<dt><a name="2003-12-31">December 31, 2003</a></dt>
<dd>
<p>
I'm away on vacation, but I still found the time to check in on
messages.  Someone has been having difficulties but I think it's just a
corrupted <code>.class</code> file.
</p>

<p>
They also asked to track database calls.  I hope they meant calls on
the JDBC API.  It is <b>very</b> difficult to track the actual SQL from
within Java.  You need to setup dynamic proxies to trap all calls to
statement objects and resolve parameters and all other kinds of
transformations.  This is way beyond the capabilities of Dependency
Finder, and well nigh impossible with static analysis alone.
</p>
</dd>
<dt><a name="2003-12-15">December 15, 2003</a></dt>
<dd>
<p>
Came up with much better screenshots.
</p>

<p>
Started working on how to break up analysis of large codebases.  I
am struggling with where to put it, though.  Should it go in the Manual
or as part of the samples?
</p>
</dd>
<dt><a name="2003-12-14">December 14, 2003</a></dt>
<dd>
<p>
False alarm.  They reinstalled the latest version of Dependency
Finder and it now works just fine.  I am extremely relieved to hear
this.  I was not looking forward to tracking weird flushing bugs.
</p>

<p>
Created a patch for fixing the long names for <code>IEPM</code>
and <code>OEPF</code> and published it as
<a target="_blank" href="http://sourceforge.net/tracker/index.php?func=detail&aid=860191&group_id=43305&atid=435886">patch #860191</a>.
</p>

<p>
Fixed Ant tasks that are subclasses of <code>GraphTask</code> to
accept multiple graphs.  Like <code>&lt;javac&gt;</code> and others,
you can use either the <code>srcfile</code> attribute or a nested
<code>&lt;src&gt;</code> element, or you can even use both.  It uses a
path-like structure, but I wanted to use a <code>FileSet</code>
instead.  You cannot really provide a directory, you have to specify
XML files.  But as I was editing the documentation, I came upon tasks
that are subclasses of <code>FileSet</code> and can have nested
<code>&lt;include&gt;</code> elements.  I'll have to look into doing
something similar instead of what I did just now.
</p>

<p>
I wanted to look at the size of serialized graphs to compare full
graphs to class-to-class graphs.  The way references are handled in
serialized graphs is closer to how it's handled in memory than my own
XML format.  But I ran into a stack overflow situation when I tried
to serialize this one graph.  This whole idea of serializing graphs is
just getting worse and worse.
</p>
</dd>
<dt><a name="2003-12-13">December 13, 2003</a></dt>
<dd>
<p>
Well, it didn't work out.  They tried to break down their codebase
but all their <code>DependencyReporter</code> output is either of
size zero or badly truncated.
</p>

<p>
Back in July, I had problems with truncated files, but back then it
was because <code>java.io.Writer</code> instances were not being closed.
I removed all calls to <code>java.io.Writer.flush()</code> because the
stream is supposed to be automatically flushed when it is closed.  It
has worked just well for me since then and I am troubled that they
should be having these kinds of problems.
</p>

<p>
They gave me a copy of their codebase to try and recreate the
problem, but it worked fine for me.  I'm down to thinking maybe it's
because they're on Linux, for some reason.  But that can't be it.
</p>

<p>
As I was working out their problem, I realized how great it is to
have <code>DependencyReporter</code> to merge graphs together.  I can
give it as many graphs as I want and it can combine them all
together.  I noticed the Ant task version doesn't do that; it can
only take a single graph at a time.  I'll need to fix that.
</p>

<p>
I fixed measurements IEPM's and OEPF's long name.  Now, I'll need
to create a patch for this.
</p>
</dd>
<dt><a name="2003-12-12">December 12, 2003</a></dt>
<dd>
<p>
That one customer with the large codebase and low memory still has
problems.  They had tried <code>OOMetrics</code> without much success.
The dependency-related measurement proved too hard to figure out
right.  I really need to do something about them.
</p>

<p>
So, they need to count dependencies between classes.
</p>

<p>
One approach is to use the dependency counts from
<code>OOMetrics</code>.  The downside  is that it uses an
<code>AggregatingClassfileLoader</code> to load all the class
structures before making any measurements.  Some measurements attempt
to traverse multiple classes and the tool must make sure they are
present in memory at that time.
</p>

<p>
Another option is to use <code>DependencyExtractor</code> to extract
a dependency graph first, and then get the information from it.
<code>DependencyExtractor</code> uses a
<code>TransientClassfileLoader</code> and discards each class structure
as soon as it's gotten the dependency information it needs.  The memory
requirements are much less.
</p>

<p>
But for a large codebase, the resulting graph can still be quite
large.  If you are really restrained memory-wise, it may still be too
much.  My customer was trying to run <code>DependencyExtractor</code>
to create one large graph and then reduce it with <code>c2c</code>.
Since all they needed were class-to-class dependencies, we figured they
could run <code>DependencyExtractor</code> multiple times on subsets of
the codebase, run <code>c2c</code> on the resulting graph subsets, and
finally recombine the now much smaller class-to-class graphs.  After
trying this with <code>DependencyFinder.jar</code>, it turned out that
the class-to-class graph reduced complexity by 98% compared to the
equivalent extracted graph.  I'm anxious to see if this worked for
them.
</p>
</dd>
<dt><a name="2003-12-11">December 11, 2003</a></dt>
<dd>
<p>
Someone has been trying to analyze a large codebase with limited
memory.  They're interested in counting class-level dependencies and
have been using <code>DependencyReporter</code> to reduce the graph and
then count inbound and outbound dependencies.  I suggested they use
<code>OOMetrics</code> instead.  It has a whole group of oddly named
measurements (OEP, IIPM, etc.) that already track dependencies.  As I
was reviewing them especially in the context of
<code>MartinConfig.xml</code>, I realized they were kind of cryptic and
I need to document what each one does and how you can combine them to
arrive at the counts you're interested in.
</p>

<p>
I noticed that measurement IEPM and OEPF had the wrong long name.
They said "Extra-Class" when they are actually "Extra-Package".
</p>
</dd>
<dt><a name="2003-12-10">December 10, 2003</a></dt>
<dd>
<p>
Got a new laptop.  Now I can have something closer to a real
development environment.
</p>

<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>OS</td>
        <td>:</td>
        <td>Windows 98</td>
        <td>-></td>
        <td>Windows XP Home</td>
    </tr>
    <tr>
        <td>JDK 1.3</td>
        <td>:</td>
        <td>1.3.1_05</td>
        <td>-></td>
        <td>1.3.1_09</td>
    </tr>
    <tr>
        <td>JDK 1.4</td>
        <td>:</td>
        <td>1.4.1</td>
        <td>-></td>
        <td>1.4.2_03</td>
    </tr>
    <tr>
        <td>Tomcat</td>
        <td>:</td>
        <td>4.1.27-LE-jdk14</td>
        <td>-></td>
        <td>5.0.16</td>
    </tr>
</table>
</blockquote>

<p>
With the Windows XP based on Windows NT, I can actually use the
startup scripts that ship with Dependency Finder.  On Windows 98, I had
to use variations that worked around limited memory and an
impossibility to create temporary environment variables.
</p>
</dd>
<dt><a name="2003-12-09">December 09, 2003</a></dt>
<dd>
<p>
Added help links to the resources page.
</p>

<p>
Started an embryonic screenshot gallery.
</p>
</dd>
<dt><a name="2003-12-06">December 06, 2003</a></dt>
<dd>
<p>
Added a feature to <code>ClassMetrics</code> that counts the occurrence of each VM
instruction in the analyzed codebase.  I had to do some minor refactoring of
classes <code>Hex</code> and <code>Instruction</code>.  The feature is actually in the class
<code>com.jeantessier.classreader.MetricsGatherer</code> and used by the UI classes for
the CLI and the matching Ant task.
</p>
</dd>
<dt><a name="2003-12-05">December 05, 2003</a></dt>
<dd>
<p>
Steve Kirk sent me his <code>rt.jar</code> file.  I tried <code>ClassList</code> on it with logging
turned on to see exactly where it fails.  I also discovered
"<code>javap -c <i>classname</i></code>" which dumps the instruction sequence for each method.
I compared the sequence from my logs with the one from <code>javap</code> to see if I'm
interpreting the bytecode correctly.
</p>

<p>
It turns out the class <code>com.jeantessier.classreader.Instruction</code> had the wrong
size for the instruction "<code>fstore</code>".  It listed it as 1 byte when it is really
2 bytes.  This threw off the bytecode reader and eventually led to some runtime
exception that crashed the program.  I have fixed it and published a patch for
it as
<a target="_blank" href="http://sourceforge.net/tracker/index.php?func=detail&aid=855085&group_id=43305&atid=435886">patch #855085</a>.
</p>

<p>
I find it had to believe that it took over two years for this bug to surface.
I'm very tempted right now to write a tool that counts the number of times each
instruction is present in a give codebase.  With it, I could see if maybe some
other rarely used instruction is also be wrong in
<code>com.jeantessier.classreader.Instruction</code>.
</p>
</dd>
<dt><a name="2003-12-04">December 04, 2003</a></dt>
<dd>
<p>
Steve Kirk has been having problems analyzing <code>rt.jar</code>
from JDK 1.4.2_01 on Linux.  From the error message he sent me, it
seems the bytecode is screwed up.  One instruction tries to look up
entry 47105 in a constant pool that has only 445 entries.  It would
appear that the compiler generated bad bytecode.  In any other
software, I'd believe that.  But in the JDK itself?  I'll have him
send me the file so I can investigate this myself.
</p>
</dd>
<dt><a name="2003-12-03">December 03, 2003</a></dt>
<dd>
<p>
Someone brought <a target="_blank" href="http://nounit.sourceforge.net/">NoUnit</a>
to my attention.  From what little I read, they seem to be using a
<code>.class</code> file parsing library from
<a target="_blank" href="http://www.netbeans.org/">NetBeans</a> to get a method call
graph.  I guess they then use logic similar to dependency closures to
figure out if methods are called directly from unit tests or if
indirectly, how many degrees are they removed from the tests.  Since
they only analyze <code>.class</code> files and then use XSL transforms
for rendering the information, they cannot take into account
conditional logic.  As far as I can see, the information can only be an
educated guess at best.  I think you'd be better off using a code
coverage tool like Clover or jcoverage to run the tests.  Maybe NoUnit
can give a quick estimate since you don't need to run the tests, and
that is worth something.
</p>
</dd>
<dt><a name="2003-11-30">November 30, 2003</a></dt>
<dd>
<p>
Nominated Dependency Finder for the 2003 Jolt Award at
<a target="_blank" href="http://www.sdmagazine.com/jolts/">Software Development</a>
magazine.  When I have a URL for people to use to vote for Dependency
Finder, I'll post it here.
</p>
</dd>
<dt><a name="2003-11-29">November 29, 2003</a></dt>
<dd>
<p>
Release 1.0.1.  Of course, as I was closing down, I noticed that I
had forgotten one image file.  So the new release is not even 12 hours
old and it already has a patch.  Bummer.
</p>
</dd>
<dt><a name="2003-11-28">November 28, 2003</a></dt>
<dd>
<p>
Fixed bug #804400.  It dealt with "<code>start ...</code>" commands
in both <code>DependencyFinder.bat</code> and <code>OOMetrics.bat</code>
batch files.  I added a quoted string right after the initial
<code>start</code> so the shell interprets the executable name
correctly under all circumstances.
</p>

<p>
Ant's latest version of their
<a target="_blank" href="http://ant.apache.org/external.html">list of external tools</a>
now includes Dependency Finder.  That was quick!
</p>
</dd>
<dt><a name="2003-11-26">November 26, 2003</a></dt>
<dd>
<p>
Sent a message on Ant's user mailing list to request that they add
Dependency Finder to Ant's list of external tools.  I'll have to keep
an eye on their file to see how long it takes them to include the
reference.
</p>

<p>
Did some code clean up to replace error reporting via system
<code>println()</code> calls with logging via Log4J instead.
</p>

<p>
I want to revamp the release schedule.  I'm going to break it up
into smaller chunks so I can have smaller, more frequent releases.  I
am going to put most of the small, miscellaneous tasks as
"unscheduled", that is I will not hold up a release just because of
them, but I will work on them as time allows.
</p>
</dd>
<dt><a name="2003-11-25">November 25, 2003</a></dt>
<dd>
<p>
Used Ant to compile JSPs for dependency analysis.  I'll have an
Ant <code>build.xml</code> soon.
</p>
</dd>
<dt><a name="2003-11-14">November 14, 2003</a></dt>
<dd>
<p>
Someone asked me about a tool to do jar-to-jar dependencies.  I've
been thinking for some time now about a tool to list dependencies
between JAR files, but it hasn't gone beyond being just a thought,
yet.
</p>

<p>
I was about to say that if the project is small enough, you can
always do the jar-to-jar analysis manually with the help of some
package-to-package reports.  I was going to show an example using
Dependency Finder, but even this small example ends up being quite
big.  In the end, I don't think this would work on anything beyond
a trivial example.
</p>

<p>
For example, if I run this against Dependency Finder, I get:
</p>

<pre>
    % DependencyExtractor -xml -out df.xml DependencyFinder.jar
    % p2p -scope-includes /^com.jeantessier/   \
          -filter-excludes /^java/             \
          -filter-excludes /^com.jeantessier/  \
          df.xml
    com.jeantessier.classreader
        --> org.apache.log4j
        --> org.apache.oro.text.perl
    com.jeantessier.commandline
    com.jeantessier.dependency
        --> org.apache.log4j
        --> org.apache.oro.text
        --> org.apache.oro.text.perl
        --> org.xml.sax
        --> org.xml.sax.helpers
    com.jeantessier.dependencyfinder
        --> org.apache.log4j
    com.jeantessier.dependencyfinder.ant
        --> org.apache.tools.ant
        --> org.apache.tools.ant.types
        --> org.xml.sax
    com.jeantessier.dependencyfinder.cli
        --> org.apache.log4j
    com.jeantessier.dependencyfinder.gui
        --> org.apache.log4j
        --> org.apache.oro.text.perl
        --> org.xml.sax
    com.jeantessier.diff
        --> org.apache.log4j
        --> org.apache.oro.text.perl
    com.jeantessier.metrics
        --> org.apache.log4j
        --> org.apache.oro.text
        --> org.apache.oro.text.perl
        --> org.xml.sax
        --> org.xml.sax.helpers
    com.jeantessier.text
        --> org.apache.oro.text
        --> org.apache.oro.text.regex
</pre>

<p>
There are a number of problems:
</p>

<ol>
<li>There are quite a few packages and a lot of repeated information.  If some JARs are quite obvious, like <code>ant.jar</code>, <code>jakarta-oro.jar</code>, and <code>log4j.jar</code>, it is not clear where "<code>org.xml.*</code>" would come from.  I'm thinking that the JVM would probably get them from its <code>BOOTCLASSPATH</code>.</li>
<li>It the tool analyzes <code>A.jar</code>, it will find dependencies on packages outside of <code>A.jar</code>.  It would then be quite difficult, maybe impossible, to find out in which JARs these extra packages are located.  The tool would need a mapping of packages to JAR;  this mapping would preferably be generated automatically by some other tool.</li>
<li>It is possible to put two classes of a package in two separate JARs.  This means that the tool would have to work at the class level instead of the package level.</li>
</ol>

<p>
I'm sorry there is no obvious answer to this problem, but I will
keep thinking about it.  In the meantime, there are some tools on the
Internet that track jar-to-jar dependencies.  Just google it.  :-)
</p>
</dd>
<dt><a name="2003-11-13">November 13, 2003</a></dt>
<dd>
<p>
Finished the "about..." box for the GUI.  I used Swing and
<code>JOptionPane.showMessageDialog()</code>, the <code>Internal</code>
version was for MDI applications.
</p>

<p>
Reorganized the release plan.  Pushed back documentation and moved
unscheduled HTML output forward.
</p>
</dd>
<dt><a name="2003-11-12">November 12, 2003</a></dt>
<dd>
<p>
Looked at building and "about..." box for the GUI.  I started with
the one in JUnit, but it is based on AWT.  I think that I may be able
to cook up something similar using Swing instead.  I'll start with
<code>JOptionPane.showInternalMessageDialog()</code> and see where it
leads.
</p>
</dd>
<dt><a name="2003-11-11">November 11, 2003</a></dt>
<dd>
<p>
Fixed the progress bar in the GUI.  <code>DependencyFinder</code>
and <code>OOMetricsGUI</code> now scan ahead to count files and classes
and use this information to drive a more accurate progress bar.
</p>
</dd>
<dt><a name="2003-11-07">November 07, 2003</a></dt>
<dd>
<p>
Svetlin Stanchev brought up the idea of having the web application
produce HTML instead of pre-formatted text.  I already have an
unscheduled task for this, so now I must decide whether or not to move
it forward.  I could use a dedicated <code>Printer</code> subclass,
like I do for text rendering.  This has the disadvantage of
duplicating the logic of rendering a dependency graph to a Java class
and an XSL transformation.  But I already did it for the text form, so
there is a precedent ...  I'm just not sure it really is a good
thing.
</p>
</dd>
<dt><a name="2003-10-30">October 30, 2003</a></dt>
<dd>
<p>
Fixed <code>MaximumCapacityPatternCache</code>.  It turns out that
<code>Perl5Util</code> use a second cache internally which is
initialized with the pattern cache's capacity.  This additional cache
pre-allocates memory proportionally to the capacity, in my case
proportionally to <code>Integer.MAX_VALUE</code>, or about 2 billions.
I changed my cache to use a hard-coded value of 20.  That should be
enough to keep things going.
</p>

<p>
I added my new cache in a few other <code>Perl5Util</code> instances
where they might run into many regular expressions.  I had to create a
new package, <code>com.jeantessier.text</code> for the ORO-related
class.
</p>

<p>
Added <code>xml-apis.jar</code> and <code>xercesImpl.jar</code> to
the web application's WAR file.
</p>

<p>
Fixed <code>junit.bat</code> and <code>textjunit.bat</code> to use
<code>xml-apis.jar</code> instead of the former
<code>xmlParserAPIs.jar</code>.
</p>
</dd>
<dt><a name="2003-10-29">October 29, 2003</a></dt>
<dd>
<p>
Svetlin Stanchev requested a variation of the web application that
can read in a dependency graph saved as an XML document.  This way,
one can build on one machine, including generating the graph, and only
copy the graph to the web server machine instead of copying all the
classes resulting from the compilation.  It sounded like a good idea
and so I added <code>load.jsp</code> to do just that.  I might have to
redesign the footer a little and the web app's parameters.  One
drawback is that in order to read the XML document, the web application
needs an XML parser.  This means I need to add Xerces to the web app,
bumping up the WAR file's size considerably.
</p>

<p>
By configuring Log4J correctly, Svetlin Stanchev took graph
extraction from 6 hours down to 10 minutes.  I'm happy about that.
</p>

<p>
I was trying to analyze the main JAR file of Together Control
Center as an example of working with a large piece of software (i.e.,
with a huge number of classes).  I didn't get very far because one
of the classes in the JAR appeared corrupted and broke the whole
<code>.class</code> file loading process.  I adjusted
<code>ClassfileLoaderEventSource</code> so it can skip single,
malformed classes without aborting everything.  It turns out they used
an obfuscator and it added a text file with a <code>.class</code>
extension, fooling Dependency Finder ginto trying to parse it like a
regular <code>.class</code> file with bytecode in it.
</p>

<p>
I gave a shot at <a target="_blank" href="http://sourceforge.net/tracker/index.php?func=detail&aid=825582&group_id=43305&atid=435887">Feature Request 825582</a>,
the one about the pattern cache for <code>Perl5Util</code>.  I tried
to build a cache based on a simple <code>HashMap</code> with
"unlimited" capacity, but when I use it in
<code>SelectiveTraversalStrategy</code>, I get a bunch of
<code>OutOfmemoryError</code> even from seemingly unrelated areas of
the code.  More later...
</p>
</dd>
<dt><a name="2003-10-28">October 28, 2003</a></dt>
<dd>
<p>
Expanded the documentation for dealing with Ant and XSL transforms.
Check out the documentation, under the "<a target="_blank" href="tasks/">Ant Tasks</a>"
heading.
</p>

<p>
As I was preparing a reply to the original call for help, I noticed
that whether or not Log4J is configured properly can have a huge impact
on the performance of the tasks.  In one test, running
<code>DependencyExtractor</code> on Dependency Finder itself took over
7 minutes with the missing Log4J configuration versus 14 <b>seconds</b>
with the configuration that ships with Dependency Finder.  So if you
find that Dependency Finder is a little unresponsive, you might want
to check your Log4J configuration.
</p>
</dd>
<dt><a name="2003-10-27">October 27, 2003</a></dt>
<dd>
<p>
The "<code>No more DTM IDs</code>" problem with using Ant's
<code>&lt;xslt&gt;</code> task has surfaced again.  I had not given it
any thoughts since last April.  The solution is to upgrade Xalan in JDK
1.4.1 or use its <code>java.endorsed.dirs</code> settings.  I added
an additional documentation page under "tasks", but I will need to
explain it further and tests workarounds.
</p>

<p>
Added <code>dependencyfindertasks.properties</code> so defining Ant
tasks is made easier.
</p>
</dd>
<dt><a name="2003-10-24">October 24, 2003</a></dt>
<dd>
<p>
Svetlin Stanchev asked me to include a property file for Ant tasks
directly into <code>DependencyFinder.jar</code>, and also asked for
more extended Ant documentation.  I have had a task on my desk to
provide more process-related documentation for the Ant tasks and
provide examples of how to use them together to provide added value.  I
guess it's time I get to it.
</p>

<p>
Jason Bell, in his JDJ editorial for October 2003, talks about
"dependency rot" and how tracking dependencies is critical.  I need
to make him aware of Dependency Finder!  :-)
</p>
</dd>
<dt><a name="2003-10-21">October 21, 2003</a></dt>
<dd>
<p>
Fixed progress bar notification in GUI.  It had trouble dealing with
the processing of nested groups and was getting off track.  In doing
so, I ended up renaming events under <code>DependencyListener</code>
and <code>MetricsListener</code> from <code>StartX()</code> and
<code>StopX()</code> to <code>BeginX()</code> and <code> EndX()</code>
respectively.  This way, all events follow the same convention.  It
could impact people who developed on top of Dependency Finder, I'll
see if it causes an uproar.  They should be able to upgrade by simply
renaming their methods and adding empty implementations for the new
<code>BeginSession()</code> and <code>EndSession()</code> events.
</p>
</dd>
<dt><a name="2003-10-18">October 18, 2003</a></dt>
<dd>
<p>
Added copyright dates to the version information.  I will need to do
something about the code duplication in all the CLI tools.
</p>

<p>
I want to nominate Dependency Finder for the next Jolt Awards.  I
couldn't last year because products needed to have had a major release
in the year, but now with 1.0 out and 1.0.1 on the way, I'm in the
clear.
</p>
</dd>
<dt><a name="2003-10-17">October 17, 2003</a></dt>
<dd>
<p>
Someone tried to run a dependency query with an exclusion list that
had over 10,000 regular expressions!  On a sizeable codebase, the whole
thing took about 13 hours.  They dug around a bit and found that
<code>Perl5Util</code> only caches 20 regular expressions at a time by
default.  Their query was taking forever because the ORO engine was
constantly recompiling regular expressions.  They entered
<a target="_blank" href="http://sourceforge.net/tracker/index.php?func=detail&aid=825582&group_id=43305&atid=435887">Feature Request 825582</a>
at SourceForge.net to request some way to adjust the caching
configuration for <code>Perl5Util</code>.
</p>

<p>
I added a <code>-version</code> switch to most CLI tools.  It
prints version information from the JAR file's manifest and then exits
the tool.
</p>

<p>
I have a problem with some of the tools that require some mandatory
switches, such as <code>ClassClassDiff</code> and
<code>JarJarDiff</code>.  The command-line parser throws an exception
when the mandatory switches are missing, therefore bypassing any
further processing.  Right now, I can't do anything about it and the
user must provide the mandatory switches to see the version output.  I
see one possible way to handle it.  The parser could throw a different
type of exception when mandatory switches are missing.  The caller
could catch the exception and still inspect the command-line for the
<code>-version</code> switch.  If it is present, the caller could then
print version data instead of usage data.
</p>

<p>
For the GUI, I want to use an "About ..." box in the menu bar.  I
will look at the code in JUnit for "inspiration".
</p>
</dd>
<dt><a name="2003-10-15">October 15, 2003</a></dt>
<dd>
<p>
Someone claimed that <code>ListDocumentedElements</code> was missing
some elements, "whole classes".  They wouldn't give me more details.
How can they expect me to find and fix a potential problem if they
won't even help me recreate it?  It'd be one thing if they were some
unrelated party working on proprietary code that they can't show me,
but this was a coworker.  We work together on the same code.  They just
didn't want to be bothered.  So if anybody out there ever sees this
too, where <code>ListDocumentedElements</code> is missing some valid
elements, please let me know.  Until now, it has worked just fine for
me, so I'll just assume that my coworker had a bad configuration.
</p>
</dd>
<dt><a name="2003-10-09">October 09, 2003</a></dt>
<dd>
<p>
For a while, I had thought about modifying <code>OOMetrics</code> to
output multiple formats in one call.  You could call it with
<code>-csv</code>, <code>-txt</code>, and <code>-xml</code> to generate
all three formats at the same time.  And I could do the same thing with
other tools than generate multiple output formats.  I finally decided
against.  There is very little value in this feature and it would need
broad sweeping changes in the way tools interpret command-line
arguments, such as figuring out the extension for the output filename.
I'll just leave things as they are for now.
</p>
</dd>
<dt><a name="2003-10-01">October 01, 2003</a></dt>
<dd>
<p>
Adjusted the verbose output in the CLI and Ant packages.  I still
have to deal with the progress bar in the GUI.
</p>

<p>
Possible third-party software that might be useful:
</p>

<table>
    <tr>
        <td>JCharts</td>
        <td><a target="_blank" href="http://www.sourceforge.net/">SourceForge</a></td>
        <td>graphical charting package</td>
    </tr>
    <tr>
        <td>JOpenChart</td>
        <td><a target="_blank" href="http://www.sourceforge.net/">SourceForge</a></td>
        <td>graphical charting package</td>
    </tr>
    <tr>
        <td>The Big Faceless Java Graph Library</td>
        <td><a target="_blank" href="http://www.big.faceless.org/">The Big Faceless Organization</a></td>
        <td>graphical charting package</td>
    </tr>
    <tr>
        <td>The Big Faceless Java PDF Library</td>
        <td><a target="_blank" href="http://www.big.faceless.org/">The Big Faceless Organization</a></td>
        <td>library for handling PDF documents</td>
    </tr>
    <tr>
        <td>Japhar</td>
        <td><a target="_blank" href="http://www.japhar.org/">Japhar.org</a></td>
        <td>JVM</td>
    </tr>
    <tr>
        <td>Kaffe</td>
        <td><a target="_blank" href="http://www.kaffe.org/">Kaffe.org</a></td>
        <td>JVM</td>
    </tr>
    <tr>
        <td>Jeode</td>
        <td><a target="_blank" href="http://www.esmertec.com/">esmertec</a></td>
        <td>JVM</td>
    </tr>
</table>

<p>
I haven't checked them yet.  More on this later.
</p>
</dd>
<dt><a name="2003-09-30">September 30, 2003</a></dt>
<dd>
<p>
Someone wrote to me saying they had problems with
<code>ListUnused</code>.  It was showing their constants as unused.
This is because the compiler inlines them in the bytecode if they are
simple enough.  I amended the documentation for <code>ListUnused</code>
to explain this in a little more details.
</p>
</dd>
<dt><a name="2003-09-29">September 29, 2003</a></dt>
<dd>
<p>
Someone wrote to me saying they had they couldn't figure out the
measurements names from their short acronyms in CSV output.  I pointed
them to the metrics configuration XML document, which lists the long
name next to each measurement's short name.  I also pointed out that
the text and XML outputs list both side by side.
</p>

<p>
Back when I was preparing version 1.0, I toyed with the idea of
having part of the documentation describe each measurement the same
way that I have detailed descriptions for each tool in Dependency
Finder.  I gave up it when I figured that the long names were already
fairly indicative and keeping this document in sync with the
configuration file would be a lot of work.  Maybe I can still add a
simple description section in the descriptor...
</p>
</dd>
<dt><a name="2003-09-25">September 25, 2003</a></dt>
<dd>
<p>
Moved the GUI's <code>LoadListener</code> implementations to use the
new <code>VerboseListenerBase</code>.  Instead of mingling it in the
action class, I moved it out into delegate listener classes.  Again,
classes should do one thing only, and do it well.  A lesson to
remember.
</p>

<p>
Now that the GUI, the CLI, and the Ant tasks have access to the full
group processing stack, I can work on to how use that information in the
progress messages.
</p>
</dd>
<dt><a name="2003-09-24">September 24, 2003</a></dt>
<dd>
<p>
Found some interesting leads for free graphical packages in next
month's JavaPro magazine.  I will need to look more closely into JChart
and JOpenChart.  There also seems to be a few packages out there for
dealing with PDF files.  That could also be an interesting avenue for
future development.
</p>

<p>
That same issue of JavaPro also listed
<a target="_blank" href="http://thesmallworlds.com/">Small Worlds</a> as an analysis
tool.  I will need to write to them that maybe they should have listed
Dependency Finder too.  :-)
</p>

<p>
Moved the CLI's and Ant's <code>VerboseListener</code> classes to
use the new <code>VerboseListenerBase</code>.  I aligned their output
to match more closely that of <code>extract.jsp</code>.
</p>

<p>
Interestingly, I had CLI's <code>VerboseListener</code> extend from
<code>java.io.PrintWriter</code> for some reason.  Of course, it made
changing in to extend from <code>VerboseListenerBase</code> instead a
rather interesting experience.  Let this be a lesson against inheriting
implementation.  Incidentally, the other candidates for extending
<code>VerboseListenerBase</code> are in the GUI and already extend
<code>javax.swing.AbstractAction</code>.  I am not sure how I'm going
to deal with this one, yet.
</p>
</dd>
<dt><a name="2003-09-22">September 22, 2003</a></dt>
<dd>
<p>
I'm rewriting the <code>VerboseListener</code> classes to use the
group tracking behavior I wrote for <code>extract.jsp</code>.  I
started by extracting the basis from it and moving it into the
<code>com.jeantessier.dependencyfinder</code> package.
</p>
</dd>
<dt><a name="2003-09-18">September 18, 2003</a></dt>
<dd>
<p>
<a target="_blank" href="http://martinfowler.com/">Martin Fowler</a> reorganized the
articles on his web page, so I had to adjust the URLs on the resources
page.  Thanks to Vadim Nasardinov for pointing it out.
</p>
</dd>
<dt><a name="2003-09-10">September 10, 2003</a></dt>
<dd>
<p>
Added an extraction timestamp to the JSPs' footer.  I was tired of
always having to manually type the URL to <code>extract.jsp</code>
every time I wanted to know if I could rely on the data.
</p>

<p>
Someone has mentioned that API diff reports still list modified
methods even when the class is deprecated.  Would it not be better if
a class that is now deprecated simply repress all further modifications
to it?  I say no.  Even though the class is now deprecated, it is
still part of your supported API until it is completely removed.  As
such, its modifications should still be listed since users of the
library are likely to still be using the class.
</p>

<p>
Upgraded my testing environment from Tomcat 4.1.24 to 4.1.27.
</p>
</dd>
<dt><a name="2003-09-09">September 09, 2003</a></dt>
<dd>
<p>
Looked into using the JSP compiler from Tomcat to automatically
compile the web app's JSPs.  This way, I can include their dependencies
in reports and so forth.
</p>

<p>
At the same time, I noticed some nice patterns in how to use Ant
with external properties files.  I might even apply some of them to
Dependency Finder.
</p>
</dd>
<dt><a name="2003-09-08">September 08, 2003</a></dt>
<dd>
<p>
Came up with an idea for a <code>LoadListenerBase</code> that would
handle the group-related events and maintain a stack of group data.
This way, all <code>VerboseListener</code> classes can share that
behavior, including rendering the group stack consistently.  This new
abstract base class would include much of the <code>LoadListener</code>
logic from <code>extract.jsp</code>.  I still not sure if I should call
it <code>LoadListenerBase</code> or <code>LoadAdapter</code>.
</p>

</dd>
<dt><a name="2003-09-05">September 05, 2003</a></dt>
<dd>
<p>
Created a release plan for version 1.0.1.
</p>
</dd>
<dt><a name="2003-09-04">September 04, 2003</a></dt>
<dd>
<p>
Added some links to the resources page.
</p>

<p>
Semantic Designs, Inc. has a suite of tools to analyze source code,
compute metrics, and perform refactorings.
</p>

<p>
Infotectonica has a tool called Juliet that tracks dependencies and
cross-references with a lot of details and a rich query language.  It
works off of source code and integrates with popular IDEs.
</p>

<p>
Robert C. Martin came out with a book on software that is gathering
a lot of praise.  I have taken many ideas from his various papers and
presentations.  All that material is collected and augmented in
"Agile Software Development: Principles, Patterns, and Practices".  I
just got my copy and I have been going through it slowly.  So far. so
good.  It holds up to expectations.
</p>
</dd>
<dt><a name="2003-09-03">September 03, 2003</a></dt>
<dd>
<p>
Added <code>MANIFEST.MF</code> to the list of files for the
<code>PermissiveDispatcher</code> to ignore.
</p>

<p>
Added tests for both <code>PermissiveDispatcher</code> and
<code>StrictDispatcher</code> to increase code coverage.
</p>
</dd>
<dt><a name="2003-09-02">September 02, 2003</a></dt>
<dd>
<p>
Added a more permissive <code>ClassfileLoaderDispatcher</code> that
tried to use <code>ZipClassfileLoader</code> on files of unknown type.
I also made this new, more permissive dispatcher the new default.
</p>

<p>
Finally figured out how to use @link tags for <code>javadoc</code>
and fixed the one file where I was using it: the package description
for <code>com.jeantessier.classreader</code>.
</p>

<p>
Also edited the website's introductory page to adjust some of the
phrasing.
</p>
</dd>
<dt><a name="2003-09-01">September 01, 2003</a></dt>
<dd>
<p>
Fixed backlog in journal entries.
</p>
</dd>
<dt><a name="2003-08-31">August 31, 2003</a></dt>
<dd>
<p>
Rewrote the web application so that the copyright notice at the
bottom is actually coming from <code>footer.jsp</code>, which gets
included using <code>&lt;jsp:include&gt;</code>.
</p>

<p>
For the longest time, I have tried to keep the JSPs as simple and
self-contained as possible.  I figured they would make handy examples
of how to use the various parts of Dependency Finder.  But now, they
are becoming more and more difficult to manage, with all that
duplicated HTML between them, and I am not even touching the duplicated
code between all versions of the tools.  Anyway, I decided to make my
life a little easier and at least break out the duplicated HTML to a
shared satellite JSP.
</p>
</dd>
<dt><a name="2003-08-29">August 29, 2003</a></dt>
<dd>
<p>
Adjusted all implementations of <code>LoadListener</code> to handle
the new events.  It is still a little quirky and I will need to fine
tune them later.
</p>

<p>
I also renamed some of the attributes in the <code>LoadEvent</code>.
What was the <i>filename</i> is now called the <i>group</i>name_ and
what was the <i>element</i> is now called the <i>filename</i>.  This
way, the naming reflects more closely the use for these attributes.
</p>

<p>
I have been considering removing <code>ClassDependencyCollector</code> and
<code>FeatureDependencyCollector</code>.  I am not using them anymore,
and <code>CodeDependencyCollector</code> does a much better job.
</p>
</dd>
<dt><a name="2003-08-28">August 28, 2003</a></dt>
<dd>
<p>
Got all unit tests to pass again, except for those four that deal
with closures.  Finished the work on <code>ClassfileLoader</code>.  Now
I need to adjust all <code>LoadListener</code> as well as come up with
a more permissive <code>ClassfileLoaderDispatcher</code> that is also
configurable.  Maybe another XML descriptor?
</p>
</dd>
<dt><a name="2003-08-27">August 27, 2003</a></dt>
<dd>
<p>
Finally figured out the flow between ClassfileLoaders.  Did most of
the coding for <code>ZipClassfileLoader</code>, which also takes care
of <code>JarClassfileLoader</code>.  But I could not get to
<code>DirectoryClassfileLoader</code>, so the unit tests are still
failing.
</p>
</dd>
<dt><a name="2003-08-26">August 26, 2003</a></dt>
<dd>
<p>
I have been thinking some more about the flow of control to manage
to recursively process ZIP-like files.  But I can't quite wrap my head
around it right now.
</p>
</dd>
<dt><a name="2003-08-24">August 24, 2003</a></dt>
<dd>
<p>
Wrote the tests for the new events.  They are all failing, of
course.
</p>
</dd>
<dt><a name="2003-08-22">August 22, 2003</a></dt>
<dd>
<p>
Came up with a sequence diagram to better understand the
interactions between various <code>ClassfileLoader</code> instances.
This will help me organize the interactions to deal with recursive
processing of ZIP-like files.
</p>

<p>
<img src="../images/LoadJAR.gif" /><br />
</p>

<p>
I had to explode the <code>ClassfileLoader</code> instances to show
how the behavior is spread across the inheritance hierarchy.  This
yields a cleaner diagram, thanks to the fact that each class is
responsible for one and only one thing.
</p>

<p>
<img src="../images/LoadJAR.exploded.gif" /><br />
</p>
</dd>
<dt><a name="2003-08-21">August 21, 2003</a></dt>
<dd>
<p>
Started coding <code>BeginFile</code> and <code>EndFile</code>
load-time events.  I also want to automatically expand ZIP and JAR
files, so I can open compound ZIP-like files, such as WAR and EAR,
directly.  This will complicate the flow of events, though.
</p>
</dd>
<dt><a name="2003-08-20">August 20, 2003</a></dt>
<dd>
<p>
When extracting from ZIP or JAR files, the progress reports always
fall short of 100%.  I realized that this is because the size estimates
include directory entries and non-<code>.class</code> files.  The
progress function only counts <code>.class</code> files, and therefore
always comes up short a bit.  So I have added two new load-time events
for when the <code>ClassfileLoader</code> start on a file, regardless
of its extension, and when it is done with a file.  These events occur
before and after the <code>BeginClassfile</code> and
<code>EndClassfile</code> respectively.
</p>
</dd>
<dt><a name="2003-08-19">August 19, 2003</a></dt>
<dd>
<p>
I thought of a new way to use <code>JarJarDiff</code>.  So far, I
have talked about how you can use it as a producer of software
libraries to monitor the evolution of the published interface you
expose.  But another usage is as a consumer of software libraries,
where you want to know if a new version of the library introduced
changes on the part of the library that you use.  I am putting
together detailed instructions on how to use Dependency Finder to
automatically compute which part of the third-party library you are
using and use this information to filter the output of
<code>JarJarDiff</code>.  More on this later.
</p>
</dd>
<dt><a name="2003-08-15">August 15, 2003</a></dt>
<dd>
<p>
Added a <code>BeanInfo</code> helper class to the
<code>Version</code> class.  This way, I can use
<code>&lt;jsp:getProperty&gt;</code> tags in JSPs and not have to call
my accessors <code>getX()</code> and <code>setX()</code>.  It works on
Tomcat, but I remember having problems with using <code>BeanInfo</code>
with other application servers in the past.  I just hope they have made
progress since.
</p>

<p>
I found a bug (#789373) with using the XSL stylesheet
<code>PublishedDiffToHTML.xsl</code> from Ant with the
<code>&lt;xslt&gt;</code> task.  I will have to investigate, but I
should really rewrite that entire stylesheet so it complies with proper
XSL rules.  In the meantime, people can use the
<code>&lt;java&gt;</code> task to run Xalan's XSL processor,
<code>org.apache.xalan.xslt.Process</code>, instead.  Just make sure
you set <code>fork</code>"yes"= on the task's attributes so that JDK
1.3 VMs pick up the Xalan JAR file.  The bug report has a sample Ant
build file that shows how to do it.  I will also add it to the
documentation eventually.
</p>

<p>
Ran <code>JarJarDiff</code> on Xerces and Xalan for the latest
upgrade.
</p>
</dd>
<dt><a name="2003-08-12">August 12, 2003</a></dt>
<dd>
<p>
Moved the version stuff to its own class, but since it reads
information from its JAR file's manifest, I cannot find a way to test
it properly.  The good news is that with its no-args constructor, I
can use it in JSPs with the &lt;jsp:useBean&gt; tag.  Next, I will
outfit the CLI tools with a <code>-version</code> switch.  And maybe
I can even get an "About" box for the GUI.
</p>

<p>
On the downside, I am not too sure where to put this new class.  It
is in the new package <code>com.jeantessier.dependencyfinder</code>,
soon to be joined by tools to group the cut and pasted code that ends
up duplicated between the CLI, the GUI, the JSPs, and the Ant tasks.
I might even go as far as creating custom tags for the JSPs, or at
least JavaBeans for the parameters to the query, closure, and
dependency metrics engines.
</p>

<p>
I created a feature request to address the start scripts for Unix
(#787904).  Since I don't have an environment setup to develop and
tests and package on Unix (yet), I am going to leave these scripts in a
patch for now. These scripts don't use the contribution from Jonathan
Doughty because I am not done studying it, yet.  More on this later.
</p>
</dd>
<dt><a name="2003-08-11">August 11, 2003</a></dt>
<dd>
<p>
Figured a way to get at the information in the JAR file's
<code>/META-INF/MANIFEST.MF</code> entry.  I now use it in the web
application's JSPs to generate the "Powered by ..." branding with a URL
back to the Dependency Finder website.  I will soon refactor it into a
class I can use with <code>-version</code> switches in the CLI and in
an About box in the GUI.
</p>

<p>
I tried to use
<code>getClass().getResourceAsStream("/META-INF/MANIFEST.MF")</code>,
but the classloader has to defer to its parent first, before it tries
to resolve anything.  So I always go the manifest for the JDK itself.
I had to get the resource URL for the class itself first, and parse it
to extract the path to the JAR file instead, and extract its manifest
via the <code>java.util.jar</code> package.
</p>
</dd>
<dt><a name="2003-08-09">August 09, 2003</a></dt>
<dd>
<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>Xerces</td>
        <td>:</td>
        <td>2.3.0</td>
        <td>-></td>
        <td>2.5.0</td>
    </tr>
    <tr>
        <td>Xalan</td>
        <td>:</td>
        <td>2.5 D1</td>
        <td>-></td>
        <td>2.5.1</td>
    </tr>
</table>
</blockquote>

<p>
For Xalan, I used  the distribution with two JAR files,
<code>xalan.jar</code> and <code>xsltc.jar</code>.  I don't need the
material in the second one, so I only ship <code>xalan.jar</code> and
this keeps the size of the distribution down.
</p>
</dd>
<dt><a name="2003-08-05">August 05, 2003</a></dt>
<dd>
<p>
Published patch for choosing between a <code>GraphCopier</code> and
a <code>GraphSummarizer</code> when running dependency queries.  This
new patch (#784040) replaces two previous ones (#776154 and #776161)
and also fixes a bug in <code>ClassReader</code> where it sent its
<code>Printer</code> to the output stream and generated erroneous XML
data.
</p>

<p>
Found that <code>StatisticalMeasurement.CollectData()</code> was
both <code>synchronized</code> <b>and</b> had a
<code>synchronized</code> block inside that synchronized on
<code>this</code>.  This being redundant, I removed the synchronization
in the method signature and kept the internal block.  This way, it runs
a tinny bit faster when the data set has not changed.
</p>
</dd>
<dt><a name="2003-08-01">August 01, 2003</a></dt>
<dd>
<p>
SourceForge download counters are working again.
</p>
</dd>
<dt><a name="2003-07-28">July 28, 2003</a></dt>
<dd>
<p>
Added a copy-only feature to <code>DependencyReporter</code> (both
on the CLI and the Ant task), <code>DependencyFinder</code> and
<code>advancedquery.jsp</code>.  When turned on, the tools always use
<code>GraphCopier</code> to answer queries.  This is useful if you
want a class-to-class graph with only inheritance, for instance.  I
still have to document this new feature in the manuals.
</p>

<p>
I added navigation controls to <code>extract.jsp</code>.  I was
tired of always editing the URL to go to the query JSP after
extracting a graph.  The navigation is the same as on the other JSPs
and I adjusted the title at the top of the page to match that of the
other pages.
</p>
</dd>
<dt><a name="2003-07-23">July 23, 2003</a></dt>
<dd>
<p>
Thanks to Jonathan Doughty, who donated a Unix shell script for
launching the tools in Dependency Finder.  I haven't had the time to
look at it yet, but I am curious about how he got around to doing it.
</p>

<p>
Incidentally, for those who wonder, the main reason I don't have a
Unix version of the scripts is not that I don't know how to write them,
but it is that I don't have a convenient environment to build and to
test them.  I was thinking of Bourne shell scripts
(<code>/bin/sh</code>) that could discover
<code>DEPENDENCYFINDER_HOME</code> from their invocation path and figure
out the exact name of the class to invoke from their invocation name.
I have a prototype on the SourceForge shell server that dates back to
<a href="#2003-01-23">2003-01-23</a>, but I cannot build a <code>.tar.gz</code> file with symbolic
links in it on my Windows machine, and I don't want to distribute my
build process either.  And working via that dreadful SSH terminal is out
of the question.  I need three or four launchers to handle the various
patterns in scripts, and symbolic links to create all the scripts.
Since I cannot create the symbolic links at build-time on my Windows
machine, I might have to write a quick install script that creates all
the symbolic links to each launcher.  Running it would become part of
the installation process.  Jonathan Doughty took a slightly different
approach, so I look forward to comparing what he did with what I had in
mind.  Maybe I can get a patch together while we wait for the next
release...
</p>

<p>
I had put the wrong patch file in patch #776104.  I was able to
recreate the correct file and upload it to SourceForge.  Luckily, this
patch was very minor and did not address anything that was broken; it
simply removed redundant calls to
<code>java.io.PrintWriter.flush()</code>.  I actually considered
removing the patch altogether and keep the fix for a release.  Maybe I
will change my mind again at some point in the future.  :-)
</p>
</dd>
<dt><a name="2003-07-22">July 22, 2003</a></dt>
<dd>
<p>
Someone found a bug with <code>DependencyReporter</code>.  It does
not close its <code>PrintWriter</code> and ends up truncating the
output.  I created a patch for it, after verifying that it was the only
tool experiencing this problem.
</p>

<p>
I also created a patch for the "refresh" button (a.k.a. "reload") on
<code>DependencyFinder</code>.
</p>

<p>
I also created a patch for the clean up of calls to
<code>flush()</code> from a while ago.
</p>

<p>
I cleaned up some indentation text.  There were still places where
there were four spaces instead of <code>TAB</code> characters.
</p>

<p>
About the whole optionally using a <code>GraphCopier</code> thing,
I have been thinking that this functionality really belongs to the
advanced controls and I don't need to clutter the simple controls with
it.
</p>

<p>
Upgraded my testing environment from Clover 1.1.1 to 1.2.
</p>
</dd>
<dt><a name="2003-07-21">July 21, 2003</a></dt>
<dd>
<p>
Upgraded my testing environment from Tomcat 4.1.18 to 4.1.24.
</p>
</dd>
<dt><a name="2003-07-20">July 20, 2003</a></dt>
<dd>
<p>
Regenerated the code coverage
<a target="_blank" href="clover/">output</a> from
<a target="_blank" href="http://www.thecortex.net/clover">Clover</a>.
Added the code coverage
<a target="_blank" href="jcoverage/">output</a> from
<a target="_blank" href="http://jcoverage.com/">jcoverage</a>.
</p>
</dd>
<dt><a name="2003-07-18">July 18, 2003</a></dt>
<dd>
<p>
Toyed with the idea of using a <code>GraphCopier</code> instead
of a <code>GraphSummarizer</code> again.  I could prototype JSPs
very quickly that I'll need to work into CVS.  I might also apply
the same logic to the CLI and Ant tools.
</p>
</dd>
<dt><a name="2003-07-17">July 17, 2003</a></dt>
<dd>
<p>
Fixed the typos in the page on A vs. I graphs.
</p>

<p>
Added a "reload" button to <code>DependencyFinder</code>.  It
re-extracts the last extracted file and clears the result areas in
the GUI.
</p>
</dd>
<dt><a name="2003-07-15">July 15, 2003</a></dt>
<dd>
<p>
Found some typos in the page on A vs. I graphs.
</p>

<p>
The GUI could really benefit from a "reload" button.  I keep
having to do "New" and then "Extract", but that resets the controls,
which can have complex regular expressions in them.  All this is too
tedious.
</p>

<p>
Again in the GUI, it would be nice to save the results from
dependency queries to an XML document for future reference.
</p>
</dd>
<dt><a name="2003-07-08">July 08, 2003</a></dt>
<dd>
<p>
I'm back.
</p>

<p>
Suppose you place a query against a dependency graph.  You only want
to see class-to-class dependencies.  If a method is class A calls a
method in class B, but class A does not refer to class B directly,
there is an implicit dependency <code>A&nbsp;--&gt;&nbsp;B</code> but
not an explicit dependency <code>A&nbsp;--&gt;&nbsp;B</code>.  99% of
the time, you want to see the implicit dependency.  But on rare
occasions, you don't.  Is that justification enough to add a switch to
the user experience to show only explicit dependencies?  The code is
already written; it means using a <code>GraphCopier</code> instead of
a <code>GraphSummarizer</code> to perform the query.  This is what the
tools do when the graph is maximized anyway.  I think I'll sit on this
one a little while longer.  I can always use
<code>DependencyExtractor</code> and look at the raw output for the
rare times I don't want to see implicit dependencies.
</p>
</dd>
<dt><a name="2003-06-13">June 13, 2003</a></dt>
<dd>
<p>
Someone is having problems with <code>JarJarDiff</code> when their
JAR files are generated by Maven, an Apache tool that looks like a
super-Ant.  I'm going on vacation, I cannot look into it right now.
It will have to wait until I return.  The problem seems related to
the <code>MANIFEST.MF</code> file, so maybe if they rename the files
to <code>.zip</code> it will bypass that file and work.
</p>

<p>
Uploaded a patch to fix the extraneous text in the output of
<code>OOMetrics</code>.
</p>
</dd>
<dt><a name="2003-06-12">June 12, 2003</a></dt>
<dd>
<p>
Minor correction in the documentation of Ant tasks.  When defining
the <code>CLASSPATH</code> for Dependency Finder, always put the
<code>classes</code> directory before the
<code>DependencyFinder.jar</code> file.
</p>

<p>
My download counters are still at zero, but so are others at
SourceForge.  I suspect that SourceForge has some kind of bug.
</p>

<p>
I am going to be on vacation for three weeks, starting this Sunday.
I will be back around the 4th of July.  I still have a patch to
produce before that.  I will do a 1.0.1 release upon my return.
</p>

<p>
I have been struggling with rewriting the JSPs and break them up
into headers and footers and navigation pages.  Maybe even use tags
for the processing and JavaBeans for the request parameters.  One
argument against doing this is that the JSPs provide examples of how
to use the classes in Dependency Finder.  I'm not fully decided yet.
</p>
</dd>
<dt><a name="2003-06-06">June 06, 2003</a></dt>
<dd>
<p>
This is my luck.  The day after the 1.0 Release I find a number of
oversights.
</p>

<p>
First, <code>OOMetrics</code> still tries to print its printer.
This made sense when the printers contained a <code>StringBuffer</code>
and returned the text as part of their <code>toString()</code>
method.  But now, they print directly to the output stream and don't
have a <code>toString()</code> method anymore.  The output now has
weird strings in odd places, which actually breaks the XML output.
</p>

<p>
Second, the version information in the JAR file's manifest is the
stripped version: "10" instead of "1.0".  I added additional properties
in <code>build.xml</code> to handle CVS vs. version labels.
</p>

<p>
Third, some classes call <code>flush()</code> on streams before
closing them, and others don't.  The documentation says this is
redundant, so I removed all of these calls.
</p>

<p>
Added "Powered by ..." statement to all the JSPs.  This also gave me
an occasion to do minor touch ups in the HTML.
</p>

<p>
I realized that I ran <code>OOMetrics</code> on non-debug code
yesterday when I gathered metrics for the 1.0 release.  This means that
SLOC metrics are way off.  I'll have to figure a way to recompile that
version and rerun <code>OOMetrics</code>.
</p>
</dd>
<dt><a name="2003-06-05">June 05, 2003</a></dt>
<dd>
<p>
1.0!
</p>
</dd>
<dt><a name="2003-06-04">June 04, 2003</a></dt>
<dd>
<p>
Renamed some of the XSL stylesheets.  The names confused me and I
always get confused about which one does what.
</p>

<blockquote>
<table>
    <tr>
        <td><code>DependenciesTo</code><i>X</i></td>
        <td><code>--&gt;</code></td>
        <td><code>DependencyGraphTo</code><i>X</i></td>
    </tr>
    <tr>
        <td><code>DependablesTo</code><i>X</i></td>
        <td><code>--&gt;</code></td>
        <td><code>DependablesTo</code><i>X</i></td>
    </tr>
    <tr>
        <td><code>DependentsTo</code><i>X</i></td>
        <td><code>--&gt;</code></td>
        <td><code>DependentsTo</code><i>X</i></td>
    </tr>
    <tr>
        <td><code>ListDependablesTo</code><i>X</i></td>
        <td><code>--&gt;</code></td>
        <td><code>HideOutboundDependenciesTo</code><i>X</i></td>
    </tr>
    <tr>
        <td><code>ListDependentsTo</code><i>X</i></td>
        <td><code>--&gt;</code></td>
        <td><code>HideInboundDependenciesTo</code><i>X</i></td>
    </tr>
</table>
</blockquote>

<p>
I have been thinking about an installer that would generate all the
<code>.bat</code> files and adjust them for Windows 98 vs. Windows NT
and JDK 1.3 vs. JDK 1.4.  I cannot use Perl because the machine where
you want to install it might not have Perl installed.  I cannot write
the installer as a DOS script either because string substitution would
just be too hard, or the Windows 98 version is quite limiting.  But I
could make it as a simple Java program.  And this way, it could figure
out the JVM version by itself, and even the OS from system properties.
Unless I have an epiphany, I won't delay the 1.0 release for this;
it'll go in the next release.
</p>
</dd>
<dt><a name="2003-06-03">June 03, 2003</a></dt>
<dd>
<p>
More fixes for the quotes in the <code>.bat</code> file.  This time,
I am quite confident that they work fine.
</p>

<p>
Ad hoc testing of the printer modification show that the memory
footprint went down by roughly 80% and the processing time remained
pretty much the same.  This is nice.
</p>

<p>
I added a new tool to the web app to provide dependency metrics the
same way that the CLI and the GUI do.  I also added navigation controls
to move between graphs, closures, and metrics.  In the process, I moved
<code>com.jeantessier.dependency.MetricsReport</code> to a
<code>java.io.PrintWriter</code> instead of a
<code>java.lang.StringBuffer</code>, like I did for other printers
yesterday.
</p>

<p>
Added the <code>web/</code> directory to the source archive
<code>DependencyFinder.src.zip</code>.
</p>

<p>
Fixed <code>com.jeantessier.dependency.MetricsReport</code> that did
not interpret inbound and outbound dependencies correctly.
</p>
</dd>
<dt><a name="2003-06-02">June 02, 2003</a></dt>
<dd>
<p>
I got a fix for spaces in <code>DEPENDENCYFINDER_HOME</code>.  I have not tested it fully
yet, so I need a little more time before I give it my seal of approval.
</p>

<p>
Someone mentioned they are running out of memory when extracting dependencies
from large JAR files.  This is because the various printers use internal
<code>StringBuffer</code> instances that grow as the graph gets rendered.  I need to take
one more look at using character streams instead, like I mentioned on
<a href="#2003-03-12">2003-03-12</a>.
</p>

<p>
I went ahead and modified <code>com.jeantessier.classreader.Printer</code>,
<code>com.jeantessier.dependency.Printer</code>, and <code>com.jeantessier.metrics.Printer</code> to
take a <code>java.io.PrintWriter</code> instead of their <code>java.lang.StringBuffer</code>.  The
modifications were quite extensive, and <code>com.jeantessier.diff.Printer</code> is still
untouched.  It will need more rewriting than I am willing to deal with at this
time.
</p>
</dd>
<dt><a name="2003-05-31">May 31, 2003</a></dt>
<dd>
<p>
Someone found a problem with the <code>.bat</code> files.  If
<code>DEPENDENCYFINDER_HOME</code> contains any spaces, they don't
work.  I need to put quotes around variable uses in each and every
file.
</p>
</dd>
<dt><a name="2003-05-29">May 29, 2003</a></dt>
<dd>
<p>
I have been thinking about adding another set of JSPs to the web
app to duplicate the functionality in <code>DependencyMetrics</code>.
I am also thinking of putting in a navigation structure to switch
between the query, closure, and now the metrics tools.  I would also
like to pass the parameters around so you can run a query in
<code>query.jsp</code> and click on "metrics" to get the dependency
metrics relating to the subgraph issued from the query: number and type
of nodes, number of dependencies, etc.  I might put it in the 1.0
release if it does not take too long to do.  Now, all I need to do is
figure out how to render a nice navigation structure.
</p>

<p>
I have also been toying with the idea of a second web app to provide
the functionality of <code>OOMetrics</code>.  I'm still not clear if a
separate web app is really required.  The main difference between the
two is that the current <code>extract.jsp</code> does not hold on to
parsed <code>.class</code> files.  It discards them as soon as it has
extracted their dependencies.  The metrics tools read everything in
first and then go about their business.  So the memory footprint is
larger, which might become problematic.
</p>
</dd>
<dt><a name="2003-05-27">May 27, 2003</a></dt>
<dd>
<p>
Added some documentation for the
<code>com.jeantessier.commandline</code> package.  I had kept the
<code>main()</code> method on <code>CommandLine</code> as a sample,
but it started to bug me.  So I replaced it with actual written
documentation, both in Javadoc and in the developer guide.
</p>
</dd>
<dt><a name="2003-05-26">May 26, 2003</a></dt>
<dd>
<p>
Memorial Day has come and gone and I was too busy with other things
to spend much time with Dependency Finder, let alone do the 1.0
release as I had hoped.  In the meantime, the number of daily
downloads is still at zero; I must get this release out quickly so the
downloads start up again.
</p>
</dd>
<dt><a name="2003-05-24">May 24, 2003</a></dt>
<dd>
<p>
Made some minor renaming in the
<code>com.jeantessier.commandline</code> package.
</p>

<p>
It is interesting that since I announced I might do the 1.0 release
imminently, there has been no downloads of Dependency Finder.  I would
like to think that the world is standing still, waiting for this 1.0
release.  :-)
</p>
</dd>
<dt><a name="2003-05-20">May 20, 2003</a></dt>
<dd>
<p>
Worked on the design for the new closure calculator.  It will be a
little more structured and keep track of each layer as the closure is
expanded.  This way, I should be able to print actual paths instead of
just dumping the graph and let users figure it out.  I will also be
able to use this calculator in finding the shortest path between two
groups of elements (packages, classes, and/or features).
</p>

<p>
I haven't heard anything about the ongoing beta trial, except for
the nasty problem with the ZIP file.  I'm thinking of closing the beta
and release 1.0 over the upcoming Memorial Day weekend (this weekend).
I'll see.
</p>
</dd>
<dt><a name="2003-05-16">May 16, 2003</a></dt>
<dd>
<p>
I have been looking at the
<a target="_blank" href="clover/">output</a> from
<a target="_blank" href="http://www.thecortex.net/clover">Clover</a>.
It includes a few metrics, such as:
</p>

<ul>
<li>Number of classes</li>
<li>Number of methods</li>
<li>Lines of code (LOC)</li>
<li>Non-comment lines of code (NCLOC)</li>
</ul>

<p>
It is interesting to compare them to the metrics from
<code>OOMetrics</code>.  First, the number of classes are the same.
But this is where the similarities end.
</p>

<p>
Second, Clover counts the number of methods explicitly defined in
the source code.  Dependency Finder counts all methods in the compiled
<code>.class</code> file, which includes default constructors added
by the compiler and <i>synthetic</i> methods.  So the Dependency
Finder count ends up being slightly higher than Clover's count.
</p>

<p>
Third, Clover's LOC counts all lines in a file, indiscriminate of
whether the line is code, a comment, or even empty.  Its NCLOC count
limits itself to lines that actually contain code, but it includes
lines with non-executable code, such as a single closing curly brace
(i.e., '<code>}</code>').  Dependency Finder's SLOC uses information
from the compiler, when it is run with the <code>-g</code> switch, to
count the number of lines with really executable code.  It then adds a
few more lines to account for class, field, and method declarations.
It overshoots a little because it even counts implicit constructors and
<code>synthetic</code> elements, but it stays in the ballpark.
</p>

<table>
    <tr>
        <th width="200">Metrics</th>
        <th width="150"
            colspan="2">Clover</th>
        <th width="150"
            colspan="2">OOMetrics</th>
        <th width="100"
            colspan="2">delta</th>
    </tr>
    <tr>
        <td>Number of packages</td>
        <td align="right">12</td>
        <td></td>
        <td align="right">12</td>
        <td></td>
        <td align="right"></td>
        <td align="right"></td>
    </tr>
    <tr>
        <td>Number of classes</td>
        <td align="right">275</td>
        <td></td>
        <td align="right">275</td>
        <td></td>
        <td align="right"></td>
        <td align="right"></td>
    </tr>
    <tr>
        <td>Number of methods</td>
        <td align="right">2,642</td>
        <td></td>
        <td align="right">3,609</td>
        <td></td>
        <td align="right">+967</td>
        <td align="right">+37%</td>
    </tr>
    <tr>
        <td>Lines of code</td>
        <td align="right">26,544</td>
        <td><font size="-1">(NCLOC)</font></td>
        <td align="right">24,694</td>
        <td><font size="-1">(SLOC)</font></td>
        <td align="right">-1,850</td>
        <td align="right">-7%</td>
    </tr>
    <tr>
        <td></td>
        <td align="right">42,939</td>
        <td><font size="-1">(LOC)</font></td>
        <td align="right"></td>
        <td></td>
        <td align="right"></td>
        <td align="right"></td>
    </tr>
</table>

<p>
Overall, it is just curious that Dependency Finder comes up with
more methods, but less overall lines of code.
</p>
</dd>
<dt><a name="2003-05-15">May 15, 2003</a></dt>
<dd>
<p>
Finally got around to running
<a target="_blank" href="http://www.thecortex.net/clover">Clover</a>
on Dependency Finder.  Overall coverage is at 52.2%.  About 16 tests
in the <code>com.jeantessier.metrics</code> package failed because the
code instrumentation from Clover messed with the expected metrics.  I
have put the preliminary results
<a target="_blank" href="clover/">here</a>.  I can move the tests for
<code>com.jeantessier.commandline</code> package from the
<code>main()</code> methods to proper JUnit tests.  That should raise
coverage somewhat.  I'll look further into Clover for what else I can
get from it.
</p>

<p>
I came across someone who was actually trying to extend Dependency
Finder.  This person had downloaded the source code, modified the
classes directly, and recompiled Dependency Finder with the
modifications.  While this might have seemed like a good idea, it
will create problems later on when I release an upgrade to Dependency
Finder and this person will have to merge their custom changes with the
new version of the files.  It would be much better if they had put
their custom code in separate classes, in their own custom packages,
and compiled them against <code>DependencyFinder.jar</code>.  When a
new version of Dependency Finder comes along, they can just drop it
in.
</p>
</dd>
<dt><a name="2003-05-06">May 06, 2003</a></dt>
<dd>
<p>
Updated the samples to add 1.0 beta data.
</p>

<p>
I had been having problems with the ZIP files that come out of the
builds.  For some reason, I could not see their contents using WinZIP
and could not extract them.  Other tools, such as <code>unzip</code>,
<code>jar</code>, and even Emacs did not have any trouble.  For some
time, I thought this was a problem between Java-generated ZIP files
and WinZIP 8.1.  It turns out that Ant was the culprit.  They even had
an open bug report about it.  It got fixed in the latest release, but
it is too late for the 1.0 beta release.  I hope people can make do
with <code>jar</code> for the duration of the beta.  Future releases
will work with WinZIP as expected.
</p>

<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>Ant</td>
        <td>:</td>
        <td>1.5.2</td>
        <td>-></td>
        <td>1.5.3-1</td>
    </tr>
</table>
</blockquote>
</dd>
<dt><a name="2003-05-04">May 04, 2003</a></dt>
<dd>
<p>
Forgot to clean some of the diagrams on the website.  All is better
now.
</p>
</dd>
<dt><a name="2003-05-02">May 02, 2003</a></dt>
<dd>
<p>
The good people at SourceForge have removed the stale locks and the
1.0 beta is finally here!  Go get it!
</p>
</dd>
<dt><a name="2003-05-01">May 01, 2003</a></dt>
<dd>
<p>
I was all set and ready to go with the 1.0 beta release and
"billfan" strikes again.  He keeps locking the CVS repository and
keeping me from doing anything in there.  This is very frustrating.
I tried to contact him, but my emails bounced.  Each time this happens,
I have to open a ticket with SourceForge admins and wait until the
next day for them to get to it and blast his locks.
</p>

<p>
"billfan", if you're listening, <b>GET OUT OF MY REPOSITORY!!!</b>
</p>

<p>
Thanks to "billfan", you all have to wait until tomorrow for the
beta.
</p>
</dd>
<dt><a name="2003-04-30">April 30, 2003</a></dt>
<dd>
<p>
Finished the documentation.  I added a section for contributors.
For now, I feel very paternal about Dependency Finder and I am not
quite ready to give up control.  I guess I'm more on the <i>cathedral</i>
than the <i>bazaar</i> side of things.  For those who don't get it, it
just means I can be quite stuck up.  :-)
</p>

<p>
I will be releasing the 1.0 beta shortly.  Stay tuned.
</p>
</dd>
<dt><a name="2003-04-29">April 29, 2003</a></dt>
<dd>
<p>
Started playing with a code coverage tool.  They gave me a free
license because Dependency Finder is open source.  So far, it looks
interesting; it consists of Ant tasks to instrument code and gather
measurements.  Check it out on the 
<a target="_blank" href="http://www.thecortex.net/clover">Clover website</a>.
I'll publish the coverage report for Dependency Finder when I have
one.
</p>

<p>
It turns out the problem with Ant's &lt;xslt&gt; is well known.  It
is a bug with the version of Xalan that ships with JDK 1.4.1.  To fix
it, you have to upgrade the JDK's Xalan; the best way of doing this is
with the <code>java.endorsed.dir</code> property.  I'll document it
in more details either in a bug or on the help discussion board.
</p>

<p>
Dependency Finder is starting to show up on Java indexing sites.
Just do a search for "<i>depfind</i>" and find out for yourself.
</p>
</dd>
<dt><a name="2003-04-27">April 27, 2003</a></dt>
<dd>
<p>
I have been trying to add Dependency Finder tasks to the build
file, but Ant's &lt;xslt&gt; tasks has problems with some of the XSL
transformations.  At least <code>DependenciesToHTML</code> generates
and error about "not enough DTMs", whatever that means.  I can still
run the transform with the CLI script, so I will have to investigate
some more.
</p>

<p>
I just need to add a legend to the diagrams for
<code>JarJarDiff</code> and write up the project's policy regarding
code contributions.  Then I can release the beta.
</p>
</dd>
<dt><a name="2003-04-25">April 25, 2003</a></dt>
<dd>
<p>
Redrew the diagrams for <code>JarJarDiff</code>.
</p>
</dd>
<dt><a name="2003-04-23">April 23, 2003</a></dt>
<dd>
<p>
Finished the equivalence table.  In the end, I decided to put it in
the manual.
</p>
</dd>
<dt><a name="2003-04-22">April 22, 2003</a></dt>
<dd>
<p>
Added TOC elements to <code>PublishedDiffToHTML.xsl</code>, so it
looks more like <code>DiffToHTML.xsl</code>.
</p>
</dd>
<dt><a name="2003-04-21">April 21, 2003</a></dt>
<dd>
<p>
Took a break for a few days, but now I'm back and bent on getting
the beta out.  I need to build some kind of equivalence table for
features between the CLI, GUI, Ant tasks, and web app.  I don't know
quite where to put it.  One place might be as part of each tool
description in the tools docs, but that spreads it a little too much.
I might just go with a table in the manual instead.
</p>

<p>
After this, I should be done.  The Beta is near!
</p>
</dd>
<dt><a name="2003-04-11">April 11, 2003</a></dt>
<dd>
<p>
Completed Ant task documentation.
</p>
</dd>
<dt><a name="2003-04-09">April 09, 2003</a></dt>
<dd>
<p>
Added status messages in the processing of Ant tasks.
</p>
</dd>
<dt><a name="2003-04-07">April 07, 2003</a></dt>
<dd>
<p>
Ant task documentation.
</p>

<p>
When I changed <code>PrettyPrinter</code> to
<code>TextPrinter</code>, I forgot to update the JSPs.  This is now
fixed.
</p>
</dd>
<dt><a name="2003-04-05">April 05, 2003</a></dt>
<dd>
<p>
Ant task documentation.
</p>
</dd>
<dt><a name="2003-04-02">April 02, 2003</a></dt>
<dd>
<p>
Ant task documentation.
</p>
</dd>
<dt><a name="2003-03-31">March 31, 2003</a></dt>
<dd>
<p>
Wrote the Ant task for <code>ListDiff</code>.  Just a little more documentation for the Ant
tasks and the beta will be ready.
</p>

<p>
Fixed a typo in the license's text.  I went to check it all in, but the same
person who locked the CVS repository on <a href="#2003-02-10">2003-02-10</a> has locked it again.  I
logged a bug report with SourceForge.net, but it might be up to 24 hours before
they break the stale locks.
</p>
</dd>
<dt><a name="2003-03-29">March 29, 2003</a></dt>
<dd>
<p>
I decided not to make an Ant task for <code>ClassReader</code>, but
I will need one for <code>ListDiff</code> to complete the workflow
outlined in the manual.  Now I'm going to pay for not separating behavior
properly.  <code>ListDiff</code> has all the behavior and a utility
class that is in the <code>com.jeantessier.dependencyfinder.cli</code>
package.  How am I going to reuse this from the
<code>com.jeantessier.dependencyfinder.ant</code> package?
</p>
</dd>
<dt><a name="2003-03-27">March 27, 2003</a></dt>
<dd>
<p>
Wrote the Ant task for <code>OOMetrics</code>.
</p>
</dd>
<dt><a name="2003-03-26">March 26, 2003</a></dt>
<dd>
<p>
Wrote the Ant task for <code>DependencyMetrics</code>.
</p>
</dd>
<dt><a name="2003-03-25">March 25, 2003</a></dt>
<dd>
<p>
Wrote the Ant task for <code>DependencyClosure</code>.
</p>

<p>
Cleaned up some of the documentation.
</p>
</dd>
<dt><a name="2003-03-24">March 24, 2003</a></dt>
<dd>
<p>
Finished the Ant task for <code>DependencyExtractor</code> and
also wrote those for <code>ClassMetrics</code>,
<code>DependencyReporter</code>, and <code>JarJarDiff</code>.
I decided to stick with the Ant naming convention and use
<code>destfile</code> for the output attribute.
</p>

<p>
Introduced a new tool, <code>ClassClassDiff</code>, which compares
two classes, even if they don't have the same name.  I found a need
for it when a renamed one class to work on temporarily and wanted
to see later on what differences I had introduced.  The class was
too large for me to do this with regular diffs.
</p>
</dd>
<dt><a name="2003-03-23">March 23, 2003</a></dt>
<dd>
<p>
Wrote Ant task for <code>DependencyExtractor</code>.  It turns out
that using a path-like structure is actually easier than extending
<code>MatchingTask</code>.  I hesitate about the name of the
attribute for the output file.  The other tools use <code>out</code>
but Ant recommends <code>destfile</code> instead.  So do I make it
consistent with other Dependency Finder tools or with other Ant
tasks?
</p>
</dd>
<dt><a name="2003-03-21">March 21, 2003</a></dt>
<dd>
<p>
Getting familiar with writing Ant tasks.
</p>
</dd>
<dt><a name="2003-03-20">March 20, 2003</a></dt>
<dd>
<p>
Tech docs for the developer guide.  Added an additional reference
to the <code>OOMetricsGUI</code> screenshot for after the extract.
</p>
</dd>
<dt><a name="2003-03-19">March 19, 2003</a></dt>
<dd>
<p>
Had a bout with the flu.
</p>

<p>
Jeff Harman asked questions about dependency visitors and such,
which prompted me to document that control flow a little more.  I'll
add the new information to the fledgling developer guide when I get
a change and when I can find a decent (free) editor for UML diagrams.
</p>

<p>
Had some ideas about correlating project size and complexity
and estimating each via the current metrics.  I might be able to
do something about complexity with a combination of intra-class,
intra-package, and extra-package dependencies at both the class
and method levels.
</p>
</dd>
<dt><a name="2003-03-12">March 12, 2003</a></dt>
<dd>
<p>
Gave some more thought to having <code>Printer</code> work off a
<code>java.io.Writer</code> instead of a <code>StringBuffer</code>.
This would lessen the burden on memory by streaming large graphs
straight to file or output stream, but the character conversion might
add processing overhead.  The design below separates formatting of the
text by <code>DecoratorPrinter</code> from how that text is actually
saved by <code>FilePrinter</code> and <code>StringPrinter</code>.  The
latter behaves like the current <code>Printer</code> so I can compare
both approaches.  But beyond that, it makes little sense since I could
just as easily pass a <code>java.io.StringWriter</code> to the
decorator.
</p>

<p>
<img src="../images/DecoratorPrinter.jpg" /><br />
</p>

<p>
This first scenario shows saving to a file.  Saving to an output
stream would look just the same.
</p>

<p>
<img src="../images/DecoratorPrinterFileScenario.jpg" /><br />
</p>

<p>
This second scenario saves the graph to an in-memory string, though
I could just as easily do the same with a
<code>java.io.StringWriter</code>.
</p>

<p>
<img src="../images/DecoratorPrinterStringScenario.jpg" /><br />
</p>

<p>
This design looks like overkill, since <code>FilePrinter</code> and
<code>StringPrinter</code> end up with empty implementations for their
<code>VisitX()</code> methods.  In fact, they don't even need to be
related to <code>Visitor</code> at all since they are not accessed
directly by the client code.  If I am going to define a new interface
for them, I might as well simply use <code>java.io.Writer</code>.
</p>

<p>
I will probably just replace the <code>StringBuffer</code> in
<code>Printer</code> with a <code>java.io.Writer</code> and be done
with it.
</p>

<blockquote>
<em>I'm not too happy with the way the sequence diagrams came out
too, but that's the fault of the tool I've been using.  And even the
class diagram has undesireable artifacts.  I have no budget for this
project, so I could not use the one I would have really wanted.  And
the one I ended up using was quicker to use than a plain drawing
editor.</em>
</blockquote>

<p>
I also kept looking at the new Xerces and Xalan.  All the unit tests
are passing, but <code>PublishedDiffToHTML</code> prints nothing when
I pass it a validation list.  I must figure out if this is due to the
new Xalan or the test data.  I tried a couple of code samples, but they
are still too large for me to track exactly what is going on.
</p>

<p>
I upgraded the libraries anyway, I will figure out the kinks
later:
</p>

<blockquote>
<table>
    <tr>
        <td>Xerces</td>
        <td>:</td>
        <td>2.2.1</td>
        <td>-></td>
        <td>2.3.0</td>
    </tr>
    <tr>
        <td>Xalan</td>
        <td>:</td>
        <td>2.4.1</td>
        <td>-></td>
        <td>2.5 D1</td>
    </tr>
</table>
</blockquote>
</dd>
<dt><a name="2003-03-11">March 11, 2003</a></dt>
<dd>
<p>
Created some UML diagrams for <code>com.jeantessier.dependency</code>
and <code>com.jeantessier.metrics</code> packages.  As I'm trying
to describe the internals of dependency graphs to Jeff Harman, I
figured they would come in handy.
</p>
</dd>
<dt><a name="2003-03-10">March 10, 2003</a></dt>
<dd>
<p>
Still investigating Xerces/Xalan upgrades.  Having troubles with
<code>PublishedDiffToHTML</code>; for some reason, it prints out
nothing.
</p>

<p>
Was approached by Jeff Harman about writing dependency graphs
to database.  This could be the first contribution to the project
that did not originate from me!  I'll let you know how it turns
out.
</p>
</dd>
<dt><a name="2003-03-09">March 09, 2003</a></dt>
<dd>
<p>
Still investigating Xerces/Xalan upgrades.
</p>
</dd>
<dt><a name="2003-03-08">March 08, 2003</a></dt>
<dd>
<p>
Looking at upgrade for:
</p>

<blockquote>
<table>
    <tr>
        <td>Xerces</td>
        <td>:</td>
        <td>2.2.1</td>
        <td>-></td>
        <td>2.3.0</td>
    </tr>
    <tr>
        <td>Xalan</td>
        <td>:</td>
        <td>2.4.1</td>
        <td>-></td>
        <td>2.5 D1</td>
    </tr>
</table>
</blockquote>

<p>
I need to investigate how this will impact usage with JDK
1.4.
</p>
</dd>
<dt><a name="2003-03-06">March 06, 2003</a></dt>
<dd>
<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>Log4J</td>
        <td>:</td>
        <td>1.2.7</td>
        <td>-></td>
        <td>1.2.8</td>
    </tr>
    <tr>
        <td>Jakarta ORO</td>
        <td>:</td>
        <td>2.0.7-dev-1</td>
        <td>-></td>
        <td>2.0.7</td>
    </tr>
</table>
</blockquote>
</dd>
<dt><a name="2003-03-05">March 05, 2003</a></dt>
<dd>
<p>
Fixed <code>TableHeaderListener</code> so the tooltips in table
header display correctly.  It wouldn't change the tooltip when you
moved the cursor between columns within the header.  I had to put
the tooltip login in <code>mouseMoved()</code> instead.  My current
use of this treats the whole header as one large component.
</p>

<p>
Then further tweaked the text of the tooltips, adding the range
information even to column headers and enhancing the tooltips'
descriptive quality.
</p>

<p>
Refactored the text rendering of <code>StatisticalMeasurement</code>
and centralized it.  This may change some more since I am not too
fond of mixing application logic and presentation logic, but I don't
have a better place at this time.
</p>

<p>
Fixed the named scope of two measurements in the default metrics
configuration.  There were mistakenly labeled <i>per group</i> when they
are in fact <i>per class</i>.
</p>
</dd>
<dt><a name="2003-03-04">March 04, 2003</a></dt>
<dd>
<p>
Added tooltips to <code>OOMetricsGUI</code>.  Column headers show
the measurement's full name, cells show the element's name,
measurement's full name, abbreviation, and value.
</p>

<p>
Removed the documentation of metrics and measurements.  With the
new tooltips, it is not all that necessary anymore.
</p>

<p>
I thought of putting a target in <code>build.xml</code> to
update the codebase from CVS, but I had trouble getting it to work
on Win98 and to authenticate properly, so I just dropped it.
</p>

<p>
Only the Ant tasks left.  I've had some ideas about extracting
the cut & pasted code in the tools and put it in central tool classes.
The Ant tasks would just be another way to invoke those tool classes.
So far, they would be in a new
<code>com.jeantessier.dependencyfinder</code> package.
</p>
</dd>
<dt><a name="2003-03-03">March 03, 2003</a></dt>
<dd>
<p>
Finished tools docs.
</p>

<p>
Removed useless <code>-dispose</code> switch to
<code>OOMetrics</code>.
</p>
</dd>
<dt><a name="2003-02-27">February 27, 2003</a></dt>
<dd>
<p>
Tools docs.
</p>
</dd>
<dt><a name="2003-02-21">February 21, 2003</a></dt>
<dd>
<p>
Removed <code>-plain</code> and <code>-raw</code> switches
from <code>ClassReader</code>, <code>DependencyExtractor</code>,
and <code>DependencyReporter</code>.  Their output was not adding
any new information and looked ugly.
</p>

<p>
Fixed <code>MetricsTableModel</code>.
<code>DependencyFinder</code> uses it to render dependency
distributions in a <code>JTable</code>.  A small glitch was making
it miss the last row of data.  I also renamed
<code>com.jeantessier.dependency.MetricsGatherer.ChartSize()</code>
to
<code>com.jeantessier.dependency.MetricsGatherer.ChartMaximum()</code>.
</p>

<p>
Normalized naming of human-readable text printers from
<code>PrettyPrinter</code> to <code>TextPrinter</code>.  In
<code>com.jeantessier.dependency</code>, I had to merge the two
classes.  I also got rid of
<code>com.jeantessier.dependency.UglyPrinter</code>.  As a
result, I could get rid of <code>-plain</code> and <code>-raw</code>
command-line switches and simplify the output of
<code>ClassReader</code>, <code>DependencyExtractor</code>, and
<code>DependencyReporter</code>.
</p>

<p>
Tools docs.
</p>
</dd>
<dt><a name="2003-02-20">February 20, 2003</a></dt>
<dd>
<p>
Tools docs.
</p>

<p>
Figured out how to get Ant's <code>&lt;cvsTagDiff&gt;</code>
task work from "now" instead of "last midnight".  It turns out
that adding the time to the date screws up how Ant generates
the resulting CVS command.  There is an open bug report with
Apache, so maybe they'll fix it in the future.  While we are
waiting, I had to add the quotes in the tag's attribute myself.
</p>

<p>
I'm thinking of getting rid of the <code>-plain</code> switch
to some of the CLI tools.  It is useless.  I should be able to
get rid of <code>com.jeantessier.dependency.TextPrinter</code>
by the same token.  We'll see about this last one.
</p>
</dd>
<dt><a name="2003-02-19">February 19, 2003</a></dt>
<dd>
<p>
Tools docs.
</p>

<p>
Added an HTML index page to the documentation directory.
</p>

<p>
Got rid of the <code>-trace</code> command-line switch.  If
you want that level of details, edit <code>log4j.properties</code>.
</p>

<p>
Reworked the <code>-verbose</code> command-line switch.  It
prints progress as files are read and data is created, kind of like
the status bar in the Swing applications.  The tools use the new
<code>VerboseListener</code> to trap events and print them to the
specified output stream or file.  This has helped simplify the
code around <code>main()</code> in the tool classes.
</p>

<p>
Considered optimizing event sources so they don't do anything
if there are no registered listeners.  With the new mechanism
for <code>-verbose</code>, there is always at least one listener,
this optimization is therefore useless, so I dropped it.  For it
to make sense, I would have had to complexify the life cycle of
<code>VerboseListener</code> too much.
</p>

<p>
Added <a target="_blank" href="http://www.intellij.com">IntelliJ IDEA</a>
and <a target="_blank" href="http://www.xref-tech.com">Xrefactory</a>
to the resources page.
</p>
</dd>
<dt><a name="2003-02-18">February 18, 2003</a></dt>
<dd>
<p>
Tools docs.
</p>

<p>
Rewrote the intro page for the website.  I thought it needed
some words of encouragement to prospective users as to why they
should use Dependency Finder instead of the other available
solutions.
</p>
</dd>
<dt><a name="2003-02-17">February 17, 2003</a></dt>
<dd>
<p>
Tools docs.
</p>
</dd>
<dt><a name="2003-02-14">February 14, 2003</a></dt>
<dd>
<p>
My JavaOne proposals were not picked up.  :-(
</p>

<p>
After I launch the beta, I'll work on some articles.
</p>
</dd>
<dt><a name="2003-02-13">February 13, 2003</a></dt>
<dd>
<p>
Tools docs.
</p>
</dd>
<dt><a name="2003-02-12">February 12, 2003</a></dt>
<dd>
<p>
Tools docs.
</p>
</dd>
<dt><a name="2003-02-11">February 11, 2003</a></dt>
<dd>
<p>
SourceForge broke the locks on the CVS repository and I was
able to check in the minor improvements to the JSPs.
</p>
</dd>
<dt><a name="2003-02-10">February 10, 2003</a></dt>
<dd>
<p>
Used <code>onMouseOver</code> and <code>onMouseOut</code>
JavaScript event handlers in the JSPs instead of <code>onFocus</code>
and <code>onBlur</code> respectively.  This way, the hints appear
in the status area as the mouse goes over each field and the
user does not have to click into them, or use <code>TAB</code>
to move between them and see the hints.
</p>

<p>
Fixed the tables in the JSP so they show up correctly in
either Mozilla or IE.  Lucky I recently learned about
<code>&lt;tbody&gt;</code> and <code>&lt;colgroup&gt;</code>
tags.
</p>

<p>
Someone locked the CVS repository for the project.  I tried
to contact them through SourceForge, but the email bounced.  I
opened a trouble ticket with SourceForge in the hope they can blast
the lock themselves.
</p>

<p>
Added tasks in <code>build.xml</code> to convert the text files
that make up the documentation to HTML.  I also added by conversion
perl script, <code>bin/txt2html.pl</code>.  It is finally under
source control.  I had to adjust the <code>dist</code> target so it
does not include it in the distribution.
</p>

<p>
I realized that someone made a feature request on the SourceForge
project page.  This is the first time in over a year that Dependency
Finder has been open to the public.  The request is for Ant task
equivalents to the CLI tools.  This should be easy enough.  All the
XSL transforms can already be done with Ant's <code>&lt;xslt&gt;</code>
core task.  For the other tools, you could use Ant's
<code>&lt;java&gt;</code> task and pass in the equivalent parameters.
But I think I will go one step further and actually create a new
package with classes that extend
<code>org.apache.tools.ant.Task</code>.  I will add sample usage in
the Manual.  Thanks to Andy Laun for a great proposal.
</p>
</dd>
<dt><a name="2003-02-06">February 06, 2003</a></dt>
<dd>
<p>
Tweaked the website.
</p>

<p>
The tables for the controls in the JSP do not come out correctly
in Mozilla.  The frames are missing.  I will have to rewrite them
so that they show up correctly in either Mozilla or IE.
</p>
</dd>
<dt><a name="2003-02-05">February 05, 2003</a></dt>
<dd>
<p>
Finished the User Manual.
</p>
</dd>
<dt><a name="2003-02-04">February 04, 2003</a></dt>
<dd>
<p>
Updated the example for <code>LinkMinimizer</code> and
<code>LinkMaximizer</code> and merged it with the User Manual.
</p>

<p>
I also had a idea to use a <code>Writer</code> in the various
<code>Printer</code> classes.  This would ease the resource needs
of various command-line operations since the tools would not need
to hold all the output in memory.  Anyway, I'm just thinking about
it at this time.
</p>
</dd>
<dt><a name="2003-02-03">February 03, 2003</a></dt>
<dd>
<p>
Added an icon to <code>DependencyFinder</code> and <code>OOMetricsGUI</code>.
</p>
</dd>
<dt><a name="2003-02-02">February 02, 2003</a></dt>
<dd>
<p>
Quick comparison of minimized vs. raw vs. maximized graphs.
</p>
</dd>
<dt><a name="2003-02-01">February 01, 2003</a></dt>
<dd>
<p>
Tech docs.
</p>
</dd>
<dt><a name="2003-01-30">January 30, 2003</a></dt>
<dd>
<p>
Fixed table colors for <code>OOMetricsGUI</code>.
</p>
</dd>
<dt><a name="2003-01-29">January 29, 2003</a></dt>
<dd>
<p>
"Refactorings" Happy Hour.
</p>
</dd>
<dt><a name="2003-01-28">January 28, 2003</a></dt>
<dd>
<p>
Rewrote part of A vs. I study.
</p>

<p>
Reorganized the menu for the website.
</p>
</dd>
<dt><a name="2003-01-27">January 27, 2003</a></dt>
<dd>
<p>
Added an <a target="_blank" href="AvsI.html">analysis</a> study of Robert
Martin's metrics, as described in Robert C. Martin's
<a target="_blank" href="http://www.objectmentor.com/resources/articles/Principles_and_Patterns.PDF">Design Principles and Design Patterns</a> article.
</p>

<p>
Also added <a target="_blank" href="CVSDiff/">output</a> from
<code>&lt;cvsTagDiff&gt;</code> tasks in Ant that list files
that changed between release.
</p>
</dd>
<dt><a name="2003-01-23">January 23, 2003</a></dt>
<dd>
<p>
Played with SourceForge resources.  Someone mentioned that I
might be able to use SourceForge shell server to test Unix launch
scripts.  The shell server does not have compilers and connecting
through SSH is tedious, so I will not do this on an extended basis.
But I did setup the website as a checkout from CVS.  Now I need to
figure out how to setup the cron job so it updates itself
automatically.
</p>

<p>
I think I've got it...
</p>

<p>
Yup.
</p>
</dd>
<dt><a name="2003-01-22">January 22, 2003</a></dt>
<dd>
<p>
Tech docs.
</p>
</dd>
<dt><a name="2003-01-21">January 21, 2003</a></dt>
<dd>
<p>
Tech docs.
</p>
</dd>
<dt><a name="2003-01-20">January 20, 2003</a></dt>
<dd>
<p>
Changed initial status message in
<code>MetricsExtractAction</code> and
<code>DependencyExtractAction</code> to account for long
waiting time while <code>DirectoryExplorer</code> scans for
<code>.class</code> files.
</p>

<p>
I was having problems with <code>SumMeasurement</code>
today.  I added trace statements to track down what was going
on and it started going haywire.  Took me a while, but I
realized its <code>Compute()</code> method was not thread-safe.
I synchronized its processing and it is now fine.  I looked at
the other measurements and <code>NbSubMetricsMeasurement</code>
was in the same situation.  I fixed it too.
</p>

<p>
I noticed that cut &amp; paste of values in
<code>OOMetricsGUI</code> were coming through as calls to
<code>toString()</code>, yielding the default stringification
from <code>java.lang.Object</code>.  I added an implementation
of <code>toString()</code> to <code>MeasurementBase</code> so
that measurements print their numerical value by default.  It
works well, except for <code>StatisticalMeasurement</code>
which ends up displaying itself five times.
</p>

<p>
Added standard deviation subvalue to
<code>StatisticalMeasurement</code>.
</p>

<p>
Added an <code>InRange()</code> method to <code>Metrics</code>
that returns <code>false</code> if any of the measurements is not
in range.
</p>
</dd>
<dt><a name="2003-01-19">January 19, 2003</a></dt>
<dd>
<p>
Found a way to separate between visited and non-visited
methods, classes, and groups by keeping separate lists in
<code>MetricsFactory</code>.
</p>
</dd>
<dt><a name="2003-01-18">January 18, 2003</a></dt>
<dd>
<p>
Looked at ways to restrict listed metrics to the classes and
methods actually visited, instead of all referenced elements.  I
tried to distinguish between getting a metrics and creating it
only as part of a <code>VisitX()</code> method, but that didn't
work since metrics would only start accumulating after their
call to <code>VisitX()</code>.  I'll have to try something else.
</p>
</dd>
<dt><a name="2003-01-17">January 17, 2003</a></dt>
<dd>
<p>
Tech docs.
</p>

<p>
Looked into Poseidon for UML, Community Edition, to generate
UML diagrams of Dependency Finder for the documentation.  It
still has a few quirks, but hey, it's free.
</p>
</dd>
<dt><a name="2003-01-16">January 16, 2003</a></dt>
<dd>
<p>
Tech docs.
</p>
</dd>
<dt><a name="2003-01-15">January 15, 2003</a></dt>
<dd>
<p>
Tech docs.  I started a developer's guide.
</p>
</dd>
<dt><a name="2003-01-14">January 14, 2003</a></dt>
<dd>
<p>
Tech docs.
</p>
</dd>
<dt><a name="2003-01-13">January 13, 2003</a></dt>
<dd>
<p>
Found and fixed bug #667642 about <code>MetricsFactory</code> not
recognizing static initializers of the form "<code>static {}</code>".
</p>

<p>
Switched <code>log4j.properties</code> to use CHAINSAW instead
of log files.
</p>

<p>
Found another article on <a target="_blank" href="http://thesmallworlds.com/">Small Worlds</a>.
This time, it was a review in Software Development Magazine.
</p>

<p>
The more I think of it, the more I was to revamp
<code>-verbose</code> and get rid of <code>-trace</code>
switches.  I'll have <code>-verbose</code> behave somewhat like
<code>extract.jsp</code> or the status bar of the GUI tools.
</p>
</dd>
<dt><a name="2003-01-11">January 11, 2003</a></dt>
<dd>
<p>
Upgraded my testing environment from Tomcat 4.1.12 to 4.1.18.
</p>
</dd>
<dt><a name="2003-01-10">January 10, 2003</a></dt>
<dd>
<p>
Tech docs.
</p>
</dd>
<dt><a name="2003-01-01">January 01, 2003</a></dt>
<dd>
<p>
New release!
</p>

<p>
Updated the copyright notice for the new year.
</p>
</dd>
<dt><a name="2002-12-30">December 30, 2002</a></dt>
<dd>
<p>
I now have progress bars on the GUIs!
</p>

<p>
I am going to do one more release before the beta, either
tomorrow (12/31) or the day after (1/1).  Like I said before,
this will let people out there use the new features and bug
fixes without having to wait on the user guide.
</p>
</dd>
<dt><a name="2002-12-28">December 28, 2002</a></dt>
<dd>
<p>
Fixed all the broken unit tests for metrics.
</p>

<p>
Added metrics-processing events so the UI can track
progress in <code>OOMetricsGUI</code>.
</p>

<p>
For a while, Jakarta ORO had two versions of
<code>Perl5Util.split()</code> that differed in how they
split the empty string "".  They seem to have fixed the
discrepancy in their latest version, so I moved my code
to the new version that uses <code>java.util.Collection</code>
instead of <code>java.util.Vector</code>, which is
deprecated.
</p>
</dd>
<dt><a name="2002-12-27">December 27, 2002</a></dt>
<dd>
<p>
Finally got to fixing the broken unit tests, for metrics,
at least.
</p>

<p>
It turns out that JDK 1.4 is doing some funny accounting
for line numbers in try ... catch blocks and this fixes some
inaccuracies in my SLOC estimation.  These changes in the
generated bytecode will help debuggers step through these
clauses with more meaningful feedback.  By removing the
special accounting in <code>MetricsGatherer</code>, the SLOC
count of code compiled with previous versions of the JDK
will be slightly underestimated.  But it is a rough estimate
to begin with, so I guess it is safe.
</p>

<p>
I am going to standardize the tests for JDK 1.4 and the
way that it generates bytecode.  In the future, I might put
special instrumentation in the tests to detect bytecode that
has been compiled with previous versions of the JDK, but it
is not a priority for now.
</p>
</dd>
<dt><a name="2002-12-26">December 26, 2002</a></dt>
<dd>
<p>
Finally got around to checking that the upgrade to Xalan
did fix
<a target="_blank" href="http://nagoya.apache.org/bugzilla/show_bug.cgi?id=13106">bug 13106</a>.
It works, but I must still rewrite the stylesheet to comply
with XSLT rules.
</p>
</dd>
<dt><a name="2002-12-21">December 21, 2002</a></dt>
<dd>
<p>
Refactored
<code>com.jeantessier.dependencyfinder.gui.DependencyFinder</code>.
</p>

<p>
Also refactored some of the metrics handling code to simplify
processing of multiple measurements.
</p>
</dd>
<dt><a name="2002-12-19">December 19, 2002</a></dt>
<dd>
<p>
I have been thinking some more about the progress status and
what information would be displayed in a dialog, such as elapsed
time and a guesstimate of how much more time will be required.
</p>
</dd>
<dt><a name="2002-12-11">December 11, 2002</a></dt>
<dd>
<p>
More refactoring for the <code>ClassfileLoader</code> event
model.  I've added a concept of session, basically a call to
<code>Load(Collection)</code>.  This will allow me to start
measuring how long extraction is taking and maybe even make an
estimate has to how much longer it'll take.  In the meantime,
I have "percent completed" measurement in place.
</p>

<p>
I'm thinking of having one more release before the beta.
This would let people out there use the latest features and
bug fixes without having to wait for the user guide.  One
thing that I would like to release quickly is the new, simpler
user interface.
</p>
</dd>
<dt><a name="2002-12-10">December 10, 2002</a></dt>
<dd>
<p>
Refactored <code>ClassfileLoader</code> and its subclasses.
The decorators are now hidden inside the
<code>ClassfileLoaderEventSource</code> class, so clients of the
package don't have to bother with which decorator to instantiate.
This paves the way to including progress measurements in the
<code>LoadEvent</code> passed in <code>LoadStart()</code> and
<code>LoadElement()</code> events.  This way, I can have either
a "percent complete" or a progress bar as things are loading.
I might even be able to have an elapsed time and a predicted
remaining time.
</p>

<p>
Documented the methods of <code>LoadListener</code>, but I
must revise the description of the various attributes and under
which cases each one has a value.
</p>
</dd>
<dt><a name="2002-12-06">December 06, 2002</a></dt>
<dd>
<p>
Refactored <code>CanAddDependency()</code>.
</p>

<p>
Fixed references in slides for the tutorial.  I need to think
about this before I publish it on the website.  I used the slides
from a previous presentation, but this would mean that I would have
to come up with some new material if my submission to JavaOne is
picked up.  Then again, I would have to come up with some new stuff
anyway!
</p>
</dd>
<dt><a name="2002-12-05">December 05, 2002</a></dt>
<dd>
<p>
Worked on tools documentation.
</p>

<p>
Found a bug with <code>GraphSummarizer</code>.  I describe it
fully on SourceForge; it is bug 
<a target="_blank" href="http://sourceforge.net/tracker/index.php?func=detail&aid=649375&group_id=43305&atid=435884">#649375</a>.
Basically, when adding dependency between nodes from two different
node factories, such as in <code>GraphSummarizer</code>, the logic
that prevents self-dependencies relied on all classes of a package
being present, which may not be the case while summarizing a graph.
I rewrote the validation logic in <code>Node</code> and its subclasses
to use a template method instead.  Since it does not rely on list
traversal anymore, it should speed things up a bit (but I have not
tried to measure it).
</p>

<p>
Relabeled the beta from "0.1 beta" to "1.0 beta 1".  It might
have a little more appeal, so more people will try the software.
</p>
</dd>
<dt><a name="2002-12-04">December 04, 2002</a></dt>
<dd>
<p>
Worked on tools documentation.  Got rid of original
<code>Tools.xml</code>, copied the information so far into
<code>Tools.txt</code>.  Pretty soon, I will have to put
the Perl script generator under source control too.
</p>
</dd>
<dt><a name="2002-12-03">December 03, 2002</a></dt>
<dd>
<p>
Checked in a bunch of changes that were just accumulating
on my machine.
</p>

<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>Xerces</td>
        <td>:</td>
        <td>2.2.0</td>
        <td>-></td>
        <td>2.2.1</td>
    </tr>
    <tr>
        <td>Xalan</td>
        <td>:</td>
        <td>2.4.0</td>
        <td>-></td>
        <td>2.4.1</td>
    </tr>
</table>
</blockquote>

<p>
The upgrade to Xalan should have fixed
<a target="_blank" href="http://nagoya.apache.org/bugzilla/show_bug.cgi?id=13106">bug 13106</a>.
I'll check it out tomorrow.
</p>
</dd>
<dt><a name="2002-12-02">December 02, 2002</a></dt>
<dd>
<p>
Worked on tools documentation.
</p>
</dd>
<dt><a name="2002-11-26">November 26, 2002</a></dt>
<dd>
<p>
Finished the generator and generated a template for
documenting the tools that make up Dependency Finder.
Now, I must fill in the template.
</p>

<p>
I'm afraid that I must forget about the Jolt Awards
this year.  No way I can get an official major release
out before December 31.  But next year, for sure.
</p>
</dd>
<dt><a name="2002-11-25">November 25, 2002</a></dt>
<dd>
<p>
Started working on a generator for a template for
documenting the tools that make up Dependency Finder.  I am
using a Perl script to scan the <code>bin/</code> directory
and automatically generate information about each script.
When I am done, the template will use the same kind of
annotation that I have been using for the user guide.
This way, I can use the same translator for both files to
convert them to HTML.  At first, I thought of generating
XML and then use XSLT to convert it to HTML, but managing
XML with embedded HTML tags proved too much.  This way,
the notation is simpler and the embedded HTML does not get
in the way.
</p>
</dd>
<dt><a name="2002-11-21">November 21, 2002</a></dt>
<dd>
<p>
Technical documentation.
</p>

<p>
Fixed some minor bugs in how I generate the manual.
</p>
</dd>
<dt><a name="2002-11-20">November 20, 2002</a></dt>
<dd>
<p>
Submitted a proposal for the <i>Spotlight on Open Source</i>
column in <a target="_blank" href="http://www.sys-con.com/java/">Java Developer Journal</a>.
</p>

<p>
Found an article on dependencies titled <i>Managing Java
Source Code Dependencies for SCM</i> in Java Developer Journal,
vol. 7, no. 11, November 2002.  It deals mainly with compile-time
dependencies and keeping track of components under revision
control, but still makes a few good points regarding dependencies
in general.
</p>

<p>
Fixed some minor bugs in how I generate the manual.
</p>
</dd>
<dt><a name="2002-11-19">November 19, 2002</a></dt>
<dd>
<p>
Technical documentation.
</p>

<p>
Discovered another free tool that deals with metrics:
<a target="_blank" href="http://www.kclee.com/clemens/java/javancss/">JavaNCSS</a>.
It includes two measurements: McCabe's cyclomatic complexity
and its own non-comment source statement.  I really need to move
<code>com.jeantessier.metrics</code> off of the Visitor pattern
and let people code and add their own measurements.
</p>

<p>
I looked up McCabe's cyclomatic complexity and it shouldn't
be too hard to implement.  It's basically just a matter of counting
specific instructions.
</p>

<p>
Found another, older article by
<a target="_blank" href="http://www.objectmentor.com/resources/articles/oodmetrc.pdf">Robert C. Martin</a>
about his "distance from the main sequence" dependency metric.
</p>
</dd>
<dt><a name="2002-11-18">November 18, 2002</a></dt>
<dd>
<p>
Technical documentation.
</p>
</dd>
<dt><a name="2002-11-12">November 12, 2002</a></dt>
<dd>
<p>
I worked out the design of a new <code>TransitiveClosure</code>
that uses breadth-first search through the dependency graph.
It is not based on <code>com.jeantessier.dependency.Visitor</code>
and uses the Strategy pattern to decide how far to go from the
scope, either up to a given path length or unbounded, with
separate strategies for following inbound versus outbound
dependencies.
</p>

<p>
I also laid out the design for a <i>scope selector</i> to help
with computing transitive closures on non-maximized graphs.  This
will also come in handy for the next item today.
</p>

<p>
I have also outlined the algorithm for finding the shortest
paths between two groups of nodes, using the engine that computes
transitive closures.  By growing closures from both groups, one
following inbound dependencies and the other following outbound
dependencies, and growing them until I have a non-empty
intersection, I will get a subgraph that contains all the paths
from A to B with minimal length.  I can use the
<i>scope selector</i> described above to select source and sink groups.
</p>

<p>
I also found out that <a target="_blank" href="http://sdmagazine.com/">Software Development</a>
magazine is taking nominations for its Jolt Awards.
I'm going to submit Dependency Finder.  But they don't want betas, so
I will have to push up my release schedule.  I'll have a very
short beta period and a release in December.  ;-)
</p>
</dd>
<dt><a name="2002-11-11">November 11, 2002</a></dt>
<dd>
<p>
I have been catching up on graph data structures and their
operations by reading my old college textbooks again.  I was
pleased to see that my implementation of dependency graphs was
not too far from implementations they discuss in the book.  I
was also pleased to see that <code>TransitiveClosure</code> uses
a depth-first search algorithm, but the breadth-first search
algorithm in the book is more in tune with what the class is
trying to do.  I will write a breath-first class when I get a
chance.
</p>

<p>
The book also has an algorithm for finding a path between two
<i>vertices</i> (nodes) in a graph.  I will modify it to find
paths between two groups of vertices.
</p>

<p>
Before I forget, the books are:
</p>

<ul>
<li>"<a target="_blank" href="http://www.amazon.com/exec/obidos/ASIN/067339736X/qid=1037115131/sr=11-1/ref=sr_11_1/002-8674524-2273608">Data Structures and Their Algorithms</a>" by Harry R. Lewis and Larry Denenberg</li>
<li>"<a target="_blank" href="http://www.amazon.com/exec/obidos/tg/detail/-/020130564X/qid=1037115784/sr=1-1/ref=sr_1_1/002-8674524-2273608?v=glance&s=books">Data Structures in Java</a>" by Thomas A. Standish</li>
<li>"<a target="_blank" href="http://www.amazon.com/exec/obidos/tg/detail/-/0201072564/qid=1037115856/sr=1-1/ref=sr_1_1/002-8674524-2273608?v=glance&s=books">Data Structure Techniques</a>" by Thomas A. Standish</li>
<li>"Algorithmique: conception et analyse" by Giles Brassard and Paul Bratley</li>
</ul>

<p>
This last one was written by teachers at the
<a target="_blank" href="http://www.iro.umontreal.ca/?lang=en">Universit&eacute; de Montr&eacute;al</a>,
where I went to school.
</p>
</dd>
<dt><a name="2002-11-09">November 09, 2002</a></dt>
<dd>
<p>
Wrote a new unit test for <code>TransitiveClosure</code>.
Right now, it requires a maximized graph to be useful.  I want
to have it accept any graph, like I did for <code>GraphCopier</code>
with <code>GraphSummarizer</code>.
</p>

<p>
Running the tests reminded me that I still have a bunch of
unit tests for metrics to fix, with regard to the fact that I
moved to JDK 1.4.
</p>
</dd>
<dt><a name="2002-11-08">November 08, 2002</a></dt>
<dd>
<p>
Found two references to Perl regular expressions in Java.
I will be able to point people to them in the manual and the
JSPs.  This will help with teaching people how to use the
regular expressions to get them data they want.
</p>

<ul>
<li><code><a target="_blank" href="http://jakarta.apache.org/oro/api/org/apache/oro/text/regex/package-summary.html#package_description">org.apache.oro.text.regex</a></code> in Jakarta ORO</li>
<li><code><a target="_blank" href="http://java.sun.com/j2se/1.4/docs/api/java/util/regex/Pattern.html#sum">java.util.regex.Pattern</a></code> in JDK 1.4</li>
</ul>

<p>
I will also write a more decent samples section in the
manual.  The current one is rather laughable.
</p>
</dd>
<dt><a name="2002-11-07">November 07, 2002</a></dt>
<dd>
<p>
Submitted another session for the next JavaOne conference.
This one is about JarJarDiff and API evolution management.  I
also got someone from work to give first hand experience of
how this stuff is used as part of an actual development
process.
</p>
</dd>
<dt><a name="2002-11-04">November 04, 2002</a></dt>
<dd>
<p>
Submitted a session for the next JavaOne conference.  I used the presentation
from <a href="#2002-10-23">2002-10-23</a> as the basis.  I might add sessions for JarJarDiff.
</p>

<p>
I will use the presentation's slides for the tutorial.  I must get back to
finishing the manual, too.
</p>
</dd>
<dt><a name="2002-10-31">October 31, 2002</a></dt>
<dd>
<p>
Got some new ideas on fixing the serialization of dependency
graphs.  I can separate the nodes from the dependencies and put
everything in a <code>Graph</code>-like object.  Each dependency
would become its own object, allowing me to record additional
information about each dependency such as its type (dependency,
association, generalization, realization) and weight (how many
times it occurs in the code).
</p>

<p>
Looked at possible graphical renders for metrics.
</p>
</dd>
<dt><a name="2002-10-27">October 27, 2002</a></dt>
<dd>
<p>
<code>Manual.html</code> now has a table of contents and
named anchors for each section title for easier reference.
</p>

<p>
The web app now has an error page.  The next step will be
to have invalid regular expressions reported within each JSP
instead of shifting context to this special error page.
</p>
</dd>
<dt><a name="2002-10-26">October 26, 2002</a></dt>
<dd>
<p>
Write out <code>AccessField</code> values as bit sets.
</p>
</dd>
<dt><a name="2002-10-24">October 24, 2002</a></dt>
<dd>
<p>
Got some more ideas regarding layout of dependency
graphs.
</p>

<p>
Found interesting thing that JDK 1.4's <code>javac</code>
does with method calls.  The bytecode now points to the actual
type of the reference now, instead of the last class in the
inheritance hierarchy to implement the method.
</p>

<p>
Cleaned up <code>com.jeantessier.classreader.XMLPrinter</code>
to better print field accesses and method calls.
</p>

<p>
Added manifest information to the JAR file.
</p>
</dd>
<dt><a name="2002-10-23">October 23, 2002</a></dt>
<dd>
<p>
Presentation went well.  Two questions:
</p>

<p>
<i>When will there be a graphical representation?</i>  This
is a tough one to crack; it will require a lot of work.
</p>

<p>
<i>Why <b>Perl</b> regular expressions?</i>  Because they are
quite powerful and the only regular expression syntax that
I bothered to learn a long time ago.
</p>
</dd>
<dt><a name="2002-10-22">October 22, 2002</a></dt>
<dd>
<p>
Worked on the PowerPoint presentation some more.
</p>
</dd>
<dt><a name="2002-10-21">October 21, 2002</a></dt>
<dd>
<p>
Started PowerPoint slides.  When I am done, I will use
them for the tutorial item on the release plan.
</p>
</dd>
<dt><a name="2002-10-19">October 19, 2002</a></dt>
<dd>
<p>
Drafted talk for this Wednesday.  34 pages and counting.
</p>
</dd>
<dt><a name="2002-10-18">October 18, 2002</a></dt>
<dd>
<p>
Will present Dependency Finder at work on <a href="#2002-10-23">2002-10-23</a>.
</p>
</dd>
<dt><a name="2002-10-17">October 17, 2002</a></dt>
<dd>
<p>
I'm planning to populate the <code>manifest.mf</code>
file in <code>DependencyFinder.jar</code>.  I will also
put in code to printout version info, including versions
of all 3rd party JARs.
</p>
</dd>
<dt><a name="2002-10-16">October 16, 2002</a></dt>
<dd>
<p>
Added usage hints to controls in web app JSPs.  I also
changed the look and feel and put it in an external CSS2
stylesheet.  It looks great in IE 5.0 but Netscape 4.7 has
trouble with the table that encloses controls.  The JSP
works, it just doesn't look as great.  I'll worry about it
later.
</p>

<p>
Added the same usage hints to controls as tool tips in
the Swing version of <code>Dependency Finder</code> and
<code>OOMetrics</code>.
</p>

<p>
Created a CSS stylesheet for this website.
</p>

<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>Log4J</td>
        <td>:</td>
        <td>1.2.6</td>
        <td>-></td>
        <td>1.2.7</td>
    </tr>
</table>
</blockquote>
</dd>
<dt><a name="2002-10-15">October 15, 2002</a></dt>
<dd>
<p>
Further simplified the default settings in
<code>DependencyFinder</code> and <code>query.jsp</code>.
The new defaults print the entire package-to-package
dependency graph, as opposed to the entire graph like
it was doing before.  This is so that new users, as they
start using the interface, can simply launch a query and
see something useful without using all the memory available
to render an immense graph.
</p>

<p>
I will expand the manual to include a tutorial with
sample queries and their results.
</p>

<p>
There was a rendering problem for <code>JTable</code>
under JDK 1.3.  I try to group rows in bands of three with
alternating background colors.  For some reason, under JDK
1.3, the cells in column 0 would not get the right background
sometimes.  This problem is gone under JDK 1.4.  Since this
is not breaking any functionality (it is just annoying), I
will recommend that you upgrade your JVM if it bothers you.
</p>
</dd>
<dt><a name="2002-10-14">October 14, 2002</a></dt>
<dd>
<p>
I'm dropping support for JDK 1.2.2.  I upgraded my
JDK 1.3 from 1.3.1<i>01 to 1.3.1</i>05.  I also started playing
with JDK 1.4.
</p>

<p>
This is interesting, now.  JDK 1.4 ships with some basic
XML support, including a version of Xerces.  But it looks
like it's an older version than the one I'm using, because
it requires me to explicitly specify the system property
<code>org.xml.sax.driver</code>.  I need to dig further to
figure out which version they're shipping and how I can
force it to use the latest Xerces that I ship with
Dependency Finder.  Maybe some day, in the far future, when
I don't support JDK 1.3 anymore, I can stop shipping Xerces
with Dependency Finder altogether.  But for now, I'm stuck.
</p>

<p>
Maybe I can weasel out of it by requiring users to install
JAXP 1.2 from Sun.  The documentation claims that JDK 1.4
ships with JAXP 1.1.  Maybe JAXP 1.2 uses something close to
the latest Xerces; and it also includes Xalan!  I will
investigate further.
</p>

<p>
Also, the compiler in JDK 1.4 behaves slightly differently
from the one in JDK 1.3.  The result is that the unit tests
are breaking because the compiled classes don't have the
same number of features.  I will have to either revert back
to JDK 1.3 or update the unit tests.  I haven't quite decided
yet, but I'm leaning towards the latter.
</p>

<p>
I also seems that JDK 1.4 has problems with Log4J too.
More on this later.
</p>

<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>Xerces</td>
        <td>:</td>
        <td>2.1.0</td>
        <td>-></td>
        <td>2.2.0</td>
    </tr>
</table>
</blockquote>
</dd>
<dt><a name="2002-10-11">October 11, 2002</a></dt>
<dd>
<p>
I did a quick check to see if I can still compile
Dependency Finder with JDK 1.2.2, but I can't anymore.
I use <code>java.util.Collections.singletonList()</code> in
<code>com.jeantessier.commandline.MultipleValuesSwitch</code>
and a new constructor for
<code>javax.swing.JRadioButtonMenuItem</code> in
<code>com.jeantessier.dependencyfinder.gui.DependencyFinder</code>
that takes an instance of
<code>javax.swing.Action</code>.  Given the context in
which these happen, I don't see how I can write around
them in a clean way.
</p>

<p>
So I'm probably just going to drop support of JDK
1.2.2 and ask people to use Dependency Finder with
JDK 1.3 and above.
</p>
</dd>
<dt><a name="2002-10-10">October 10, 2002</a></dt>
<dd>
<p>
Everybody at work is asking how to use Dependency
Finder.  I guess I need to work on usability and the
intuitiveness of the user interface.
</p>

<p>
Also, maybe the default settings should not try to
print the whole dependency graph.  The two instances my
colleague deployed have over 50,000 nodes and the JVM
runs out of memory trying to render them.  A think a
default of package-to-package dependencies might be
better.
</p>

<p>
Here, I need to choose between default settings that
make it non-threatening to newbies versus settings that
people use most of the time, so the tool is quick to use,
without having to flip the same switches all the time.
</p>
</dd>
<dt><a name="2002-10-09">October 09, 2002</a></dt>
<dd>
<p>
Maybe I could submit papers for sessions at JavaOne.
</p>

<p>
A colleague deployed two instances of the Dependency
Finder web app for us to use.
</p>
</dd>
<dt><a name="2002-10-08">October 08, 2002</a></dt>
<dd>
<p>
Moved article outlines from paper to Word.
</p>
</dd>
<dt><a name="2002-10-06">October 06, 2002</a></dt>
<dd>
<p>
I may have found suitable examples on how to rewrite
<code>PublishedDiffToHTML.xsl</code> in Michael Kay's
book on XSLT.
</p>
</dd>
<dt><a name="2002-10-04">October 04, 2002</a></dt>
<dd>
<p>
The good folks at Xalan fixed
<a target="_blank" href="http://nagoya.apache.org/bugzilla/show_bug.cgi?id=13106">bug 13106</a>.
They pointed out that I violate an XSLT rule when I reference
validator instances in <code>match</code> clauses of
<code>&lt;xsl:template&gt;</code> tags.  It has been working
until now because Xalan is lenient, but there is no guarantee
that it will do so in the future or that the stylesheet will
work with another XSLT translator.  I will need to rewrite
the stylesheet to use <code>&lt;xsl:if&gt;</code> tags to do
the validation.
</p>

<p>
Wrote two outlines for articles or white papers on
Dependency Finder and JarJarDiff, respectively.
</p>
</dd>
<dt><a name="2002-10-01">October 01, 2002</a></dt>
<dd>
<p>
Adjusted <code>classfile.dtd</code> and
<code>com.jeantessier.classreader.XMLPrinter</code> to make
the <code>&lt;interfaces&gt;</code> tag under
<code>&lt;classfile&gt;</code> optional.  This is to make
it consistent with the other "optional" sections for
fields, methods, and attributes.
</p>
</dd>
<dt><a name="2002-09-30">September 30, 2002</a></dt>
<dd>
<p>
Adjusted <code>classfile.dtd</code> and
<code>com.jeantessier.classreader.XMLPrinter</code> to make
<code>&lt;fields&gt;</code>, <code>&lt;methods&gt;</code>,
and <code>&lt;attributes&gt;</code> tags optional.  This is
to account for backward compatibility and make the resulting
XML documents a little simpler.
</p>
</dd>
<dt><a name="2002-09-27">September 27, 2002</a></dt>
<dd>
<p>
Found a deficiency with
<code>com.jeantessier.classreader.XMLPrinter</code>: it
is not printing attributes of class fields.  I opened
a bug about it,
<a target="_blank" href="http://sourceforge.net/tracker/index.php?func=detail&aid=615616&group_id=43305&atid=435884">bug #615616</a>.
</p>

<p>
I used the Inherited Behavior design pattern to normalize
the handling of attributes across implementations of the
<code>com.jeantessier.classreader.Visitor</code> interface.
This solved the bug, but I had to change the DTD for
classfiles.  I don't know how that will impact validity
of outputs once I change it the web site that the tools
point to by default.
</p>

<p>
I worked out the problem with
<code>PublishedDiffToHTML.xsl</code>.  If I use the full
notation for Xalan extensions instead of the abbreviated
one for Java, it works just fine, even with Xalan 2.4.0.
So I will upgrade back to Xalan 2.4.0.  I opened a bug
with the Xalan folks:
<a target="_blank" href="http://nagoya.apache.org/bugzilla/show_bug.cgi?id=13106">Xalan bug 13106</a>.
</p>
</dd>
<dt><a name="2002-09-25">September 25, 2002</a></dt>
<dd>
<p>
Found a problem with Xalan.  For some reason, it won't
recognize my extension for <code>PublishedDiffToHTML.xsl</code>
for the <code>Validator</code>.  It used to work just fine.
I can't find anything in the documentation regarding
changes on to specify extensions.  The release notes hint at
improvements regarding detection of extensions, but there are
no specifics.
</p>

<p>
I have downgraded Xalan from 2.4.0 back to 2.3.1.
</p>

<p>
I've had an idea for a new web app where people can
upload their JAR files and whatnots and get custom graphs
for the duration of the session, or something.  More on this
later.  In the meantime, I've put it in my release plan.
</p>
</dd>
<dt><a name="2002-09-20">September 20, 2002</a></dt>
<dd>
<p>
I found a tool that a lot of the same features of
<code>DependencyFinder</code>, but with a GUI and can also
handle C++.  I read a review in
<a target="_blank" href="http://www.sys-con.com/java/">Java Developers Journal</a>.
The tool is called
<a target="_blank" href="http://thesmallworlds.com/">Small Worlds</a> and it
sells for around $1,750.  The screenshots are really nice.
</p>

<p>
I need to write to JDJ, maybe get an article out of it.
And I need to follow up on Martin Fowler and Bob Martin too.
</p>

<p>
I put (most of) the website in CVS as a new module.
</p>

<p>
I also had an idea for a possible layout of classes, by
package, for a dependency graph.  Classes in a package are laid
out in a circle, forming a cluster.  The clusters are they laid
out in a larger circle.  This way, one can zoom in on a cluster
to explore dependencies within a package.  If you zoom out far
enough, inter-package dependencies dominate and packages with
lots of dependencies stand out.
</p>

<p>
<img src="../images/ClassPackageDraft.jpg" /><br />
</p>
</dd>
<dt><a name="2002-09-18">September 18, 2002</a></dt>
<dd>
<p>
Worked on documentation.
</p>

<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>Ant</td>
        <td>:</td>
        <td>1.5Beta1</td>
        <td>-></td>
        <td>1.5</td>
    </tr>
    <tr>
        <td>Log4J</td>
        <td>:</td>
        <td>1.2.3</td>
        <td>-></td>
        <td>1.2.6</td>
    </tr>
    <tr>
        <td>Jakarta ORO</td>
        <td>:</td>
        <td>2.0.6</td>
        <td>-></td>
        <td>2.0.7-dev-1</td>
    </tr>
    <tr>
        <td>JUnit</td>
        <td>:</td>
        <td>3.8</td>
        <td>-></td>
        <td>3.8.1</td>
    </tr>
    <tr>
        <td>Xerces</td>
        <td>:</td>
        <td>2.0.1</td>
        <td>-></td>
        <td>2.1.0</td>
    </tr>
    <tr>
        <td>Xalan</td>
        <td>:</td>
        <td>2.3.1</td>
        <td>-></td>
        <td>2.4.0</td>
    </tr>
</table>
</blockquote>

<p>
It turns out that a semantics change in Jakarta ORO is
breaking one of the unit tests.  I will look into it
later.
</p>

<p>
And I'm also playing with Tomcat 4.1.10.
</p>
</dd>
<dt><a name="2002-09-17">September 17, 2002</a></dt>
<dd>
<p>
Compressing by looking at consecutive lines does not
work.  I changed the algorithm in <code>ListDiffPrinter</code>
to be a little more thorough.  It can still have some
problems with inner classes, but that only result in a
little too much output; nothing is lost.  I'll live with
it for now.
</p>

<p>
Also fixed <code>ListDiff.bat</code> which was missing
a JAR, now that <code>ListDiffPrinter</code> uses Jakarta
ORO.
</p>
</dd>
<dt><a name="2002-09-16">September 16, 2002</a></dt>
<dd>
<p>
Fixed the problem with <code>ListDiff</code>.  I'll
double check with the person who first complained about
the problem before definitely hanging my hat on this one,
though.
</p>
</dd>
<dt><a name="2002-09-15">September 15, 2002</a></dt>
<dd>
<p>
Turns out <code>ListDiff</code> is not as easy to fix
as I first expected.  I know I have to be smarter than
just doing a prefix check in <code>ListDiffPrinter</code>,
but how do I distinguish between a package name, a class
name, and a field name?  The answer will drive how far the
prefix match has to go.
</p>

<p>
I have an idea.  I will have <code>ListDocumentedElements</code>
mark each entry with a suffix in "<code> [P]</code>",
"<code> [M]</code>", or "<code> [F]</code>".  Then, in
<code>ListBasedValidator</code>, I will trim it off.  That
will take care of <code>JarJarDiff</code> and the XSL
transformations.  Then, in <code>ListDiffPrinter</code>,
I can use this information to do better compression of the
lists.
</p>

<p>
I've opened a bug on the matter on the SourceForge
project page.
</p>
</dd>
<dt><a name="2002-09-13">September 13, 2002</a></dt>
<dd>
<p>
Someone found a problem with <code>ListDiff</code> and
how it compresses lists.  It turns out that my simple use
of prefixes when performing compression was a little too
simplistic after all.  Packages mask subpackages.  Classes
and fields with names that are prefix of others mask those
others.  This should be easy enough to fix.
</p>
</dd>
<dt><a name="2002-09-10">September 10, 2002</a></dt>
<dd>
<p>
Finished simplifying the UI in the Swing application of
<code>DependencyFinder</code>.
</p>
</dd>
<dt><a name="2002-09-06">September 06, 2002</a></dt>
<dd>
<p>
Added separators and table of contents to the output of
<code>DiffToHTML.xsl</code>.  This helps me combine reports
into one long history file, with individual diffs separated
by &lt;hr&gt; tags.  I also added new sample outputs of
<code>JarJarDiff</code>.
</p>
</dd>
<dt><a name="2002-09-05">September 05, 2002</a></dt>
<dd>
<p>
Looked into making each implementation of
<code>Measurement</code> compute its own metrics,
instead of having everything crammed in
<code>MetricsGatherer</code>.  This is a major
undertaking and will have to wait until after I have
launched the first beta test.  I would have to create
over 60 custom <code>Measurement</code> implementations,
one for each current measurement collected by the
gatherer.
</p>
</dd>
<dt><a name="2002-09-04">September 04, 2002</a></dt>
<dd>
<p>
Added caching of values to <code>MeasurementBase</code>
subclasses.  This is to speed up rendering in
<code>OOMetricsGUI</code> and other reports.
</p>
</dd>
<dt><a name="2002-08-31">August 31, 2002</a></dt>
<dd>
<p>
Finished <code>MartinMetrics.xml</code> for the metrics
in Robert C. Martin's
<a target="_blank" href="http://www.objectmentor.com/resources/articles/Principles_and_Patterns.PDF">Design Principles and Design Patterns</a> article.
</p>
</dd>
<dt><a name="2002-08-30">August 30, 2002</a></dt>
<dd>
<p>
Refactored <code>AccumulatorMeasurement</code> some more.
Yesterday's implementation was to limiting.  Still has a
few kinks to work out.  I'm also working on
<code>etc/MartinMetrics.xml</code> which has the metrics
configuration to support instability and abstractness
metrics and his A vs. I graph.
</p>
</dd>
<dt><a name="2002-08-29">August 29, 2002</a></dt>
<dd>
<p>
Refactored <code>AccumulatorMeasurement</code> so I can
aggregate extra-package dependencies and compute coupling
metrics.
</p>
</dd>
<dt><a name="2002-08-28">August 28, 2002</a></dt>
<dd>
<p>
Added filtering to <code>NbSubMetricsMeasurement</code>.  I
was misled into thinking I could simply count classes that have
outbound dependencies and classes that have inbound ones, and
that would be enough to compute coupling metrics.  But I was
wrong.  This modification is pretty useless, I can't think of
a valid use case.  But what the heck, it's in there already.
</p>
</dd>
<dt><a name="2002-08-27">August 27, 2002</a></dt>
<dd>
<p>
Fixed yesterday's problem with <code>CodeDependencyCollector</code>.
It now treats the static initializer like any other feature.
I also set the static initializer's signature to
<code>static {}</code>.  I decided to fix it since the
<code>com.jeantessier.metrics</code> package was already treating
it that way.
</p>
</dd>
<dt><a name="2002-08-26">August 26, 2002</a></dt>
<dd>
<p>
Worked on the documentation a bit.  I tried to clarify how
scoping and filtering work.
</p>

<p>
I found out that <code>CodeDependencyCollector</code> treats
dependencies coming from a class' static analyzer as if the
dependencies emanated from the class itself.  This means that
dependencies from the static initializer to features show up as
class-to-feature dependencies, something I said in the manual
did not exist.  Now I must decide if I'm going to amend the
documentation or treat the static initializer like a feature.
And if the latter, how am I going to name it?  I'm thinking
maybe <code>package.Class.{}</code> or something similar.
</p>
</dd>
<dt><a name="2002-08-25">August 25, 2002</a></dt>
<dd>
<p>
Removed obsolete constructors in tests, now that I've upgraded
JUnit and that <code>junit.framework.TestCase</code> now has a
no argument constructor.
</p>
</dd>
<dt><a name="2002-08-23">August 23, 2002</a></dt>
<dd>
<p>
Found some articles
(one by <a target="_blank" href="http://www.objectmentor.com/resources/articles/Principles_and_Patterns.PDF">Robert C. Martin</a>)
and a tool for the Resource section.  The article by Mr. Martin
gave me the idea of providing a custom metrics configuration
with the metrics he describes in the article, using the same
abbreviations.  I might need more powerful computational measurements
to handle the equations.
</p>

<p>
I've put up some <a target="_blank" href="Samples/">sample outputs</a>
so you can see what they looks like.
</p>

<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>JUnit</td>
        <td>:</td>
        <td>3.7</td>
        <td>-></td>
        <td>3.8</td>
    </tr>
</table>
</blockquote>
</dd>
<dt><a name="2002-08-22">August 22, 2002</a></dt>
<dd>
<p>
Worked on simplifying the UI in the Swing application.  So
far, it eludes me.  But I'm done with the web application
version.
</p>

<p>
In the meantime, I'm producing dependency reports and API
difference reports for past versions of Dependency Finder.
</p>
</dd>
<dt><a name="2002-08-21">August 21, 2002</a></dt>
<dd>
<p>
67, 18, 4, 1, 1, 1, ...
</p>

<p>
The flow of downloads has tarried.  But that's OK.  I'll get
another chance when the beta comes out (if I can get to it).
</p>

<p>
Worked on simplifying the UI in the web application.  Both
<code>query.jsp</code> and <code>closure.jsp</code> now have
a simple and an advanced form.  The advanced form has all the
options whereas the simple form only takes regular expressions
that apply to all packages, classes, and features.  I'm thinking
of relying on external cascading stylesheets, but I have to
check about browser support.  I suppose this is not really an
issue anymore, but I'll check anyway.
</p>
</dd>
<dt><a name="2002-08-14">August 14, 2002</a></dt>
<dd>
<p>
<b>67 downloads!!!</b>
</p>

<p>
I posted a message at 10am PDT and by midnight EDT there
had been 67 downloads!
</p>
</dd>
<dt><a name="2002-08-12">August 12, 2002</a></dt>
<dd>
<p>
I found two other tools that do similar things as
Dependency Finder: <a target="_blank" href="http://remotejava.com/classdep/">classdep</a>
and <a target="_blank" href="http://www.headwaysoftware.com/">reView</a>.
</p>

<p>
Faced with the declining number of downloads of Dependency
Finder recently, I'm going to have to start advertising.  I'm going to
start by spamming newsgroups...  See you in comp.lang.java.*  :-)
</p>
</dd>
<dt><a name="2002-08-07">August 07, 2002</a></dt>
<dd>
<p>
I've had an idea for a logo.  Here's the initial draft.
</p>

<p>
<img src="../images/s_logo.jpg" /><br />
</p>
</dd>
<dt><a name="2002-07-29">July 29, 2002</a></dt>
<dd>
<p>
Added date of last extraction to <code>extract.jsp</code>.
</p>
</dd>
<dt><a name="2002-07-23">July 23, 2002</a></dt>
<dd>
<p>
Trying simpler UI with web application JSPs because
they are easier to manipulate than the Swing code.
</p>
</dd>
<dt><a name="2002-07-11">July 11, 2002</a></dt>
<dd>
<p>
New release!  I was hoping to launch a beta, but I'm
behind with the documentation.  With this release, people
can benefit from the bug fixes while I finalize the docs.
</p>

<p>
I'm still going through the change logs from CVS to
publish the list of changes since the last release.
</p>
</dd>
<dt><a name="2002-07-09">July 09, 2002</a></dt>
<dd>
<p>
Back from vacation.
</p>

<p>
Adjusted release plan to close current release and spec
out the first beta.
</p>

<p>
Wrote a Perl script to parse log information from CVS
to prepare the change file listing differences since the
last release.  New release is imminent.
</p>
</dd>
<dt><a name="2002-06-17">June 17, 2002</a></dt>
<dd>
<p>
Done with SLOC.
</p>

<p>
Added <code>indent-text</code> switch to commands that
generate textual output, including XML documents.  This
allows users to adjust file size by replacing four spaces
with a single TAB or whatever else they want.
</p>
</dd>
<dt><a name="2002-06-14">June 14, 2002</a></dt>
<dd>
<p>
Finished initial SLOC testing.  I need to check a few more
things dealing with synthetic elements and inner classes.
</p>
</dd>
<dt><a name="2002-06-13">June 13, 2002</a></dt>
<dd>
<p>
Fixed the <code>ListDocumentedElements</code> doclet so it
skips static initializers.
</p>

<p>
Added <code>dtd-prefix</code> switch to commands that
generate XML documents.  This allows users to point to local
DTDs when they are disconnected from the Internet.  The
user can simply use
"<code>-dtd-prefix %DEPENDENCYFINDER_HOME%\etc</code>".  The
default value points back to the Dependency Finder website.
</p>
</dd>
<dt><a name="2002-06-12">June 12, 2002</a></dt>
<dd>
<p>
<code>ListDiff</code> can now compress the resulting list.
This means that if, for instance, a class is in a list, it
will remove entries for methods of that class from the list.
The same goes for packages and their classes.  Just call it
with the <code>compress</code> switch.
</p>

<p>
I changed the published list to use with
<code>PublishedDiffToHTML</code>.  It makes more sense to use
the old list, since the goal is to notify customers of the
changes that possibly break backwards compatibility.
</p>
</dd>
<dt><a name="2002-06-11">June 11, 2002</a></dt>
<dd>
<p>
I'm done with dependency-related metrics.  Now, I need to
finalize SLOC.
</p>
</dd>
<dt><a name="2002-06-10">June 10, 2002</a></dt>
<dd>
<p>
I'm not going to make it.  I wanted to finish the first
beta release before going on vacation next week, but I'm
not done with the coding and there is a lot of documentation
to write still.  I'll do a date-tagged release with all the
code fixes so I can close the bugs and do the beta later,
when I've had some time to write good docs and package the
whole thing properly.  I've updated the release plan
accordingly.
</p>

<p>
Worked on dependency-related metrics.  I think I've got
it nailed down, but I need to write more tests.
</p>

<p>
Made progress with SLOC.  Methods are pretty good.
Fields are accounted for.  I've added one for the class
declaration.  I still need to work out <code>try {</code>
lines.
</p>

<p>
I got feedback regarding <code>ListDiff</code> and
<code>PublisedDiffToHTML.xsl</code>.  I need to do more
testing to make sure that they compute differences
correctly.
</p>
</dd>
<dt><a name="2002-06-09">June 09, 2002</a></dt>
<dd>
<p>
Worked on dependency-related metrics.
</p>
</dd>
<dt><a name="2002-06-08">June 08, 2002</a></dt>
<dd>
<p>
Wrote test cases for dependency-related metrics.
I'm thinking of using it to test
<code>CodeDependencyCollector</code> too, some day.
</p>
</dd>
<dt><a name="2002-06-06">June 06, 2002</a></dt>
<dd>
<p>
Changed the default self-disposition of
<code>StatisticalMeasurement</code> to average values.  It
turns out that in my attempt yesterday, I had changed the
wrong default value in the measurement's initialization.
</p>

<p>
You can now expand <code>AccumulatorMeasurement</code>
values when using the <code>-expand</code> switch with the
<code>-txt</code> switch to <code>OOMetrics</code>.
</p>

<p>
Fixed <code>-verbose</code> and <code>-trace</code>
switches on all executables.
</p>

<p>
Fixed a bug in <code>SumMeasurement</code> when dealing
with <code>StatisticalMeasurement</code> and empty lines.
</p>

<p>
Allow group definitions to be defined by multiple
regular expressions.
</p>

<p>
Used <code>SumMeasurement</code> to compute SLOC on classes
as the sum of SLOC on submetrics + 1.  I still need to figure
out how to ignore counts for synthetic elements and add
abstract methods and <code>try {</code> lines.
</p>
</dd>
<dt><a name="2002-06-05">June 05, 2002</a></dt>
<dd>
<p>
Created <code>classfile.dtd</code> and put it at:
</p>

<pre>
    <a target="_blank" href="dtd">http://depfind.sourceforge.net/dtd/</a>
</pre>

<p>
Added a <code>TableCellRenderer</code> to the
<code>JTable</code> instances in <code>OOMetricsGUI</code>
to draw out-of-bound measurements in red.  I also tried
to set the background to create bands of three rows of
alternating colors, but it is not working perfectly yet.
</p>

<p>
Added a <i>new metrics</i> tool to <code>OOMetricsGUI</code>
to reset the list of measurements.
</p>

<p>
Measurements in the configuration file can now be made
invisible via an XML attribute on <code>&lt;measurement&gt;</code>
tags.
</p>

<p>
I tried to change the default self-disposition of
<code>StatisticalMeasurement</code> to average values, but it
behaved strangely by ignoring itself instead.  Strange!  I
also tried to have separate renderer classes for
<code>StatisticalMeasurement</code> and the other subclasses
of <code>MeasurementBase</code>, but that also didn't quite
work out.  More on that later ... maybe.
</p>
</dd>
<dt><a name="2002-06-04">June 04, 2002</a></dt>
<dd>
<p>
Added <code>SumMeasurement</code> in preparation for SLOC
and dependency measurements.
</p>

<p>
Created <code>metrics.dtd</code> and put it at:
</p>

<pre>
    <a target="_blank" href="dtd">http://depfind.sourceforge.net/dtd/</a>
</pre>

<p>
Fixed a mistyped measurement in <code>MetricsConfig.xml</code>.
</p>

<p>
Fixed <code>MeasurementBase.InRange()</code> to handle
textual thresholds.  It assumed the thresholds were instances
of <code>Number</code>, but the XML descriptor provides them
as text which has to be parsed.
</p>
</dd>
<dt><a name="2002-06-03">June 03, 2002</a></dt>
<dd>
<p>
Addressed a possible performance issue which
<code>com.jeantessier.metrics.XMLPrinter</code> where using
four spaces for indent was yielding <i>huge</i> XML reports.
I changed <code>OOMetrics</code> to use a tab character
instead.  We'll see how it goes.  At the same time, I adjusted
<code>XMLPrinter</code> to generate &lt;measurement&gt;
nodes instead of &lt;metric&gt;.  It will also ignore
<code>NullMeasurement</code> instances from here on.
</p>

<p>
Use the system property <code>line.separator</code>
instead of "\n" in metrics reports.  This should help with
cross-platform portability.
</p>

<p>
Rigged <code>MetricsFactory</code> to handle group
definitions properly.
</p>

<p>
I've been looking at using tool tips in the header of the
result tables in <code>OOMetricsGUI</code> to expand the
measurement names.  Each header has an associated
<code>JComponent</code>, but getting to is proving rather
difficult.  I'd almost have to provide a custom
implementation of <code>TableColumnModel</code>, but I
only need to override a tiny piece of the behavior.  More
on this later.
</p>
</dd>
<dt><a name="2002-06-01">June 01, 2002</a></dt>
<dd>
<p>
Finished <code>MetricsConfig.xml</code> and the constants
<code>com.jeantessier.metrics.Metrics</code>.  I adjusted
some of the reporting functions in printers and in concrete
implementations of <code>Measurement</code>.
</p>
</dd>
<dt><a name="2002-05-31">May 31, 2002</a></dt>
<dd>
<p>
Worked on unit tests for <code>MetricsGatherer</code>.
</p>
</dd>
<dt><a name="2002-05-30">May 30, 2002</a></dt>
<dd>
<p>
I'm working out <code>MetricsGatherer</code> to bring it
closer to the old, hard-coded <code>MetricsFactory</code>.
This is going to take a while ...
</p>

<p>
The optional validation was not enough when working in a
disconnected environment.  It still tried to load the DTD,
even though it was not using it to validate the document.
I've used an Apache feature to turn off loading of external
DTDs when validation is turned off.  It now works fine.
</p>
</dd>
<dt><a name="2002-05-29">May 29, 2002</a></dt>
<dd>
<p>
Finished with the whole <code>MetricsConfiguration</code>
mess.  All I have left to do is adjust the measurement names
in <code>MetricsGatherer</code> and complete the descriptions
in <code>MetricsConfig.xml</code>
</p>

<p>
Next, it is time to fix SLOC and dependency metrics.  Then
I'll simplify the UI, write tons of docs, and the first beta
will finally be available by the middle of June.
</p>

<p>
Famous last words ...
</p>
</dd>
<dt><a name="2002-05-28">May 28, 2002</a></dt>
<dd>
<p>
I was looking into Ant and found some interesting
features.  I added descriptions to the build script to help
people understand the various targets.  I also managed to
use the &lt;ant&gt; task to compile the <code>JarJarDiff</code>
test samples.
</p>

<p>
I realized that the combination of a validating parser
with remove DTDs might not work when disconnected from
the Web.  So I made the validating behavior optional in
<code>com.jeantessier.dependency.NodeLoader</code> and in
the <code>DependencyReporter</code> CLI application.
</p>

<p>
I upgraded all the scripts to use the new Xerces JAR
files configuration.
</p>

<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>Ant</td>
        <td>:</td>
        <td>1.4.1</td>
        <td>-></td>
        <td>1.5Beta1</td>
    </tr>
    <tr>
        <td>Log4J</td>
        <td>:</td>
        <td>1.2rc1</td>
        <td>-></td>
        <td>1.2.3</td>
    </tr>
    <tr>
        <td>Jakarta ORO</td>
        <td>:</td>
        <td>2.0.5</td>
        <td>-></td>
        <td>2.0.6</td>
    </tr>
</table>
</blockquote>
</dd>
<dt><a name="2002-05-26">May 26, 2002</a></dt>
<dd>
<p>
Redesigned the <code>Measurement</code> hierarchy and
got rid of <code>NumericalMeasurement</code> and
<code>NumericalMeasurementBase</code>.  Now, all
measurements have a "value" and <code>StatisticalMeasurement</code>
uses a self dispose parameter to determine how to
evaluate itself.  The class diagram is now almost trivial.
</p>

<p>
The implementations of <code>Measurement</code> can
be configured using the <code>init-text</code> tags in
the descriptor.
</p>

<blockquote>
<table border="3">
    <tr>
        <th>Class</th>
        <th>Init-Text</th>
    </tr>
    <tr>
        <td><code>AccumulatorMeasurement</code></td>
        <td><code>[SET | LIST]</code></td>
    </tr>
    <tr>
        <td><code>CounterMeasurement</code></td>
        <td><code>[initial value]</code></td>
    </tr>
    <tr>
        <td><code>NbSubMetricsMeasurement</code></td>
        <td><i>none</i></td>
    </tr>
    <tr>
        <td><code>RatioMeasurement</code></td>
        <td><code>base measurement name [DISPOSE_x]<br />divider measurement name [DISPOSE_x]</code></td>
    </tr>
    <tr>
        <td><code>StatisticalMeasurement</code></td>
        <td><code>monitored measurement name [DISPOSE_x]<br />[self DISPOSE_x]</code></td>
    </tr>
</table>
</blockquote>
</dd>
<dt><a name="2002-05-23">May 23, 2002</a></dt>
<dd>
<p>
I have fixed all the unit tests!
</p>

<p>
I was not happy with the way that most measurements
inherited from <code>MeasurementBase</code> and implemented
<code>NumericalMeasurement</code>.  This led to a lot of
duplicate code and the resulting class diagram was hard
to read.  So I created <code>NumericalMeasurementBase</code>
to store the common code and provided some sensible default
method implementations in both abstract classes.  Now, there
is no longer any duplicated code and the class diagram is
simple and obvious.
</p>
</dd>
<dt><a name="2002-05-21">May 21, 2002</a></dt>
<dd>
<p>
I have fixed all the unit tests except the one for
<code>StatisticalMeasurement</code>.  I've got it pretty much
figured out, but there is just a lot of code to change to fix
these.
</p>

<p>
I stumbled by pure chance on articles by Martin Fowler on
coupling and public vs. published interfaces.  I am now
thinking of writing follow up articles that show how
Dependency Finder helps with addressing these issues.
</p>
</dd>
<dt><a name="2002-05-20">May 20, 2002</a></dt>
<dd>
<p>
I have a new design for <code>Measurement</code>
implementations.  Now I get over 100 compile time errors when
compiling the unit tests.  This is going to take forever...
</p>
</dd>
<dt><a name="2002-05-17">May 17, 2002</a></dt>
<dd>
<p>
I finally figured out my problem with Xerces and unit tests.
The Xerces and JUnit's class loading behavior do not play well
together.  I had to craft an <code>excluded.properties</code>
file so that Xerces files are not reloaded with every test run.
</p>

<p>
I finished <code>MetricsConfigurationHandler</code>.  In the
unit tests, I tried to test Xerces's XML validation feature.
It load the external DTD, alright, but fails to flag documents
that do not follow the DTD.  So much for that.
</p>

<p>
To use the validating parser, I had to put the DTDs on:
</p>

<pre>
    <a target="_blank" href="dtd">http://depfind.sourceforge.net/dtd/</a>
</pre>

<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>Xerces</td>
        <td>:</td>
        <td>2.0.0</td>
        <td>-></td>
        <td>2.0.1</td>
    </tr>
</table>
</blockquote>
</dd>
<dt><a name="2002-05-13">May 13, 2002</a></dt>
<dd>
<p>
I still haven't solved my problems with Xerces.
</p>
</dd>
<dt><a name="2002-05-10">May 10, 2002</a></dt>
<dd>
<p>
I am having problem with unit testing Xerces.
<code>XMLReaderFactory</code> complains that the default
<code>XMLReader</code> is not a <code>XMLReader</code>.
</p>
</dd>
<dt><a name="2002-05-06">May 06, 2002</a></dt>
<dd>
<p>
More work on <code>MetricsConfiguration</code>.
</p>
</dd>
<dt><a name="2002-05-03">May 03, 2002</a></dt>
<dd>
<p>
I switched the XML formats to use an external DTD instead
of an internal one, like I've been doing so far.  Not that I
have an "official" web site, I can store the DTDs there for
all to share.  When the release is ready, I'll put the DTDs
at:
</p>

<pre>
    <a target="_blank" href="dtd">http://depfind.sourceforge.net/dtd/</a>
</pre>

<p>
I have got a design for the configuration of metrics system.
I have started writing some unit tests.
</p>
</dd>
<dt><a name="2002-05-01">May 01, 2002</a></dt>
<dd>
<p>
Fixed bugs in:
</p>

<ul>
<li><code>com.jeantessier.classreader.DirectoryClassfileReader</code></li>
<li><code>com.jeantessier.classreader.JarClassfileReader</code></li>
<li><code>com.jeantessier.classreader.ZipClassfileReader</code></li>
</ul>

<p>
where they were not closing the files they were opening.
This resulted in locked resources under Windows NT that
prevented me from recompiling classes after finding out stuff
about them.
</p>

<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>Log4J</td>
        <td>:</td>
        <td>1.2beta3</td>
        <td>-></td>
        <td>1.2rc1</td>
    </tr>
</table>
</blockquote>
</dd>
<dt><a name="2002-04-30">April 30, 2002</a></dt>
<dd>
<p>
I have found a silly bug in <code>com.jeantessier.dependency.TextPrinter</code>
where it was not following the Inherited Behavior pattern in
some of its methods.  This was slowing down the printing of
dependency graphs tremendously (by a factor of 60 for analyzing
Dependency Finder itself).  It is all fixed now.
</p>
</dd>
<dt><a name="2002-04-28">April 28, 2002</a></dt>
<dd>
<p>
I have started defining the DTD and initial document for the
metrics configuration.  I have yet to read it in or do anything
useful with it.
</p>
</dd>
<dt><a name="2002-04-24">April 24, 2002</a></dt>
<dd>
<p>
I have changed how <code>Metrics</code> manages
<code>Measurement</code> instances.  If the <code>Metrics</code>
instance is not tracking a given measurement, it returns a
<code>NullMeasurement</code> object instead of <code>null</code>.
</p>
</dd>
<dt><a name="2002-04-22">April 22, 2002</a></dt>
<dd>
<p>
I just started on the metrics features.  After these are
done, and I've completed the user's manual, I'll be done
with this release!
</p>

<p>
I need to adjust the <code>MetricsFactory</code> to create
the elementary measurements at each level and then setup the
composite measurements from some configuration.  This will set
the stage for using custom configuration files for custom
metrics reports in the next release.
</p>
</dd>
<dt><a name="2002-04-19">April 19, 2002</a></dt>
<dd>
<p>
I have added a utility for diff'ing published API lists.
The utility is called <code>ListDiff</code> and has two XSL
stylesheets for writing to HTML and regular text.
</p>
</dd>
<dt><a name="2002-04-16">April 16, 2002</a></dt>
<dd>
<p>
I fixed some images in the user manual.
</p>
</dd>
<dt><a name="2002-04-15">April 15, 2002</a></dt>
<dd>
<p>
I'm looking at having a Java Web Start version too.
</p>
</dd>
<dt><a name="2002-04-14">April 14, 2002</a></dt>
<dd>
<p>
I am done with <code>JarJarDiff</code> (for this release)!
</p>

<p>
I have fixed <code>DifferencesFactory</code>.  I have renamed
some of the stylesheets.  I have added even more unit tests.
</p>

<blockquote>
<table>
    <tr>
        <td><code>DiffToExternalHTML</code></td>
        <td>-></td>
        <td><code>PublishedDiffToHTML</code></td>
    </tr>
    <tr>
        <td><code>DiffToDocumentationHTML</code></td>
        <td>-></td>
        <td><code>ListDocumentationDiffToHTML</code></td>
    </tr>
    <tr>
        <td><code>DiffToInheritanceChange</code></td>
        <td>-></td>
        <td><code>ListInheritanceDiffToText</code></td>
    </tr>
</table>
</blockquote>
</dd>
<dt><a name="2002-04-13">April 13, 2002</a></dt>
<dd>
<p>
I have moved all the difference computation code from the
constructors to the various <code>Differences</code> classes to a
single <code>DifferencesFactory</code> class.  I have added
additional unit tests that cover most cases.
</p>
</dd>
<dt><a name="2002-04-11">April 11, 2002</a></dt>
<dd>
<p>
I have figured out how to work around the expression size
limitation in <code>DiffToExternalHTML.xsl</code>.  I have added
a <code>full-signature</code> attribute to <code>declaration</code>
nodes in the DTD for differences.  This keeps the size of the
expression somewhat lower, but it is still a behemoth.
</p>

<p>
I am now done with the higher-resolution validation feature.
</p>

<p>
The XSL stylesheets for <code>JarJarDiff</code> seem to work
fine.  I have added one more to only list documentation level
changes.  I also need to test <code>DiffToExternal</code> on a
real-life sample.  I am still not clear as to which validation
list to use: the one generated from the old code, the one generated
from the new code, or a merge of the two.
</p>
</dd>
<dt><a name="2002-04-10">April 10, 2002</a></dt>
<dd>
<p>
I have been looking at the <code>DiffToExternalHTML.xsl</code>
stylesheet, looking for a way to get the additional validation
now that the resolution has gone down to the feature level.
I have noticed that the <code>match</code> expression for
<code>class</code> nodes has exceeded some internal buffer in
Xalan.  If a add a few characters, I get an
<code>ArrayIndexOutOfBoundsException</code> from the transformation
engine.
</p>
</dd>
<dt><a name="2002-04-09">April 09, 2002</a></dt>
<dd>
<p>
I am almost done with new features to <code>JarJarDiff</code>!
</p>

<p>
I fixed all the unit tests and the XSL stylesheets.  In the
process, I fixed a bug in <code>PackageDifferences</code> and
<code>ClassDifferences</code> when adding decorators.
</p>

<p>
<code>DiffToExternal</code> may need additional tweaking.  I
also need an new XSL stylesheet to extract the documentation
level information from all the other differences.
</p>
</dd>
<dt><a name="2002-04-08">April 08, 2002</a></dt>
<dd>
<p>
<code>JarJarDiff</code> is a mess.  I have started writing
unit tests in an effort to regain control.
</p>
</dd>
<dt><a name="2002-04-05">April 05, 2002</a></dt>
<dd>
<p>
The code is in place, but it does not seem to be working.
</p>
</dd>
<dt><a name="2002-04-03">April 03, 2002</a></dt>
<dd>
<p>
First shot at tracking documentation levels using
<code>JarJarDiff</code>.
</p>

<p>
After looking at the format used by Argo/UML to save UML project
files, I'm having renewed interest in XMI to import dependency
graph into UML modeling tools.  This would allow people to draw
the graph visually using their favorite UML tool.  Argo/UML also
uses PGML to store graphics.  This has led to W3C to standardize
SVG, which I might be looking into in the future.
</p>
</dd>
<dt><a name="2002-03-31">March 31, 2002</a></dt>
<dd>
<p>
I finished the reorganization of the <code>Differences</code>
hierarchy for the Decorator pattern.  I have made this change to
ease listing of documentation status changes.  Come to think of
it, I might not have needed this change to do the new feature.
</p>

<p>
I have added some documentation for <code>JarJarDiff</code>
in preparation for the new feature..
</p>
</dd>
<dt><a name="2002-03-30">March 30, 2002</a></dt>
<dd>
<p>
I started some unit tests for the <code>Differences</code>
hierarchy.
</p>
</dd>
<dt><a name="2002-03-27">March 27, 2002</a></dt>
<dd>
<p>
I reorganized the <code>Differences</code> hierarchy to
make room for a Decorator pattern.  I'm reimplementing tracking
of deprecated features to arrange the code.  After that, I'll
be better able to take care of documented vs. undocumented
programming elements.
</p>

<p>
Right now, I've broken something.  I don't have the adequate
unit tests to tell me what it is that I broke.  I guess I've
been a bad boy.  This will take a little while to fix.
</p>
</dd>
<dt><a name="2002-03-21">March 21, 2002</a></dt>
<dd>
<p>
I am rediscovering the <code>com.jeantessier.diff</code>
package in an attempt to incorporate a <i>documented</i>
attribute to programming entities.  I have added javadocs
to explain some of the classes and interfaces.
</p>
</dd>
<dt><a name="2002-03-19">March 19, 2002</a></dt>
<dd>
<p>
That validation list is still giving me headaches.  How can I
make that feature fit without breaking the <i>purity</i> of my
code so far?  :-)
</p>

<p>
In the meantime, I've added a confirmation screen to
<code>extract.jsp</code>, hoping this will prevent lengthy
extractions from happening by accident.
</p>
</dd>
<dt><a name="2002-03-13">March 13, 2002</a></dt>
<dd>
<p>
I have regained control over <code>DiffToExternalHTML</code>.
</p>

<p>
With finer control over validation, how the validation list
is generated and used becomes more and more important.  If we use
javadoc comments, and we want to track when things transition
from valid to invalid or vice versa, we now need a list for the
old version and a list for the new version.  How these two lists
are combined and used remains to be determined.  Should they be
fed to <code>JarJarDiff</code> and merged into the XML output?
Should they be fed to the XSL stylesheet, making it even more
convoluted?  And what about <code>DiffToHTML.xsl</code>?  Should
it start to use Java code too?
</p>

<p>
I streamlined <code>Diff.dtd</code> to remove duplicated
information in the output of <code>JarJarDiff</code>.
</p>
</dd>
<dt><a name="2002-03-10">March 10, 2002</a></dt>
<dd>
<p>
I wrote <code>ListBasedValidator</code> and I have
<code>ListVisibleElements</code>, a doclet for listing programming
elements that have been flagged through their javadoc comments.
This way, one can use javadoc tags to flag classes and features
as part of the published API and guide <code>DiffToExternalHTML</code>
to limit the report to those classes and features.
</p>

<p>
I've started to adjust <code>DiffToExternalHTML</code>, but
that XSL non-trivial.
</p>
</dd>
<dt><a name="2002-03-07">March 07, 2002</a></dt>
<dd>
<p>
I refactored <code>PackageValidator</code> to create the
<code>Validator</code> interface.  This is in preparation to a
more granular validation that would have a feature-level
resolution.
</p>
</dd>
<dt><a name="2002-03-04">March 04, 2002</a></dt>
<dd>
<p>
I've simplified how <code>TransitiveClosure</code> determines
whether or not to follow inbound and outbound dependencies.  But
I still have problems with weird interactions when following both
inbound and outbound dependencies at the same time.
</p>

<p>
I've created <code>closure.jsp</code>, a web application
interface to <code>TransitiveClosure</code>.
</p>

<p>
I've added the appropriate switches to
<code>DependencyClosure</code>.
</p>

<p>
I fixed a typo in <code>DiffToExternalHTML.xsl</code>.
</p>
</dd>
<dt><a name="2002-03-03">March 03, 2002</a></dt>
<dd>
<p>
I've bounded <code>TransitiveClosure</code>.
</p>
</dd>
<dt><a name="2002-02-27">February 27, 2002</a></dt>
<dd>
<p>
I finally have a release plan.
</p>

<p>
I may have found some more/better icons in another open source
software.  More on this later.
</p>
</dd>
<dt><a name="2002-02-26">February 26, 2002</a></dt>
<dd>
<p>
I got rid of the previous <code>DiffToHTML.xsl</code> and
renamed <code>DiffToInternalHTML.xsl</code> to it.  I also added
the product's name to the template and redesigned the title line.
I added it to <code>DiffToExternalHTML.xsl</code> too.  I'm
thinking of making that one simply an XML filter and use the new
<code>DiffToHTML.xsl</code> for all rendering.  But I will need
to figure out how to efficiently copy XML trees in XSLT.
</p>

<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>Log4J</td>
        <td>:</td>
        <td>1.2alpha6</td>
        <td>-></td>
        <td>1.2beta3</td>
    </tr>
    <tr>
        <td>Jakarta ORO</td>
        <td>:</td>
        <td>2.0.4</td>
        <td>-></td>
        <td>2.0.5</td>
    </tr>
    <tr>
        <td>Xerces</td>
        <td>:</td>
        <td>1.4.3</td>
        <td>-></td>
        <td>2.0.0</td>
    </tr>
    <tr>
        <td>Xalan</td>
        <td>:</td>
        <td>2.2 D11</td>
        <td>-></td>
        <td>2.3.1</td>
    </tr>
</table>
</blockquote>
</dd>
<dt><a name="2002-02-21">February 21, 2002</a></dt>
<dd>
<p>
I rewrote the Documentation page to the new
<a target="_blank" href="Resources.html">Resources</a> center.  I hope to keep
track of articles and competing software there.
</p>

<p>
I'm going to upgrade Xerces, Xalan, Jakarta ORO.
</p>
</dd>
<dt><a name="2002-02-19">February 19, 2002</a></dt>
<dd>
<p>
Fixed bugs with <code>com.jeantessier.classreader.XMLPrinter</code>.
The XML now uses lower-case tag names.  I'm still missing a DTD.
</p>

<p>
I upgraded <code>extract.jsp</code> and <code>query.jsp</code>,
so they are a little more friendly now.
</p>

<p>
I moved <code>log4j.properties</code> under <code>src/</code>.
</p>
</dd>
<dt><a name="2002-02-13">February 13, 2002</a></dt>
<dd>
<p>
I modified the <code>com.jeantessier.classreader</code> package
so that <code>ClassfileLoader</code> can notify listeners as soon
as a <code>.class</code> file is loaded.  This way, tools like
<code>DependencyExtractor</code> can use a
<code>TransientClassfileLoader</code> since it does not need the
<code>Classfile</code> instance once the dependencies have been
extracted.
</p>
</dd>
<dt><a name="2002-02-05">February 05, 2002</a></dt>
<dd>
<p>
I need a release plan.  I've had a number of ideas lately for
new features and I need to scope what's doable and what's not,
and have some idea of when I can expect the release.
</p>

<p>
I fixed <code>TransitiveClosure</code>.  I also added to it a
feature where it can now follow inbound dependencies in addition
to outbound ones.  Maybe this will become handy somehow.  I'm
thinking of limiting the depth of the closure exploration, though.
And finally, it now has two modes of operation: one where it only
records the first dependency that led to a <code>Node</code>, and
another where it records all such paths.
</p>

<p>
I adjusted the code so that Log4J is initialized from
<code>log4.properties</code> located on the <code>CLASSPATH</code>.
I thought about putting the file in <code>DependencyFinder.jar</code>,
but decided against.  If someone is familiar with Log4J, they can
edit the configuration file and adjust logging to their liking.
It took a lot of hard work to figure it out.  I had to follow all
the steps below, pretty much in that order:
</p>

<ol>
<li>RTFM</li>
<li>RTFM</li>
<li>RTFM :-)</li>
</ol>

<p>
I temporarily removed <code>xerces.jar</code> and <code>xalan.jar</code>
from the web application WAR file.  This dramatically reduced its size.
I also added <code>deploy</code> and <code>undeploy</code> targets to
the <code>build.xml</code> file for Tomcat.
</p>
</dd>
<dt><a name="2002-02-03">February 03, 2002</a></dt>
<dd>
<p>
I adjusted <code>GraphCopier</code> and <code>GraphSummarizer</code>
to reduce the noise in their scope output.  They used to output the
whole package of any node that was in scope.  This often produced extra
output that would obscure the answer to the query.
</p>

<p>
The new <code>GraphCopier</code> maintains a separate <code>NodeFactory</code>
for scoped nodes and filtered nodes.  Only nodes in the scope are
created using the scoping <code>NodeFactory</code>.  This cuts away
a lot of extraneous information.
</p>

<p>
This has unfortunately broken <code>TransitiveClosure</code>.
</p>
</dd>
<dt><a name="2002-02-02">February 02, 2002</a></dt>
<dd>
<p>
I fixed <code>JarJarDiff</code>.  I forgot to adjust it when
I changed <code>ClassfileLoader</code> to add support for
"progress report"-type of information.  <code>JarJarDiff</code>
did not call <code>Start()</code> on its <code>ClassfileLoader</code>
instances.
</p>
</dd>
<dt><a name="2002-01-29">January 29, 2002</a></dt>
<dd>
<p>
Dependency Finder is one year old!
</p>
</dd>
<dt><a name="2002-01-28">January 28, 2002</a></dt>
<dd>
<p>
I put the functionality for exploring dependency graphs
into a web application.  It is governed by three application
context parameters:
</p>

<dl>
    <dt>
        <b><code>name</code></b>
    </dt>
    <dd>
        A user-friendly name for the codebase.  This allows
        users to know the subject of the dependency graph
        without revealing where it is on the server's file
        system.
    </dd>
    <dt>
        <b><code>source</code></b>
    </dt>
    <dd>
        The compiled Java code to be extracted.  You can
        specify multiple locations by separating them with
        commas.
    </dd>
    <dt>
        <b><code>mode</code></b>
    </dt>
    <dd>
        Whether to maximize or minimize the graph, or leave
        it in raw form.
    </dd>
</dl>

<p>
The application consists of only two JSPs:
</p>

<dl>
    <dt>
        <b><code>extract.jsp</code></b>
    </dt>
    <dd>
        Extracts the dependency graph from the source specified
        by <code>application.getInitParameter("source")</code>.
        The graph will further be processed based on
        <code>application.getInitParameter("mode")</code>.
    </dd>
    <dt>
        <b><code>query.jsp</code></b>
    </dt>
    <dd>
        Displays a subset of the dependency graph, according
        to the user-specified scope and filter.
    </dd>
</dl>

<p>
I may look into better rendering and status out of the JSPs.
</p>
</dd>
<dt><a name="2002-01-25">January 25, 2002</a></dt>
<dd>
<p>
I finally found a practical way to parse the input from the
GUI to allow users to specify multiple regular expressions.
</p>

<p>
I have a plan for making a web application version.  The
<code>application</code> implicit object can hold on to the
dependency factory and a query JSP can run queries and format
the results.  This is going to be cool!
</p>
</dd>
<dt><a name="2002-01-23">January 23, 2002</a></dt>
<dd>
<p>
I'm working on the manual.  I started to use MS Word for some
of the figures.  I'll use Poseidon for the UML.
</p>
</dd>
<dt><a name="2002-01-22">January 22, 2002</a></dt>
<dd>
<p>
I fixed the minimize and maximize discussion.  It had broken links and I had to
regenerate the HTML from the source MS Word document.
</p>

<p>
While I was at it, I fixed the Documentation section too.  It had a few
obsolete links.
</p>

<p>
Someone brought <a target="_blank" href="http://sourceforge.net/projects/jdiff/">JDiff</a> to my
attention.  I've given it a cursory look and I still believe that my work is so
much better.  ;-)  More on this later.  I'll have to create a section on the
<i>competition</i>.
</p>
</dd>
<dt><a name="2002-01-21">January 21, 2002</a></dt>
<dd>
<p>
It turns out the problem with XSL was my fault.  Apparently,
I was not supposed to use the string "--" in comments the way
I did to format the copyright notice.  I'll put the fix in the
next release.  In the mean time, people can either edit the files
themselves or stick to the GUI.
</p>

<p>
I'm working on fixing <code>-verbose</code> and <code>-trace</code>
switches.
</p>

<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>Log4J</td>
        <td>:</td>
        <td>1.1.3</td>
        <td>-></td>
        <td>1.2alpha6</td>
    </tr>
</table>
</blockquote>

<p>
I thought about upgrading Jakarta ORO, who just came out with
version 2.0.5.  But the changes are just bug fixes that don't
impact me, so I decided against.
</p>

<p>
I'll also try to fix the dependency metrics for the next release.
</p>
</dd>
<dt><a name="2002-01-18">January 18, 2002</a></dt>
<dd>
<p>
I'm making progress with the user manual.  I've expanded the
TWiki-like notation to include HTML and inlined images.  I put
the working draft on the project's web site.  It'll be part of
the distribution for the next release.
</p>

<p>
I got my first support call today.  Someone is having difficulties
with one of the XSL converters.  This is all <code>Xalan</code>
stuff, so I'm thinking it might be JVM memory.  I instructed
them to set <code>DEPENDENCYFINDER_OPTS</code> and call me
back.
</p>
</dd>
<dt><a name="2002-01-17">January 17, 2002</a></dt>
<dd>
<p>
I got started on a user manual.  I want to enter the core text
quickly, so I wrote a Perl script to replicate the TWiki shorthand.
I'll use it to generate the initial version of the text and we'll
see later if it's worth while to keep the original shorthand.
</p>
</dd>
<dt><a name="2002-01-15">January 15, 2002</a></dt>
<dd>
<p>
Added feature <code>502554 "Sorting doesn't work on NaN"</code>.
I changed <code>com.jeantessier.metrics.MetricsComparator</code>
so that <code>NaN</code> always appears at the bottom of the
list.
</p>
</dd>
<dt><a name="2002-01-11">January 11, 2002</a></dt>
<dd>
<p>
I am going to switch to SourceForge's project management
tools for keeping track of status and downloads.  It provides
more information and is easier to maintain than my
<a target="_blank" href="Status.html">little manual HTML page</a>.  I'm going to
merge it with this journal and then merge it.
</p>
</dd>
<dt><a name="2002-01-10">January 10, 2002</a></dt>
<dd>
<p>
I moved the code to the BSD-style license.
</p>

<p>
Emacs behaves strangely when under CVS.  I'll need to
adjust the code formatting.  It is back to indenting with
tabs and spaces.
</p>
</dd>
<dt><a name="2002-01-09">January 09, 2002</a></dt>
<dd>
<p>
I finally managed to create the CVS repository on
SourceForge.  I've uploaded a first version of the code,
but it still has the LGPL license instead of the BSD-style
one.
</p>

<p>
I also uploaded the release file in SourceForge's FRS.
One more thing to learn (and is not trivial).
</p>

<p>
I looked at <a target="_blank" href="http://jakarta.apache.org/bcel/">BCEL</a>.
It looks too complex for me to bother with right now.
I already have something that works.  I'm going to stick with
it for now.  I like how my code uses the <code>Visitor</code>
pattern to provide hooks for traversing the structure.
</p>
</dd>
<dt><a name="2002-01-07">January 07, 2002</a></dt>
<dd>
<p>
The <a target="_blank" href="http://jakarta.apache.org/">Jakarta Project</a>
at <a target="_blank" href="http://www.apache.org/">Apache</a> has
<a target="_blank" href="http://jakarta.apache.org/bcel/">BCEL</a>,
a subproject that does the same thing as
<code>com.jeantessier.classreader</code> and more.
</p>
</dd>
<dt><a name="2002-01-03">January 03, 2002</a></dt>
<dd>
<p>
I requested a SourceForge project and had it approved the
same day.  I got SSH to work, but CVS still eludes me.
</p>

<p>
I'm going to change the licensing.  I'm going to move away
from <a target="_blank" href="http://www.gnu.org/licenses/lgpl.html">LGPL</a>
to a <a target="_blank" href="http://www.opensource.org/licenses/bsd-license.html">BSD-style</a>
license.
</p>
</dd>
<dt><a name="2001-12-20">December 20, 2001</a></dt>
<dd>
<p>
I've been considering switching from Log4J to the
JDK 1.4 Logging API. I decided against it after reading
<a target="_blank" href="http://jakarta.apache.org/log4j/docs/critique.html">Ceki G&uuml;lc&uuml;'s comparison of the two</a>.
I've played a little bit with the Logging API and it was very
difficult to introduce a new format for the logged messages.
I believe Log4J is more flexible and easier to use.
</p>

<p>
This being said, I still need to work out the
<code>-verbose</code> and <code>-trace</code> switches so
that they properly adjust the logging configuration.
</p>

<p>
I also need to compare the speed of the tools when
they use Log4J as opposed to <code>com.jeantessier.log</code>.
</p>

<p>
I got rid of the <code>JAVA_BIN</code> and
<code>JAVA_EXE</code> environment variables.  I should be
able to use only <code>JAVA_HOME</code> like everybody else.
</p>
</dd>
<dt><a name="2001-12-15">December 15, 2001</a></dt>
<dd>
<p>
I switched from <code>com.jeantessier.log</code> to
Log4J.  I must now figure out how to send the
information to a log file instead of the console.
</p>
</dd>
<dt><a name="2001-12-13">December 13, 2001</a></dt>
<dd>
<p>
I merged back together <code>JT</code> and <code>JarJarDiff</code>
into <code>DependencyFinder</code>.
</p>

<p>
I renamed <code>com.jeantessier.util.commandline</code> to
<code>com.jeantessier.commandline</code> and
<code>com.jeantessier.util.log</code> to
<code>com.jeantessier.log</code>.  The next step is to replace
<code>com.jeantessier.log</code> with Log4J from the Jakarta
project.
</p>
</dd>
<dt><a name="2001-12-03">December 03, 2001</a></dt>
<dd>
<p>
I added a filtering function to <code>OOMetricsGUI</code>.
With this feature, I can filter a set of metrics to only show
the rows that interest me, out of a large body of code.
</p>

<p>
There is a bug with the sorting function.  If a column contains
NaN values, only the segments between NaN values get sorted.  The
NaN values don't move and I then have islands of data, each one
sorted by itself.
</p>
</dd>
<dt><a name="2001-11-27">November 27, 2001</a></dt>
<dd>
<p>
I change the root of the packages from <code>jt</code> to
<code>com.jeantessier</code>.  This comes as part of the preparations
to make this software open source.
</p>

<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>Jean Tessier API</td>
        <td>:</td>
        <td>20011114</td>
        <td>-></td>
        <td>20011125</td>
    </tr>
</table>
</blockquote>
</dd>
<dt><a name="2001-11-21">November 21, 2001</a></dt>
<dd>
<p>
I added the ability to sort the columns in tables from <code>OOMetrics</code>.
</p>

<p>
I also fixed a minor bug in <code>jt.dependency.GraphSummarizer</code>
where it was not using the right level for scope and filters (class when
it should have been package).
</p>
</dd>
<dt><a name="2001-11-13">November 13, 2001</a></dt>
<dd>
<p>
I've put everything under the
<a target="_blank" href="http://www.gnu.org/licenses/lgpl.html">LGPL</a>.
</p>

<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>Jean Tessier API</td>
        <td>:</td>
        <td><i>unknown</i></td>
        <td>-></td>
        <td>20011114</td>
    </tr>
</table>
</blockquote>
</dd>
<dt><a name="2001-11-07">November 07, 2001</a></dt>
<dd>
<p>
I got some performance numbers.  I don't recall which column
is which implementation, but it seems to point to a decrease in
performance.  :-(
</p>

<table border="1">
    <tr>
        <th>
            Corpus
        </th>
        <th>
            Before (secs)
        </th>
        <th>
            After (secs)
        </th>
    </tr>
    <tr>
        <td>
            JDK 1.3.1_01
        </td>
        <td align="right">
            148.363
        </td>
        <td align="right">
            154.507
        </td>
    </tr>
    <tr>
        <td>
            EFS 4.0 b29
        </td>
        <td align="right">
            206.717
        </td>
        <td align="right">
            210.042
        </td>
    </tr>
</table>

<p>
I'll have to redo these tests to make sure.
</p>
</dd>
<dt><a name="2001-11-06">November 06, 2001</a></dt>
<dd>
<p>
I removed trace statements from
<code>jt.dependency.VisitorBase</code> to boost performance.
In tests with <code>JT.jar</code> and <code>DependencyFinder.jar</code>,
I couldn't detect any difference.  Can you see the difference?
</p>

<p>
I also got the latest <code>JT</code> library.
</p>

<p>
I revamped the web page.
</p>
</dd>
<dt><a name="2001-11-04">November 04, 2001</a></dt>
<dd>
<p>
<code>OOMetricsGUI</code> is a Swing GUI put on top of
<code>OOMetrics</code>.  It resulted in the creation of the
<code>jt.swing</code> package to hold generic classes for
Swing applications.
</p>

<p>
The next step is to be able to sort on arbitrary columns.
I must also integrate it with <code>DependencyFinder</code>.
</p>
</dd>
<dt><a name="2001-10-30">October 30, 2001</a></dt>
<dd>
<p>
I fixed a problem with inner classes.  <code>OOMetrics</code> was
counting all inner class entries in the InnerClasses class attribute.
This included references to inner classes in other classes, resulting
in a count that was higher than reality.  It now restricts itself to
actual inner classes of the current class, resulting in the correct
count.
</p>

<p>
I also adjusted how the <code>jt.classreader.Classfile</code>
constructor writes trace entries about its constant pool.  This way,
the text of the pool gets generated only if there is a log object to
print it.  I'm expecting a 25% improvement in performance as this
involves quite a bit of conversions when printing the entries in the
constant pool.
</p>

<p>
I also fixed a bug in <code>OOMetrics</code> so that it now uses the
<code>-project-name</code> command line switch instead of
<code>-project</code> to determine the project's name in reports.
</p>
</dd>
<dt><a name="2001-10-28">October 28, 2001</a></dt>
<dd>
<p>
For a while now, I have been less than pleased at having to
operate on maximized graphs.  I revised <code>jt.dependency.GraphCopier</code>
to make <code>jt.dependency.GraphSummarizer</code>.  The latter
explores the graph more fully to compensate for the sparseness of the
graph.  This modification will shorten the time it takes to read the graph,
but queries will take longer to process.  Usage in the field will tell which
mode works best on real projects, whether it is <i>normal</i>, <i>minimized</i>,
or <i>maximized</i>.  I had to retrofit <code>DependencyReporter</code>,
<code>DependencyMetrics</code>, and <code>DependencyFinder</code> and give
them the appropriate switches.
</p>
</dd>
<dt><a name="2001-10-24">October 24, 2001</a></dt>
<dd>
<p>
I found a bug in <code>jt.dependency.CodeDependencyCollector</code>
where it does not process <code>catch</code> clauses to include
dependencies on caught exceptions.
</p>

<p>
In order to fix this bug, I revisited
<code>jt.classreader.VisitorBase</code> to build in default
behavior that explores all parts of the classfile structure.
</p>

<p>
I also modified <code>DependencyFinder</code> to include
command-line switches <code>-trace</code> and <code>-verbose</code>.
</p>
</dd>
<dt><a name="2001-10-19">October 19, 2001</a></dt>
<dd>
<p>
I added switches to <code>OOMetrics</code> to make the parts
of the report conditional.  This way, the users can request only
specific parts of the report if they want.
</p>

<p>
I need modified <code>jt.metrics.ui.OOMetrics</code> so that
it parses all classes before starting the analysis.
</p>
</dd>
<dt><a name="2001-10-18">October 18, 2001</a></dt>
<dd>
<p>
I fixed a bug in <code>jt.metrics.MetricsGatherer</code>
that caused a <code>NullPointerException</code> when analyzing
<code>java.lang.Object</code>.  It also skewed Depth of Inheritance
metrics.
</p>

<p>
I also fixed a bug when processing static class initializers.
They were getting attached to a no name class in the default
package.  Parsing the name correctly fixed the problem.
</p>

<p>
I might have to have two sets of parsed classes, one for
analysis and the other for support classes.  This is in order
to correctly compute the Depth of Inheritance metric.
</p>

<p>
I need to modify <code>jt.metrics.ui.OOMetrics</code> so that
it parses all classes before starting the analysis.  Right now,
it parses and analyzes each parameter on the command-line
separately.
</p>
</dd>
<dt><a name="2001-10-17">October 17, 2001</a></dt>
<dd>
<p>
I adjusted the display of ratio metrics in
<code>jt.metrics.PrettyPrinter</code> and reorganized the code
in the subclasses of <code>jt.metrics.Printer</code>, making it
implement <code>jt.metrics.MeasurementVisitor</code>.  I used
the occasion to normalize the behavior of the <code>-time</code>
switch to <code>OOMetrics</code>.
</p>
</dd>
<dt><a name="2001-10-16">October 16, 2001</a></dt>
<dd>
<p>
I added ratio metrics in <code>jt.metrics.MetricsFactory</code>.
</p>

<p>
I now use instances of <code>java.text.NumberFormat</code> in
<code>jt.metrics.PrettyPrinter</code> to adjust the display of
numbers.
</p>

<p>
I played with using <code>Jikes</code> to compile the code
instead of <code>javac</code>, but the difference in compile
time was not worth the extra warnings (4 secs vs. 10 secs).
</p>

<p>
I now use the default compiler mode in <code>javac</code>,
<code>modern</code>, instead of <code>classic</code>.  I hope
this won't break the compatibility with JDK 1.2 VMs.
</p>
</dd>
<dt><a name="2001-10-15">October 15, 2001</a></dt>
<dd>
<p>
It's been a while, but I've been preparing an OO metrics module.
Right now, it is only available as a command-line utility named
<code>OOMetrics</code>.  It is very unstable and not all metrics
are computed yet.  Output is either text, <code>.csv</code> file,
or XML.  I will eventually have XSL stylesheets to format the XML
output.  I will also eventually incorporate it in
<code>DependencyFinder</code>.
</p>

<p>
I added PC counter information to the trace information from
<code>jt.classreader.Code_attribute</code>.
</p>

<p>
Upgraded the following development components:
</p>

<blockquote>
<table>
    <tr>
        <td>JDK</td>
        <td>:</td>
        <td>1.3</td>
        <td>-></td>
        <td>1.3.1_01</td>
    </tr>
    <tr>
        <td>Ant</td>
        <td>:</td>
        <td>1.3</td>
        <td>-></td>
        <td>1.4.1</td>
    </tr>
    <tr>
        <td>Jakarta ORO</td>
        <td>:</td>
        <td>2.0.1</td>
        <td>-></td>
        <td>2.0.4</td>
    </tr>
    <tr>
        <td>Xerces</td>
        <td>:</td>
        <td>1.4.1</td>
        <td>-></td>
        <td>1.4.3</td>
    </tr>
    <tr>
        <td>Xalan</td>
        <td>:</td>
        <td>2.2_D3</td>
        <td>-></td>
        <td>2.2_D11</td>
    </tr>
</table>
</blockquote>
</dd>
<dt><a name="2001-08-30">August 30, 2001</a></dt>
<dd>
<p>
I fixed a bug in <code>jt.dependency.CodeDependencyCollector</code>.
It was not looking at the signature of called methods when looking
for dependencies.  I also stopped processing instruction <code>0xBB (new)</code>,
since the call to the constructor always follows shortly after.
</p>

<p>
I fixed a bug in <code>jt.dependency.PrettyPrinter</code>.  It was
not collecting dependencies correctly when they were between
different kinds of nodes (e.g., feature to class).
</p>

<p>
There was a bug with <code>jt.dependency.LinkMinimizer</code>.
It misses some redundancies.  The whole class had to be redone.
I now have a strong test suite for it and for
<code>jt.dependency.LinkMaximizer</code> too.
</p>
</dd>
<dt><a name="2001-08-28">August 28, 2001</a></dt>
<dd>
<p>
I added controls for the printer of dependency reports in
<code>DependencyFinder</code>.  This way, we can now limit the
results to inbound or outbound dependencies only, and remove
empty nodes from the result.
</p>
</dd>
<dt><a name="2001-08-24">August 24, 2001</a></dt>
<dd>
<p>
I adjusted the text output for a nicer printout.  I reorganized
the <code>jt.dependency.Printer</code> hierarchy to preserve the old
format and maximize code reuse.
</p>
</dd>
<dt><a name="2001-08-21">August 21, 2001</a></dt>
<dd>
<p>
I fixed a scoping problem in <code>jt.dependency.GraphCopier</code>.
It did not follow inbound dependencies and was therefore missing many
dependencies.  I suspect that the same goes for
<code>jt.dependency.TransitiveClosure</code>, but I have not had the
time to investigate.
</p>
</dd>
<dt><a name="2001-08-17">August 17, 2001</a></dt>
<dd>
<p>
I fixed a scoping problem in the <code>jt.dependency.Visitor</code>
hierarchy.  I also added some new unit tests in the process.
</p>
</dd>
<dt><a name="2001-08-16">August 16, 2001</a></dt>
<dd>
<p>
I made major changes in the <code>jt.dependency.Visitor</code>
and <code>jt.dependency.TraversalStrategy</code> hierarchies.  I
have consolidated the visitors under a single base class and
moved the complex traversal logic into a traversal strategy
implementation.
</p>

<p>
There is a bug with the new traversal strategy which does not
traverse the graph at all unless
<code>jt.dependency.TraversalStrategy.PackageScope()</code>
is true.  Likewise, feature nodes don't get visited unless
<code>jt.dependency.TraversalStrategy.ClassScope()</code>
is also true.
</p>
</dd>
<dt><a name="2001-08-12">August 12, 2001</a></dt>
<dd>
<p>
Made <code>jt.dependency.MetricsGatherer</code> inherit from
<code>SubGraphSelector</code> instead of <code>VisitorBase</code>
so that I could apply scoping to metrics queries.  I had to
retrofit <code>DependencyFinder</code> and <code>DependencyMetrics</code>
to pass in the scoping parameters.
</p>

<p>
I wrote <code>GraphCopier</code>.  I can now easily make copies
of graphs before maximizing them.
</p>

<p>
I have unit tests, using JUnit, for <code>GraphCopier</code>.
</p>
</dd>
<dt><a name="2001-08-03">August 03, 2001</a></dt>
<dd>
<p>
The status line of <code>DependencyFinder</code> (previously
known as <code>SwingDependencyReporter</code>) was using up too
much CPU time, so I trimmed down the number of messages that get
displayed.  I also had <code>OpenFileAction</code> display class
names on the status line as they are being loaded.
</p>
</dd>
<dt><a name="2001-05-29">May 29, 2001</a></dt>
<dd>
<p>
I fixed bugs in <code>SwingDependencyReporter</code>.
</p>

<ul>
<li>The class <code>XMLFileFilter</code> no longer ignores directories.</li>
<li>I now use the Metal look and feel.</li>
<li>I made the result area non-editable.  You can still cut and paste from it (at least on Windows).</li>
</ul>


</dd>
<dt><a name="2001-05-27">May 27, 2001</a></dt>
<dd>
<p>
I added <code>SwingDependencyReporter</code>, a Swing-based
GUI for <code>DependencyReporter</code>.  It is still a
little buggy, but it works.
</p>

<p>
I also reorganized the <code>jt.dependency</code>
package to isolate the UI-related stuff in subpackages.
The package hierarchy may still need some tweaking.
</p>
</dd>
<dt><a name="2001-05-22">May 22, 2001</a></dt>
<dd>
<p>
I revised all the <code>.bat</code> files to support an
arbitrary number of arguments.  On Windows machines, this
can require messing with the <code>CONFIG.SYS</code> file
to increment the amount of memory dedicated to environment
variables.
</p>
</dd>
<dt><a name="2001-05-17">May 17, 2001</a></dt>
<dd>
<p>
I added a <code>-f2f</code> switch and matching <code>.bat</code>
files for <code>DependencyReporter</code> to analyze
software at the feature level.
</p>

<p>
I am rewriting the <code>.bat</code> files to support an
arbitrary number of arguments.
</p>

<p>
I also added a <code>-time</code> switch to all commands
so we can time their execution.
</p>
</dd>
<dt><a name="2001-04-26">April 26, 2001</a></dt>
<dd>
<p>
I upgraded the package <code>jt.classreader</code> so I could
get signatures from all methods references.  I also upgraded the
package <code>jt.dependency</code> to track methods by signature,
instead of only by name.
</p>
</dd>
<dt><a name="2001-04-16">April 16, 2001</a></dt>
<dd>
<p>
Upgraded Ant (1.0.8 -> 1.3) and Jakarta ORO (1.2 -> 1.2.1).
</p>

<p>
I need to get JUnit involved!
</p>

<p>
I thought of adding support in the <code>jt.classreader</code>
package for generating the <code>.class</code> file.  This way,
I can easily test the whole package by parsing and then rewriting
a <code>.class</code> file.  If the bytes are the same, then no
information was lost during parsing.
</p>
</dd>
<dt><a name="2001-04-09">April 09, 2001</a></dt>
<dd>
<p>
Spun off <code>JarJarDiff</code>.
</p>

<p>
Reorganized the package structure.
</p>
</dd>
<dt><a name="2001-04-05">April 05, 2001</a></dt>
<dd>
<p>
When attempting to locate a feature, the code now looks at
implemented interfaces too.  <code>ClassDifferences</code> will
use this for all fields and only for methods between classes or
between interfaces.
</p>

<ul>
<li>A field removed from an interface or from a class will only be showed as removed if it cannot be obtained from a superclass or supported interface.</li>
<li>A method removed from an interface will only be showed as removed if it cannot be obtained from a supported interface (superinterface).</li>
<li>A constructor or method removed from a class will only be showed as removed if it cannot be obtained from a superclass. It will not consider a matching method that would be obtained from an interfaces, since this interface would not provide an implementation for that method.</li>
</ul>

<p>
I renamed the packages.  I'm still not happy with all the names,
specially the <code>jt.tools</code> package.
</p>
</dd>
<dt><a name="2001-04-04">April 04, 2001</a></dt>
<dd>
<p>
I adjusted <code>JarJarDiff</code> so that when it detects a
feature that has been removed, it looks in the superclasses of
the class for a matching signature or proper visibility.  This
can happen when refactoring pushes a method up the inheritance
tree.  The method is no longer in the class, but it can still
be visible if it was declared <code>public</code> or
<code>protected</code>.  The XML node gets a new attribute to
indicate that a removed feature is now inherited.  The XSL
stylesheet can then choose to ignore the removed feature, if it
wants to.
</p>

<p>
I've added a tool called <code>DiffToInheritanceChange</code>
that lists interfaces and classes whose <code>extends</code>
or <code>implements</code> clause have changed.
</p>

<p>
I need to redo the packaging and add documentation.
</p>
</dd>
<dt><a name="2001-04-02">April 02, 2001</a></dt>
<dd>
<p>
I fixed a bug in the package <code>jt.dependencyfinder.classreader</code>
to process unknown or custom attributes in the <code>.class</code>
file, such as those generated by the Microsoft compiler.
</p>

<p>
I also fixed bugs in <code>DiffToExternalHTML.xsl</code> dealing
with restricting the processing to public or protected features,
as well as correctly detecting changes in visibility from protected
to package or private.
</p>
</dd>
<dt><a name="2001-03-28">March 28, 2001</a></dt>
<dd>
<p>
I gave a copy to Mickey Reilly so she can start using
<code>JarJarDiff</code>.  I had to add quick installation instructions
in <code>readme.txt</code>.
</p>
</dd>
<dt><a name="2001-03-20">March 20, 2001</a></dt>
<dd>
<p>
<code>JarJarDiff</code> is done, along with its stylesheets.  If I
have the time, I'll build test cases so we can verify that it really
does trap everything it's supposed to.
</p>

<p>
The script <code>JarJarDiff.bat</code> takes two codebases (JAR files,
Zip files, or directories) and saves the differences in an XML document.
</p>

<p>
The script <code>DiffToInternalHTML.bat</code> takes the XML document
generated by <code>JarJarDiff</code> and transforms it completely to HTML.
</p>

<p>
The script <code>DiffToExternalHTML.bat</code> takes the XML document
generated by <code>JarJarDiff</code> and transforms the public subset of
it to HTML.
</p>

<p>
I may need to split this website according to the various tools:
</p>

<ul>
<li><code>DependencyExtractor</code></li>
<li><code>DependencyReporter</code></li>
<li><code>DependencyClosure</code></li>
<li><code>DependencyMetrics</code></li>
<li><code>ClassMetrics</code></li>
<li><code>JarJarDiff</code></li>
<li>utilities</li>
</ul>
 
<p>
I may also need to revise the package names and organization.
</p>
</dd>
<dt><a name="2001-03-19">March 19, 2001</a></dt>
<dd>
<p>
Pretty much done.
</p>

<p>
In <code>DiffToExternalHTML.xsl</code>, I now use an XSLT Extension
in Xalan-Java to limit the report to a subset of packages defined in a
separate file.  The XSL stylesheet has a default value for the filename,
and I should be able to pass in a value from the command-line.  I can
now trap changes in <code>extends</code>, <code>implements</code>, and
<code>throws</code> clauses, as well as in the return type of methods.
</p>
</dd>
<dt><a name="2001-03-16">March 16, 2001</a></dt>
<dd>
<p>
In <code>DiffToExternalHTML.xsl</code>, I can use an XSLT Extension
in Xalan-Java to limit the report to a subset of packages defined in a
separate file.
</p>

<p>
In <code>DiffToExternalHTML.xsl</code>, I need to filter out
declarations that only remove <code>abstract</code>, <code>final</code>,
and <code>static</code>, instead of filtering in declarations that
add it.  This way, I might be able to trap changes in <code>extends</code>,
<code>implements</code>, and <code>throws</code>, as well as return type.
</p>
</dd>
<dt><a name="2001-03-15">March 15, 2001</a></dt>
<dd>
<p>
Refactored <code>JarJarDiff</code> and the XSL stylesheets
to generate both reports from the same XML file.  <code>JarJarDiff</code>
still supports the <code>-external</code> switch, but not for
long.  I am also more strict regarding what goes in the external
(i.e., public) report.  Now, all I need to do is be still more
strict on what features are reported, and restrict the report to
a subset of packages.
</p>

<p>
It turns out we want feature signatures after all.
</p>
</dd>
<dt><a name="2001-03-14">March 14, 2001</a></dt>
<dd>
<p>
Refactored <code>JarJarDiff</code> and the
<code>jt.dependencyfinder.diff</code> package.  I adjusted the
XSL stylesheet accordingly.  Now, all I need to do is be more
strict on what features are reported, and restrict the report
to a subset of packages.
</p>

<p>
Also, do we want feature signatures or full declarations in
lists?
</p>
</dd>
<dt><a name="2001-03-12">March 12, 2001</a></dt>
<dd>
<p>
Renamed the <code>JarDiff</code> tool to <code>JarJarDiff</code>,
at a friend's recommendation.  I adjusted the output so that it
lists methods by signature instead of name.  It actually outputs
XML and has a XSL stylesheet for converting to HTML.  I don't have
one for text, yet.
</p>

<p>
I've added a tool to compute the transitive closure of elements.
It is named <code>DependencyClosure</code>.  If creates a sub-graph
of the dependency graph by following outbound dependencies.  By
starting on one class, you can find out all the classes that are
used directly or indirectly by that class.  It uses the same scoping
and filtering engine as <code>DependencyReporter</code>.
</p>

<p>
I've added another tool to compute dependency statistics, such
as the number of inbound vs. outbound links.  It is named
<code>DependencyMetrics</code>.  I also renamed <code>Metrics</code>
to <code>ClassMetrics</code> in the process.
</p>
</dd>
<dt><a name="2001-03-08">March 08, 2001</a></dt>
<dd>
<p>
Added the <code>JarDiff</code> tool to compare different
versions of the same codebase, using the
<code>jt.dependencyfinder.classreader</code>
package.  This first version is pretty stupid and writes
only text output from <code>main()</code>.  It needs to
be refactored to produce XML, and then use XSL stylesheets
to generate text and HTML reports.
</p>

<p>
I've added many utility methods in the
<code>jt.dependencyfinder.classreader</code>
package to help in interrogating classes.
</p>
</dd>
<dt><a name="2001-03-07">March 07, 2001</a></dt>
<dd>
<p>
More bug fixes with parsing <code>.class</code> files.
</p>
</dd>
<dt><a name="2001-03-06">March 06, 2001</a></dt>
<dd>
<p>
Fixed the <code>.bat</code> files.  Also created the <code>readme.txt</code> file that explains how to
install the tool.  The <code>.bat</code> files still depend on the <code>JAVA_EXE</code> environment
variable.  I need to fix that so that the <code>.bat</code> files try <code>JAVA_HOME</code> and/or
give a nice error message when they cannot find the JVM.
</p>

<p>
Added <code>Metrics</code> to handle class metrics gathering, as described on
<a href="#2001-03-05">2001-03-05</a>.  I have yet to gather metrics about dependencies.
</p>

<p>
Fixed some bugs with parsing <code>.class</code> files.
</p>
</dd>
<dt><a name="2001-03-05">March 05, 2001</a></dt>
<dd>
<p>
I tweaked <code>CodeDependencyCollector</code> to process
<code>new</code>, <code>anewarray</code>, <code>checkcast</code>,
<code>instanceof</code>, and <code>multianewarray</code> opcodes.
It doesn't seem to add any dependencies that were not already
found by just looking at field access and method call instructions,
but maybe this is just a quirk of my code.
</p>

<p>
I need to adjust the <code>.bat</code> files so that they
are no longer tied to my environment.  I'll create a
<code>DEPENDENCYFINDER_HOME</code> environment variable,
this way people only need to set that variable to start
using the tools.  Eventually, I could look at some kind of
InstallShield or InstallAnywhere solution.
</p>

<p>
I also want to create some additional implementations of the
<code>jt.dependencyfinder.classreader.Visitor</code>
interface to compute software metrics, such as:
</p>

<ul>
<li>number of packages, classes, methods</li>
<li>number of classes per package or methods per class</li>
<li>number of public, static, or synthetic classes or features (i.e., fields and methods)</li>
<li>...</li>
</ul>

<p>
I could do the same with additional implementations of the
<code>jt.dependencyfinder.model.Visitor</code>
interface to compute software metrics, such as:
</p>

<ul>
<li>number of outbound dependencies per package, class, or feature</li>
<li>number of inbound dependencies per package, class, or feature</li>
<li>...</li>
</ul>

<p>
For these last dependency metrics, the tools should be applicable to
the output of both <code>DependencyExtractor</code> and
<code>DependencyReporter</code>, so that scoping can be used without
duplicating the functionality in <code>DependencyReporter</code>.
</p>
</dd>
<dt><a name="2001-03-02">March 02, 2001</a></dt>
<dd>
<p>
After running the tools on themselves, I reorganized
the package hierarchy and simplified it greatly.
</p>

<p>
I added XSL stylesheets for converting dependency graphs
to text and HTML.  Each stylesheet has three version:
</p>

<ol>
<li>Whole graph</li>
<li>List only outbound dependencies (show nodes that are dependent on others)</li>
<li>List only inbound dependencies (show dependable nodes, i.e., depended upon)</li>
</ol>

<p>
I added shorthand options to <code>DependencyReporter</code>.
I also added shorthand <code>.bat</code> files.
</p>

<p>
I adjusted <code>DependencyExtractor</code> to scan the
bytecode using <code>CodeDependencyCollector</code> instead
of limiting itself to traversing the constant pool and looking
at signatures.
</p>

<p>
I refactored <code>Collector</code>, making it an interface
with a base implementation (<code>CollectorBase</code>) and
creating an inheritance ladder with <code>Visitor</code>.
</p>

<p>
I found yet another bug with <code>byte</code> as a signed type.
There may be others still waiting to manifest themselves.
</p>
</dd>
<dt><a name="2001-03-01">March 01, 2001</a></dt>
<dd>
<p>
Added a script for doing XSL Transformations.  It uses
Apache's Xalan.  Now all I need are some XSL stylesheets.
</p>

<p>
<code>DependencyReporter</code> is working fine, except
that the command-line is starting to exceed DOS limits.
I will need to create an XML configuration document if
I want to process complex queries.
</p>

<p>
I fixed <code>DependencyExtractor</code> so that it can
read from JAR and Zip files.
</p>

<p>
I found yet another bug caused by things use index 0 in
the constant pool to represent special cases.  There may be
others still waiting to manifest themselves.
</p>
</dd>
<dt><a name="2001-02-28">February 28, 2001</a></dt>
<dd>
<p>
Simplified the command-line interfaces to the major
tools (<code>DependencyExtractor</code> and
<code>DependencyReporter</code>).
</p>

<p>
Fixed <code>Reporter</code> to assume it is operating
on a maximized graph.  This simplifies the processing and
minimizes traversals.  This might have also solved the
printing problems I was experiencing.
</p>

<p>
Fixed a bug where a feature could get a dependency
on its class or package, and vice versa.  The same
thing was happening between classes and packages.
</p>
</dd>
<dt><a name="2001-02-27">February 27, 2001</a></dt>
<dd>
<p>
Added the <code>CodeIterator</code> class in the
<code>jt.dependencyfinder.classreader</code>
package.  This allows me to traverse bytecode and capture
dependencies originating from methods.  I have yet to figure
out exactly how to use it.  I'm thinking of writing a
new <code>DependencyCollector</code> to do all the
collecting, instead of the current two step class then
feature collection.
</p>

<p>
Added the <code>Reporter</code> class in the
<code>jt.dependencyfinder.model.Visitor</code>
hierarchy.  This allows me to build a <code>Node</code>
graph from the dependency graph which answers queries
such as package-to-package dependencies and the like.
I've adjusted <code>DependencyReporter</code> to make
use of this new class.  There are still problems with
displaying scopes of other things than packages, but it
should be easy to solve.
</p>

<p>
The interfaces to <code>DependencyExtractor</code> and
<code>DependencyReporter</code> need work to make them
easier to use.
</p>

<p>
I must fix the deserialization bug in the
<code>jt.dependencyfinder.classreader.Classfile</code>
package.
</p>

<p>
I must also make the whole
<code>jt.dependencyfinder.classreader.Classfile</code>
easier to use for general purposes (i.e., Jeff).
</p>
</dd>
<dt><a name="2001-02-21">February 21, 2001</a></dt>
<dd>
<p>
Added the <code>ClassfileLoader</code> hierarchy in the
<code>jt.dependencyfinder.classreader</code>
package.  This allows me to read from <code>.class</code>
files from a directory tree, from a JAR file, or from a
Zip files.
</p>

<p>
Right now, the loaders load and parse everything in
the constructors.  I need to enhance these classes to
do lazy loading and provide a list of the entries they
contain.  Whether these entries will be file names or
class names is not decided yet.
</p>

<p>
I also need to enhance the classes in the
<code>jt.dependencyfinder.classreader</code>
package to provide better navigation and query mechanisms
in the <code>Classfile</code>-rooted structure.  I need to
be able to pull methods and fields by name rather than
iterate through the collections.  I need to simple query
methods when looking for tagging attributes such as
<code>Synthetic_attribute</code> or
<code>Deprecated_attribute</code>.
</p>
</dd>
<dt><a name="2001-02-20">February 20, 2001</a></dt>
<dd>
<p>
Added a SAX parser for reading the dependency
<a target="_blank" href="Components.html#xml">XML format</a>, using Xerces
from Apache.
</p>

<p>
Added an embryonic <code>DependencyReporter</code> tool.
I'm thinking of having this tools output some form of XML
and then use XSLT to convert it to whatever I need.  I
would most likely use Apache's Xalan for that.
</p>

<p>
I'm also thinking of another tool that would create
a file hierarchy that mirrors the one from <code>javadoc</code>.
This way, I could embed dependency information in the
automatically generated documentation.  Each class comments
could include a hyperlink to a local file with the dependencies
for that class.  The same would go for packages.
</p>

<p>
I also need to figure a way to read <code>.class</code>
from JAR files, in addition to directories.
</p>
</dd>
<dt><a name="2001-02-16">February 16, 2001</a></dt>
<dd>
<p>
Renamed the extraction tool from
<code>DependencyFinder</code> to
<code>DependencyExtractor</code>.
</p>

<p>
Added <code>LinkMinimizer</code> and
<code>LinkMaximizer</code> visitors to control the
size of the dependency graph.  <code>LinkMinimizer</code>
removes redundant edges while <code>LinkMaximizer</code>
replicates edges.  The minimal graphs gives a more compact
representation, but traversal can be slowed down.  The
full graph takes up more space, but its traversal will
be more efficient when computing metrics such as
aggregated package dependencies.
</p>
</dd>
<dt><a name="2001-02-14">February 14, 2001</a></dt>
<dd>
<p>
Refactored the
<code>jt.dependencyfinder.model</code>
package to have a <code>Node</code> hierarchy and
<code>Visitor</code> classes.  This way, I will be
able to use visitors to implement reporting functions
in Java.
</p>
</dd>
<dt><a name="2001-02-13">February 13, 2001</a></dt>
<dd>
<p>
Added <code>DirectoryExplorer</code> and the
<code>jt.dependencyfinder.model</code>
package.  The new <code>DependencyFinder</code>
tool either prints the <i>forest of packages</i>
or the burgeoning <a target="_blank" href="Components.html#xml">XML output</a>.
</p>

<p>
We may have a problem with inlined code.  Features
marked as <code>public static final</code> do not
show up.
</p>
</dd>
<dt><a name="2001-02-12">February 12, 2001</a></dt>
<dd>
<p>
Regarding the need for compiling in debug mode
(<code>-g</code> switch).  This is required in order to
capture dependencies created by the type of local variables
in methods.  The compiler verifies the legality of type
assignments and then discards the type information.  When
the compiler is called with <code>-g</code>, it keeps the
type information to create the <code>LocalVariableTable</code>
attribute of <code>Code</code> attributes.  If the
assignment is legal, then it meets all the dependency
requirements.  It either uses the same dependency, or creates
a new one which is more restrictive than the initial
dependency (i.e., it transitively includes the former).
Dependencies are not automatically considered transitive,
but in this case they are.  It is therefore acceptable
to ignore the dropped dependency.  If someone really
wants to see it, he or she simply has to compile the
code using <code>-g</code> and run the dependency
finder again.
</p>
</dd>
<dt><a name="2001-02-08">February 08, 2001</a></dt>
<dd>
<p>
I should consider turning this into an Ant task.
</p>

<p>
What if I used a <code>ClassLoader</code> instead to
trap class requests as the target class is being
resolved?  The good thing about looking at the
<code>.class</code> file only is that I don't need to
have all the dependencies on the <code>CLASSPATH</code>
at the time.
</p>

<p>
I looked at the classes used by <code>javac</code>
and it appears to be a mess.  I'll stick with my things
for now.
</p>
</dd>
<dt><a name="2001-02-05">February 05, 2001</a></dt>
<dd>
<p>
I reinstated the Visitor pattern in the
<code>jt.dependencygenerator.classreader</code>
package with a vengeance.  It turned out to
be useful in other areas of the <code>.class</code>
file as well.  Visitors can now explore the
whole <code>.class</code> file, including fields,
methods, and attributes.
</p>

<p>
I moved the <code>ClassReader</code> tool from the
<code>jt.dependencygenerator.classreader</code>
package to the <code>jt.dependencygenerator.tools</code>
package.
</p>

<p>
The extractor now reads the entire <code>.class</code>
file.
</p>

<p>
It has problems reading from compressed JAR files.
It seems to be OK with uncompressed ones.  Maybe I can
use the <code>java.util.jar</code> package to read the
whole byte stream in memory before starting the processing.
</p>

<p>
Handed a copy of the code to Jeff Chan.
</p>
</dd>
<dt><a name="2001-02-01">February 01, 2001</a></dt>
<dd>
<p>
I broke out the package and got rid of the Visitor
pattern in the
<code>jt.dependencygenerator.classreader</code>
package because I had only one simple visitable
object.
</p>

<p>
The extractor only reads from the constant pool,
which only holds references to methods that are
called and fields that are accessed.  Each field
and method entry later in the <code>.class</code>
file maintains its own index to the name and
descriptor (i.e., signature) in the constant pool.
</p>

<p>
I must parse deeper in the <code>.class</code>
file to extract field and method entries and
get the references I need from there.
</p>

<p>
I must also make sure that I capture dependences
from local variables in methods!
</p>

<p>
Fran&ccedil;ois is looking for a JAR
comparison tool to analyze differences between two
versions of a given JAR file.  Once I've tuned the
<code>.class</code> file parser, we could use it to
extract API information from JAR files.
</p>
</dd>
<dt><a name="2001-01-30">January 30, 2001</a></dt>
<dd>
<p>
The extractor is half-way done.  The current version
is not very good at keeping track of which signatures
are really useful, and I'm not very happy with the
large <code>switch()</code> statements.
</p>
</dd>
<dt><a name="2001-01-29">January 29, 2001</a></dt>
<dd>
<p>
Project start.
</p>
</dd>

</dl>

<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-2083086-2";
urchinTracker();
</script>

</body>

</html>
