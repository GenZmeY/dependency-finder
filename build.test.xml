<project name="Tests" default="all" basedir=".">

    <description>
        Tests for Dependency Finder, JarJarDiff, and OOMetrics
    </description>

    <property environment="env"/>

    <target name="main.compile">
        <ant antfile="build.xml" target="compile" inheritAll="true"/>
    </target>

    <target name="main.clean">
        <ant antfile="build.xml" target="clean" inheritAll="false"/>
    </target>

    <target name="main.realclean">
        <ant antfile="build.xml" target="realclean" inheritAll="false"/>
    </target>

    <target name="main.log4j.config">
        <ant antfile="build.xml" target="log4j.config" inheritAll="false"/>
    </target>

    <target name="all" depends="clean, compile, run"
            description="Makes a clean compile and runs all tests"/>

    <target name="clean" depends="main.clean"
            description="Removes all produced files">
        <ant dir="tests/JarJarDiff" target="clean" inheritAll="false"/>
    </target>

    <target name="compile" depends="main.compile, main.log4j.config"
            description="Compiles everything required to run all the tests">
        <ant dir="tests/JarJarDiff" inheritAll="false"/>
    </target>

    <target name="run"
            description="Runs all unit tests and generates a test run report">
        <exec executable="./gradlew">
            <arg value="lib:check"/>
            <arg value="integration-tests:check"/>
            <arg value="fit-tests:check"/>
        </exec>
    </target>

    <target name="realclean" depends="main.realclean, clean"
            description="Removes all produced files"/>

</project>
